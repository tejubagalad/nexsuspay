(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var Sd={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function $A(){if(h_)return El;h_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:h}}return El.Fragment=t,El.jsx=i,El.jsxs=i,El}var f_;function ZA(){return f_||(f_=1,Sd.exports=$A()),Sd.exports}var q=ZA(),bd={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function JA(){if(d_)return bt;d_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.iterator;function N(I){return I===null||typeof I!="object"?null:(I=C&&I[C]||I["@@iterator"],typeof I=="function"?I:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,rt={};function J(I,X,nt){this.props=I,this.context=X,this.refs=rt,this.updater=nt||F}J.prototype.isReactComponent={},J.prototype.setState=function(I,X){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,X,"setState")},J.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function Tt(){}Tt.prototype=J.prototype;function ht(I,X,nt){this.props=I,this.context=X,this.refs=rt,this.updater=nt||F}var ct=ht.prototype=new Tt;ct.constructor=ht,Z(ct,J.prototype),ct.isPureReactComponent=!0;var Ct=Array.isArray,Et={H:null,A:null,T:null,S:null,V:null},Pt=Object.prototype.hasOwnProperty;function M(I,X,nt,W,ft,Rt){return nt=Rt.ref,{$$typeof:r,type:I,key:X,ref:nt!==void 0?nt:null,props:Rt}}function S(I,X){return M(I.type,X,void 0,void 0,void 0,I.props)}function w(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function O(I){var X={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(nt){return X[nt]})}var V=/\/+/g;function P(I,X){return typeof I=="object"&&I!==null&&I.key!=null?O(""+I.key):X.toString(36)}function R(){}function oe(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(R,R):(I.status="pending",I.then(function(X){I.status==="pending"&&(I.status="fulfilled",I.value=X)},function(X){I.status==="pending"&&(I.status="rejected",I.reason=X)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,X,nt,W,ft){var Rt=typeof I;(Rt==="undefined"||Rt==="boolean")&&(I=null);var _t=!1;if(I===null)_t=!0;else switch(Rt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(I.$$typeof){case r:case t:_t=!0;break;case A:return _t=I._init,te(_t(I._payload),X,nt,W,ft)}}if(_t)return ft=ft(I),_t=W===""?"."+P(I,0):W,Ct(ft)?(nt="",_t!=null&&(nt=_t.replace(V,"$&/")+"/"),te(ft,X,nt,"",function(An){return An})):ft!=null&&(w(ft)&&(ft=S(ft,nt+(ft.key==null||I&&I.key===ft.key?"":(""+ft.key).replace(V,"$&/")+"/")+_t)),X.push(ft)),1;_t=0;var ye=W===""?".":W+":";if(Ct(I))for(var Kt=0;Kt<I.length;Kt++)W=I[Kt],Rt=ye+P(W,Kt),_t+=te(W,X,nt,Rt,ft);else if(Kt=N(I),typeof Kt=="function")for(I=Kt.call(I),Kt=0;!(W=I.next()).done;)W=W.value,Rt=ye+P(W,Kt++),_t+=te(W,X,nt,Rt,ft);else if(Rt==="object"){if(typeof I.then=="function")return te(oe(I),X,nt,W,ft);throw X=String(I),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return _t}function H(I,X,nt){if(I==null)return I;var W=[],ft=0;return te(I,W,"","",function(Rt){return X.call(nt,Rt,ft++)}),W}function et(I){if(I._status===-1){var X=I._result;X=X(),X.then(function(nt){(I._status===0||I._status===-1)&&(I._status=1,I._result=nt)},function(nt){(I._status===0||I._status===-1)&&(I._status=2,I._result=nt)}),I._status===-1&&(I._status=0,I._result=X)}if(I._status===1)return I._result.default;throw I._result}var lt=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function xt(){}return bt.Children={map:H,forEach:function(I,X,nt){H(I,function(){X.apply(this,arguments)},nt)},count:function(I){var X=0;return H(I,function(){X++}),X},toArray:function(I){return H(I,function(X){return X})||[]},only:function(I){if(!w(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},bt.Component=J,bt.Fragment=i,bt.Profiler=l,bt.PureComponent=ht,bt.StrictMode=s,bt.Suspense=y,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Et,bt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return Et.H.useMemoCache(I)}},bt.cache=function(I){return function(){return I.apply(null,arguments)}},bt.cloneElement=function(I,X,nt){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var W=Z({},I.props),ft=I.key,Rt=void 0;if(X!=null)for(_t in X.ref!==void 0&&(Rt=void 0),X.key!==void 0&&(ft=""+X.key),X)!Pt.call(X,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&X.ref===void 0||(W[_t]=X[_t]);var _t=arguments.length-2;if(_t===1)W.children=nt;else if(1<_t){for(var ye=Array(_t),Kt=0;Kt<_t;Kt++)ye[Kt]=arguments[Kt+2];W.children=ye}return M(I.type,ft,void 0,void 0,Rt,W)},bt.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:h,_context:I},I},bt.createElement=function(I,X,nt){var W,ft={},Rt=null;if(X!=null)for(W in X.key!==void 0&&(Rt=""+X.key),X)Pt.call(X,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ft[W]=X[W]);var _t=arguments.length-2;if(_t===1)ft.children=nt;else if(1<_t){for(var ye=Array(_t),Kt=0;Kt<_t;Kt++)ye[Kt]=arguments[Kt+2];ft.children=ye}if(I&&I.defaultProps)for(W in _t=I.defaultProps,_t)ft[W]===void 0&&(ft[W]=_t[W]);return M(I,Rt,void 0,void 0,null,ft)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(I){return{$$typeof:g,render:I}},bt.isValidElement=w,bt.lazy=function(I){return{$$typeof:A,_payload:{_status:-1,_result:I},_init:et}},bt.memo=function(I,X){return{$$typeof:_,type:I,compare:X===void 0?null:X}},bt.startTransition=function(I){var X=Et.T,nt={};Et.T=nt;try{var W=I(),ft=Et.S;ft!==null&&ft(nt,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(xt,lt)}catch(Rt){lt(Rt)}finally{Et.T=X}},bt.unstable_useCacheRefresh=function(){return Et.H.useCacheRefresh()},bt.use=function(I){return Et.H.use(I)},bt.useActionState=function(I,X,nt){return Et.H.useActionState(I,X,nt)},bt.useCallback=function(I,X){return Et.H.useCallback(I,X)},bt.useContext=function(I){return Et.H.useContext(I)},bt.useDebugValue=function(){},bt.useDeferredValue=function(I,X){return Et.H.useDeferredValue(I,X)},bt.useEffect=function(I,X,nt){var W=Et.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(I,X)},bt.useId=function(){return Et.H.useId()},bt.useImperativeHandle=function(I,X,nt){return Et.H.useImperativeHandle(I,X,nt)},bt.useInsertionEffect=function(I,X){return Et.H.useInsertionEffect(I,X)},bt.useLayoutEffect=function(I,X){return Et.H.useLayoutEffect(I,X)},bt.useMemo=function(I,X){return Et.H.useMemo(I,X)},bt.useOptimistic=function(I,X){return Et.H.useOptimistic(I,X)},bt.useReducer=function(I,X,nt){return Et.H.useReducer(I,X,nt)},bt.useRef=function(I){return Et.H.useRef(I)},bt.useState=function(I){return Et.H.useState(I)},bt.useSyncExternalStore=function(I,X,nt){return Et.H.useSyncExternalStore(I,X,nt)},bt.useTransition=function(){return Et.H.useTransition()},bt.version="19.1.1",bt}var m_;function fm(){return m_||(m_=1,bd.exports=JA()),bd.exports}var ge=fm(),Rd={exports:{}},Tl={},wd={exports:{}},Id={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function WA(){return g_||(g_=1,function(r){function t(H,et){var lt=H.length;H.push(et);t:for(;0<lt;){var xt=lt-1>>>1,I=H[xt];if(0<l(I,et))H[xt]=et,H[lt]=I,lt=xt;else break t}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var et=H[0],lt=H.pop();if(lt!==et){H[0]=lt;t:for(var xt=0,I=H.length,X=I>>>1;xt<X;){var nt=2*(xt+1)-1,W=H[nt],ft=nt+1,Rt=H[ft];if(0>l(W,lt))ft<I&&0>l(Rt,W)?(H[xt]=Rt,H[ft]=lt,xt=ft):(H[xt]=W,H[nt]=lt,xt=nt);else if(ft<I&&0>l(Rt,lt))H[xt]=Rt,H[ft]=lt,xt=ft;else break t}}return et}function l(H,et){var lt=H.sortIndex-et.sortIndex;return lt!==0?lt:H.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],_=[],A=1,C=null,N=3,F=!1,Z=!1,rt=!1,J=!1,Tt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;function Ct(H){for(var et=i(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=H)s(_),et.sortIndex=et.expirationTime,t(y,et);else break;et=i(_)}}function Et(H){if(rt=!1,Ct(H),!Z)if(i(y)!==null)Z=!0,Pt||(Pt=!0,P());else{var et=i(_);et!==null&&te(Et,et.startTime-H)}}var Pt=!1,M=-1,S=5,w=-1;function O(){return J?!0:!(r.unstable_now()-w<S)}function V(){if(J=!1,Pt){var H=r.unstable_now();w=H;var et=!0;try{t:{Z=!1,rt&&(rt=!1,ht(M),M=-1),F=!0;var lt=N;try{e:{for(Ct(H),C=i(y);C!==null&&!(C.expirationTime>H&&O());){var xt=C.callback;if(typeof xt=="function"){C.callback=null,N=C.priorityLevel;var I=xt(C.expirationTime<=H);if(H=r.unstable_now(),typeof I=="function"){C.callback=I,Ct(H),et=!0;break e}C===i(y)&&s(y),Ct(H)}else s(y);C=i(y)}if(C!==null)et=!0;else{var X=i(_);X!==null&&te(Et,X.startTime-H),et=!1}}break t}finally{C=null,N=lt,F=!1}et=void 0}}finally{et?P():Pt=!1}}}var P;if(typeof ct=="function")P=function(){ct(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,oe=R.port2;R.port1.onmessage=V,P=function(){oe.postMessage(null)}}else P=function(){Tt(V,0)};function te(H,et){M=Tt(function(){H(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(H){switch(N){case 1:case 2:case 3:var et=3;break;default:et=N}var lt=N;N=et;try{return H()}finally{N=lt}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(H,et){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var lt=N;N=H;try{return et()}finally{N=lt}},r.unstable_scheduleCallback=function(H,et,lt){var xt=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?xt+lt:xt):lt=xt,H){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=lt+I,H={id:A++,callback:et,priorityLevel:H,startTime:lt,expirationTime:I,sortIndex:-1},lt>xt?(H.sortIndex=lt,t(_,H),i(y)===null&&H===i(_)&&(rt?(ht(M),M=-1):rt=!0,te(Et,lt-xt))):(H.sortIndex=I,t(y,H),Z||F||(Z=!0,Pt||(Pt=!0,P()))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var et=N;return function(){var lt=N;N=et;try{return H.apply(this,arguments)}finally{N=lt}}}}(Id)),Id}var p_;function tS(){return p_||(p_=1,wd.exports=WA()),wd.exports}var Cd={exports:{}},$e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function eS(){if(y_)return $e;y_=1;var r=fm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,_,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:y,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$e.createPortal=function(y,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return h(y,_,null,A)},$e.flushSync=function(y){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=_,s.p=A,s.d.f()}},$e.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},$e.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},$e.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var A=_.as,C=g(A,_.crossOrigin),N=typeof _.integrity=="string"?_.integrity:void 0,F=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:C,integrity:N,fetchPriority:F}):A==="script"&&s.d.X(y,{crossOrigin:C,integrity:N,fetchPriority:F,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$e.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},$e.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,C=g(A,_.crossOrigin);s.d.L(y,A,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$e.preloadModule=function(y,_){if(typeof y=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},$e.requestFormReset=function(y){s.d.r(y)},$e.unstable_batchedUpdates=function(y,_){return y(_)},$e.useFormState=function(y,_,A){return d.H.useFormState(y,_,A)},$e.useFormStatus=function(){return d.H.useHostTransitionStatus()},$e.version="19.1.1",$e}var __;function nS(){if(__)return Cd.exports;__=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Cd.exports=eS(),Cd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function iS(){if(v_)return Tl;v_=1;var r=tS(),t=fm(),i=nS();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(s(188))}function y(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return g(c),e;if(f===o)return g(c),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=c,o=f;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=f;break}if(E===o){v=!0,o=c,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=c;break}if(E===o){v=!0,o=f,a=c;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,C=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),ht=Symbol.for("react.consumer"),ct=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case J:return"Profiler";case rt:return"StrictMode";case Et:return"Suspense";case Pt:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case F:return"Portal";case ct:return(e.displayName||"Context")+".Provider";case ht:return(e._context.displayName||"Context")+".Consumer";case Ct:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}var te=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},xt=[],I=-1;function X(e){return{current:e}}function nt(e){0>I||(e.current=xt[I],xt[I]=null,I--)}function W(e,n){I++,xt[I]=e.current,e.current=n}var ft=X(null),Rt=X(null),_t=X(null),ye=X(null);function Kt(e,n){switch(W(_t,n),W(Rt,e),W(ft,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?zy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=zy(n),e=By(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(ft),W(ft,e)}function An(){nt(ft),nt(Rt),nt(_t)}function Jn(e){e.memoizedState!==null&&W(ye,e);var n=ft.current,a=By(n,e.type);n!==a&&(W(Rt,e),W(ft,a))}function Ln(e){Rt.current===e&&(nt(ft),nt(Rt)),ye.current===e&&(nt(ye),gl._currentValue=lt)}var it=Object.prototype.hasOwnProperty,ee=r.unstable_scheduleCallback,hn=r.unstable_cancelCallback,en=r.unstable_shouldYield,is=r.unstable_requestPaint,be=r.unstable_now,Sn=r.unstable_getCurrentPriorityLevel,or=r.unstable_ImmediatePriority,zn=r.unstable_UserBlockingPriority,Bn=r.unstable_NormalPriority,lr=r.unstable_LowPriority,Ke=r.unstable_IdlePriority,bi=r.log,Ri=r.unstable_setDisableYieldValue,re=null,jt=null;function fn(e){if(typeof bi=="function"&&Ri(e),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(re,e)}catch{}}var Ye=Math.clz32?Math.clz32:rs,Wl=Math.log,bh=Math.LN2;function rs(e){return e>>>=0,e===0?32:31-(Wl(e)/bh|0)|0}var ss=256,as=4194304;function jn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $s(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=jn(o):(v&=E,v!==0?c=jn(v):a||(a=E&~e,a!==0&&(c=jn(a))))):(E=o&~f,E!==0?c=jn(E):v!==0?c=jn(v):a||(a=o&~e,a!==0&&(c=jn(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function os(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function go(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function po(){var e=ss;return ss<<=1,(ss&4194048)===0&&(ss=256),e}function yo(){var e=as;return as<<=1,(as&62914560)===0&&(as=4194304),e}function wi(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ii(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _o(e,n,a,o,c,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-Ye(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var B=z[G];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Wn(e,o,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Wn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ye(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function vo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ye(a),c=1<<o;c&n|e[o]&n&&(e[o]|=n),a&=~c}}function ur(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cr(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:s_(e.type))}function tu(e,n){var a=et.p;try{return et.p=e,n()}finally{et.p=a}}var se=Math.random().toString(36).slice(2),Re="__reactFiber$"+se,_e="__reactProps$"+se,bn="__reactContainer$"+se,Eo="__reactEvents$"+se,Rh="__reactListeners$"+se,hr="__reactHandles$"+se,eu="__reactResources$"+se,ls="__reactMarker$"+se;function fr(e){delete e[Re],delete e[_e],delete e[Eo],delete e[Rh],delete e[hr]}function Ci(e){var n=e[Re];if(n)return n;for(var a=e.parentNode;a;){if(n=a[bn]||a[Re]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Gy(e);e!==null;){if(a=e[Re])return a;e=Gy(e)}return n}e=a,a=e.parentNode}return null}function ti(e){if(e=e[Re]||e[bn]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function ei(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function nn(e){var n=e[eu];return n||(n=e[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function fe(e){e[ls]=!0}var To=new Set,Js={};function qn(e,n){Di(e,n),Di(e+"Capture",n)}function Di(e,n){for(Js[e]=n,e=0;e<n.length;e++)To.add(n[e])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),iu={},us={};function ru(e){return it.call(us,e)?!0:it.call(iu,e)?!1:nu.test(e)?us[e]=!0:(iu[e]=!0,!1)}function dr(e,n,a){if(ru(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ni(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ze(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var cs,su;function Ni(e){if(cs===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);cs=n&&n[1]||"",su=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+e+su}var Ws=!1;function ta(e,n){if(!e||Ws)return"";Ws=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(c=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(o===b.length||c===L.length)for(o=b.length-1,c=L.length-1;1<=o&&0<=c&&b[o]!==L[c];)c--;for(;1<=o&&0<=c;o--,c--)if(b[o]!==L[c]){if(o!==1||c!==1)do if(o--,c--,0>c||b[o]!==L[c]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=c);break}}}finally{Ws=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ni(a):""}function Ao(e){switch(e.tag){case 26:case 27:case 5:return Ni(e.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Ni("Activity");default:return""}}function ea(e){try{var n="";do n+=Ao(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function So(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function wh(e){var n=So(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function na(e){e._valueTracker||(e._valueTracker=wh(e))}function bo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=So(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function hs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ih=/[\n"\\]/g;function ve(e){return e.replace(Ih,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function dn(e,n,a,o,c,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+rn(n)):e.value!==""+rn(n)&&(e.value=""+rn(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?mr(e,v,rn(n)):a!=null?mr(e,v,rn(a)):o!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+rn(E):e.removeAttribute("name")}function fs(e,n,a,o,c,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+rn(a):"",n=n!=null?""+rn(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function mr(e,n,a){n==="number"&&hs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Oi(e,n,a,o){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+rn(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Yt(e,n,a){if(n!=null&&(n=""+rn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+rn(a):""}function ds(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(te(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=rn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Rn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||ms.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ro(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&a[c]!==o&&au(e,c,o)}else for(var f in n)n.hasOwnProperty(f)&&au(e,f,n[f])}function wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return Dh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vi=null;function wn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,Pi=null;function Io(e){var n=ti(e);if(n&&(e=n.stateNode)){var a=e[_e]||null;t:switch(e=n.stateNode,n.type){case"input":if(dn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ve(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var c=o[_e]||null;if(!c)throw Error(s(90));dn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&bo(o)}break t;case"textarea":Yt(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Oi(e,!!a.multiple,n,!1)}}}var ii=!1;function ou(e,n,a){if(ii)return e(n,a);ii=!0;try{var o=e(n);return o}finally{if(ii=!1,(Mi!==null||Pi!==null)&&(tc(),Mi&&(n=Mi,e=Pi,Pi=Mi=null,Io(n),e)))for(n=0;n<e.length;n++)Io(e[n])}}function gs(e,n){var a=e.stateNode;if(a===null)return null;var o=a[_e]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(Hn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){In=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{In=!1}var ri=null,gr=null,xi=null;function Co(){if(xi)return xi;var e,n=gr,a=n.length,o,c="value"in ri?ri.value:ri.textContent,f=c.length;for(e=0;e<a&&n[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===c[f-o];o++);return xi=c.slice(e,1<o?1-o:void 0)}function si(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function Do(){return!1}function Me(e){function n(a,o,c,f,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ai:Do,this.isPropagationStopped=Do,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),n}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Me(Ht),ys=A({},Ht,{view:0,detail:0}),lu=Me(ys),sa,aa,oi,_s=A({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oi&&(oi&&e.type==="mousemove"?(sa=e.screenX-oi.screenX,aa=e.screenY-oi.screenY):aa=sa=0,oi=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Cn=Me(_s),uu=A({},_s,{dataTransfer:0}),Nh=Me(uu),vs=A({},ys,{relatedTarget:0}),oa=Me(vs),No=A({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),la=Me(No),cu=A({},Ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=Me(cu),Oh=A({},Ht,{data:0}),Oo=Me(Oh),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vo(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=fu[e])?!!n[e]:!1}function Ts(){return Vo}var du=A({},ys,{key:function(e){if(e.key){var n=Es[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ca=Me(du),mu=A({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Me(mu),ki=A({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),gu=Me(ki),pu=A({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=Me(pu),_u=A({},_s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=Me(_u),sn=A({},Ht,{newState:0,oldState:0}),vu=Me(sn),Eu=[9,13,27,32],li=Hn&&"CompositionEvent"in window,u=null;Hn&&"documentMode"in document&&(u=document.documentMode);var m=Hn&&"TextEvent"in window&&!u,p=Hn&&(!li||u&&8<u&&11>=u),T=" ",k=!1;function j(e,n){switch(e){case"keyup":return Eu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function we(e,n){switch(e){case"compositionend":return tt(n);case"keypress":return n.which!==32?null:(k=!0,T);case"textInput":return e=n.data,e===T&&k?null:e;default:return null}}function Ut(e,n){if(kt)return e==="compositionend"||!li&&j(e,n)?(e=Co(),xi=gr=ri=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ie(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Pe[e.type]:n==="textarea"}function Ui(e,n,a,o){Mi?Pi?Pi.push(o):Pi=[o]:Mi=o,n=ac(n,"onChange"),0<n.length&&(a=new ra("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Be=null,ui=null;function Po(e){Py(e,0)}function Tu(e){var n=ei(e);if(bo(n))return e}function eg(e,n){if(e==="change")return n}var ng=!1;if(Hn){var Vh;if(Hn){var Mh="oninput"in document;if(!Mh){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),Mh=typeof ig.oninput=="function"}Vh=Mh}else Vh=!1;ng=Vh&&(!document.documentMode||9<document.documentMode)}function rg(){Be&&(Be.detachEvent("onpropertychange",sg),ui=Be=null)}function sg(e){if(e.propertyName==="value"&&Tu(ui)){var n=[];Ui(n,ui,e,wn(e)),ou(Po,n)}}function w0(e,n,a){e==="focusin"?(rg(),Be=n,ui=a,Be.attachEvent("onpropertychange",sg)):e==="focusout"&&rg()}function I0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tu(ui)}function C0(e,n){if(e==="click")return Tu(n)}function D0(e,n){if(e==="input"||e==="change")return Tu(n)}function N0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var mn=typeof Object.is=="function"?Object.is:N0;function xo(e,n){if(mn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!it.call(n,c)||!mn(e[c],n[c]))return!1}return!0}function ag(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function og(e,n){var a=ag(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ag(a)}}function lg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?lg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ug(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=hs(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=hs(e.document)}return n}function Ph(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var O0=Hn&&"documentMode"in document&&11>=document.documentMode,fa=null,xh=null,ko=null,kh=!1;function cg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kh||fa==null||fa!==hs(o)||(o=fa,"selectionStart"in o&&Ph(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&xo(ko,o)||(ko=o,o=ac(xh,"onSelect"),0<o.length&&(n=new ra("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=fa)))}function As(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var da={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Uh={},hg={};Hn&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Ss(e){if(Uh[e])return Uh[e];if(!da[e])return e;var n=da[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in hg)return Uh[e]=n[a];return e}var fg=Ss("animationend"),dg=Ss("animationiteration"),mg=Ss("animationstart"),V0=Ss("transitionrun"),M0=Ss("transitionstart"),P0=Ss("transitioncancel"),gg=Ss("transitionend"),pg=new Map,Lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lh.push("scrollEnd");function Gn(e,n){pg.set(e,n),qn(n,[e])}var yg=new WeakMap;function Dn(e,n){if(typeof e=="object"&&e!==null){var a=yg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ea(n)},yg.set(e,n),n)}return{value:e,source:n,stack:ea(n)}}var Nn=[],ma=0,zh=0;function Au(){for(var e=ma,n=zh=ma=0;n<e;){var a=Nn[n];Nn[n++]=null;var o=Nn[n];Nn[n++]=null;var c=Nn[n];Nn[n++]=null;var f=Nn[n];if(Nn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}f!==0&&_g(a,c,f)}}function Su(e,n,a,o){Nn[ma++]=e,Nn[ma++]=n,Nn[ma++]=a,Nn[ma++]=o,zh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Bh(e,n,a,o){return Su(e,n,a,o),bu(e)}function ga(e,n){return Su(e,null,null,n),bu(e)}function _g(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-Ye(a),e=f.hiddenUpdates,o=e[c],o===null?e[c]=[n]:o.push(n),n.lane=a|536870912),f):null}function bu(e){if(50<ol)throw ol=0,Kf=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var pa={};function x0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,n,a,o){return new x0(e,n,a,o)}function jh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,n){var a=e.alternate;return a===null?(a=gn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function vg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ru(e,n,a,o,c,f){var v=0;if(o=e,typeof e=="function")jh(e)&&(v=1);else if(typeof e=="string")v=UA(e,a,ft.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=gn(31,a,n,c),e.elementType=w,e.lanes=f,e;case Z:return bs(a.children,c,f,n);case rt:v=8,c|=24;break;case J:return e=gn(12,a,n,c|2),e.elementType=J,e.lanes=f,e;case Et:return e=gn(13,a,n,c),e.elementType=Et,e.lanes=f,e;case Pt:return e=gn(19,a,n,c),e.elementType=Pt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case ct:v=10;break t;case ht:v=9;break t;case Ct:v=11;break t;case M:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=gn(v,a,n,c),n.elementType=e,n.type=o,n.lanes=f,n}function bs(e,n,a,o){return e=gn(7,e,o,n),e.lanes=a,e}function qh(e,n,a){return e=gn(6,e,null,n),e.lanes=a,e}function Hh(e,n,a){return n=gn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var ya=[],_a=0,wu=null,Iu=0,On=[],Vn=0,Rs=null,zi=1,Bi="";function ws(e,n){ya[_a++]=Iu,ya[_a++]=wu,wu=e,Iu=n}function Eg(e,n,a){On[Vn++]=zi,On[Vn++]=Bi,On[Vn++]=Rs,Rs=e;var o=zi;e=Bi;var c=32-Ye(o)-1;o&=~(1<<c),a+=1;var f=32-Ye(n)+c;if(30<f){var v=c-c%5;f=(o&(1<<v)-1).toString(32),o>>=v,c-=v,zi=1<<32-Ye(n)+c|a<<c|o,Bi=f+e}else zi=1<<f|a<<c|o,Bi=e}function Gh(e){e.return!==null&&(ws(e,1),Eg(e,1,0))}function Fh(e){for(;e===wu;)wu=ya[--_a],ya[_a]=null,Iu=ya[--_a],ya[_a]=null;for(;e===Rs;)Rs=On[--Vn],On[Vn]=null,Bi=On[--Vn],On[Vn]=null,zi=On[--Vn],On[Vn]=null}var an=null,ce=null,qt=!1,Is=null,ci=!1,Qh=Error(s(519));function Cs(e){var n=Error(s(418,""));throw zo(Dn(n,e)),Qh}function Tg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Re]=e,n[_e]=o,a){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(a=0;a<ul.length;a++)Nt(ul[a],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Nt("invalid",n),fs(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),na(n);break;case"select":Nt("invalid",n);break;case"textarea":Nt("invalid",n),ds(n,o.value,o.defaultValue,o.children),na(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Ly(n.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",n),Nt("toggle",n)),o.onScroll!=null&&Nt("scroll",n),o.onScrollEnd!=null&&Nt("scrollend",n),o.onClick!=null&&(n.onclick=oc),n=!0):n=!1,n||Cs(e)}function Ag(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:an=an.return}}function Uo(e){if(e!==an)return!1;if(!qt)return Ag(e),qt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ud(e.type,e.memoizedProps)),a=!a),a&&ce&&Cs(e),Ag(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){ce=Qn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}ce=null}}else n===27?(n=ce,Or(e.type)?(e=dd,dd=null,ce=e):ce=n):ce=an?Qn(e.stateNode.nextSibling):null;return!0}function Lo(){ce=an=null,qt=!1}function Sg(){var e=Is;return e!==null&&(un===null?un=e:un.push.apply(un,e),Is=null),e}function zo(e){Is===null?Is=[e]:Is.push(e)}var Kh=X(null),Ds=null,ji=null;function pr(e,n,a){W(Kh,n._currentValue),n._currentValue=a}function qi(e){e._currentValue=Kh.current,nt(Kh)}function Yh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Xh(e,n,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var b=0;b<n.length;b++)if(E.context===n[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Yh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Yh(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Bo(e,n,a,o){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=c.type;mn(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===ye.current){if(v=c.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(gl):e=[gl])}c=c.return}e!==null&&Xh(n,e,a,o),n.flags|=262144}function Cu(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){Ds=e,ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xe(e){return bg(Ds,e)}function Du(e,n){return Ds===null&&Ns(e),bg(e,n)}function bg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ji===null){if(e===null)throw Error(s(308));ji=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ji=ji.next=n;return a}var k0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},U0=r.unstable_scheduleCallback,L0=r.unstable_NormalPriority,Ce={$$typeof:ct,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $h(){return{controller:new k0,data:new Map,refCount:0}}function jo(e){e.refCount--,e.refCount===0&&U0(L0,function(){e.controller.abort()})}var qo=null,Zh=0,va=0,Ea=null;function z0(e,n){if(qo===null){var a=qo=[];Zh=0,va=td(),Ea={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Zh++,n.then(Rg,Rg),n}function Rg(){if(--Zh===0&&qo!==null){Ea!==null&&(Ea.status="fulfilled");var e=qo;qo=null,va=0,Ea=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function B0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var wg=H.S;H.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&z0(e,n),wg!==null&&wg(e,n)};var Os=X(null);function Jh(){var e=Os.current;return e!==null?e:Wt.pooledCache}function Nu(e,n){n===null?W(Os,Os.current):W(Os,n.pool)}function Ig(){var e=Jh();return e===null?null:{parent:Ce._currentValue,pool:e}}var Ho=Error(s(460)),Cg=Error(s(474)),Ou=Error(s(542)),Wh={then:function(){}};function Dg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vu(){}function Ng(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Vu,Vu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vg(e),e;default:if(typeof n.status=="string")n.then(Vu,Vu);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Vg(e),e}throw Go=n,Ho}}var Go=null;function Og(){if(Go===null)throw Error(s(459));var e=Go;return Go=null,e}function Vg(e){if(e===Ho||e===Ou)throw Error(s(483))}var yr=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ft&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=bu(e),_g(e,null,a),n}return Su(e,o,n,a),bu(e)}function Fo(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,vo(e,a)}}function nf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var rf=!1;function Qo(){if(rf){var e=Ea;if(e!==null)throw e}}function Ko(e,n,a,o){rf=!1;var c=e.updateQueue;yr=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=c.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Lt&z)===z:(o&z)===z){z!==0&&z===va&&(rf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var vt=e,mt=E;z=n;var Zt=a;switch(mt.tag){case 1:if(vt=mt.payload,typeof vt=="function"){K=vt.call(Zt,K,z);break t}K=vt;break t;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=mt.payload,z=typeof vt=="function"?vt.call(Zt,K,z):vt,z==null)break t;K=A({},K,z);break t;case 2:yr=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=c.callbacks,B===null?c.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=B,b=K):G=G.next=B,v|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;B=E,E=B.next,B.next=null,c.lastBaseUpdate=B,c.shared.pending=null}}while(!0);G===null&&(b=K),c.baseState=b,c.firstBaseUpdate=L,c.lastBaseUpdate=G,f===null&&(c.shared.lanes=0),Ir|=v,e.lanes=v,e.memoizedState=K}}function Mg(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Pg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Mg(a[e],n)}var Ta=X(null),Mu=X(0);function xg(e,n){e=Xi,W(Mu,e),W(Ta,n),Xi=e|n.baseLanes}function sf(){W(Mu,Xi),W(Ta,Ta.current)}function af(){Xi=Mu.current,nt(Ta),nt(Mu)}var Er=0,wt=null,Xt=null,Ee=null,Pu=!1,Aa=!1,Vs=!1,xu=0,Yo=0,Sa=null,j0=0;function de(){throw Error(s(321))}function of(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!mn(e[a],n[a]))return!1;return!0}function lf(e,n,a,o,c,f){return Er=f,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?_p:vp,Vs=!1,f=a(o,c),Vs=!1,Aa&&(f=Ug(n,a,o,c)),kg(e),f}function kg(e){H.H=ju;var n=Xt!==null&&Xt.next!==null;if(Er=0,Ee=Xt=wt=null,Pu=!1,Yo=0,Sa=null,n)throw Error(s(300));e===null||xe||(e=e.dependencies,e!==null&&Cu(e)&&(xe=!0))}function Ug(e,n,a,o){wt=e;var c=0;do{if(Aa&&(Sa=null),Yo=0,Aa=!1,25<=c)throw Error(s(301));if(c+=1,Ee=Xt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=Y0,f=n(a,o)}while(Aa);return f}function q0(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Xo(n):n,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(wt.flags|=1024),n}function uf(){var e=xu!==0;return xu=0,e}function cf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function hf(e){if(Pu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Pu=!1}Er=0,Ee=Xt=wt=null,Aa=!1,Yo=xu=0,Sa=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?wt.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function Te(){if(Xt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var n=Ee===null?wt.memoizedState:Ee.next;if(n!==null)Ee=n,Xt=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Ee===null?wt.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(e){var n=Yo;return Yo+=1,Sa===null&&(Sa=[]),e=Ng(Sa,e,n),n=wt,(Ee===null?n.memoizedState:Ee.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?_p:vp),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Xo(e);if(e.$$typeof===ct)return Xe(e)}throw Error(s(438,String(e)))}function df(e){var n=null,a=wt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ff(),wt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=O;return n.index++,a}function Hi(e,n){return typeof n=="function"?n(e):n}function Uu(e){var n=Te();return mf(n,Xt,e)}function mf(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var c=e.baseQueue,f=o.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}n.baseQueue=c=f,o.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var E=v=null,b=null,L=n,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(Lt&K)===K:(Er&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===va&&(G=!0);else if((Er&z)===z){L=L.next,z===va&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,wt.lanes|=z,Ir|=z;K=L.action,Vs&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,wt.lanes|=K,Ir|=K;L=L.next}while(L!==null&&L!==n);if(b===null?v=f:b.next=E,!mn(f,e.memoizedState)&&(xe=!0,G&&(a=Ea,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function gf(e){var n=Te(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);mn(f,n.memoizedState)||(xe=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function Lg(e,n,a){var o=wt,c=Te(),f=qt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!mn((Xt||c).memoizedState,a);v&&(c.memoizedState=a,xe=!0),c=c.queue;var E=jg.bind(null,o,c,e);if($o(2048,8,E,[e]),c.getSnapshot!==n||v||Ee!==null&&Ee.memoizedState.tag&1){if(o.flags|=2048,ba(9,Lu(),Bg.bind(null,o,c,a,n),null),Wt===null)throw Error(s(349));f||(Er&124)!==0||zg(o,n,a)}return a}function zg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=wt.updateQueue,n===null?(n=ff(),wt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Bg(e,n,a,o){n.value=a,n.getSnapshot=o,qg(n)&&Hg(e)}function jg(e,n,a){return a(function(){qg(n)&&Hg(e)})}function qg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!mn(e,a)}catch{return!0}}function Hg(e){var n=ga(e,2);n!==null&&En(n,e,2)}function pf(e){var n=on();if(typeof e=="function"){var a=e;if(e=a(),Vs){fn(!0);try{a()}finally{fn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},n}function Gg(e,n,a,o){return e.baseState=a,mf(e,Xt,typeof o=="function"?o:Hi)}function H0(e,n,a,o,c){if(Bu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Fg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Fg(e,n){var a=n.action,o=n.payload,c=e.state;if(n.isTransition){var f=H.T,v={};H.T=v;try{var E=a(c,o),b=H.S;b!==null&&b(v,E),Qg(e,n,E)}catch(L){yf(e,n,L)}finally{H.T=f}}else try{f=a(c,o),Qg(e,n,f)}catch(L){yf(e,n,L)}}function Qg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Kg(e,n,o)},function(o){return yf(e,n,o)}):Kg(e,n,a)}function Kg(e,n,a){n.status="fulfilled",n.value=a,Yg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Fg(e,a)))}function yf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Yg(n),n=n.next;while(n!==o)}e.action=null}function Yg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Xg(e,n){return n}function $g(e,n){if(qt){var a=Wt.formState;if(a!==null){t:{var o=wt;if(qt){if(ce){e:{for(var c=ce,f=ci;c.nodeType!==8;){if(!f){c=null;break e}if(c=Qn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){ce=Qn(c.nextSibling),o=c.data==="F!";break t}}Cs(o)}o=!1}o&&(n=a[0])}}return a=on(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xg,lastRenderedState:n},a.queue=o,a=gp.bind(null,wt,o),o.dispatch=a,o=pf(!1),f=Af.bind(null,wt,!1,o.queue),o=on(),c={state:n,dispatch:null,action:e,pending:null},o.queue=c,a=H0.bind(null,wt,c,f,a),c.dispatch=a,o.memoizedState=e,[n,a,!1]}function Zg(e){var n=Te();return Jg(n,Xt,e)}function Jg(e,n,a){if(n=mf(e,n,Xg)[0],e=Uu(Hi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Xo(n)}catch(v){throw v===Ho?Ou:v}else o=n;n=Te();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(wt.flags|=2048,ba(9,Lu(),G0.bind(null,c,a),null)),[o,f,e]}function G0(e,n){e.action=n}function Wg(e){var n=Te(),a=Xt;if(a!==null)return Jg(n,a,e);Te(),n=n.memoizedState,a=Te();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function ba(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=wt.updateQueue,n===null&&(n=ff(),wt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Lu(){return{destroy:void 0,resource:void 0}}function tp(){return Te().memoizedState}function zu(e,n,a,o){var c=on();o=o===void 0?null:o,wt.flags|=e,c.memoizedState=ba(1|n,Lu(),a,o)}function $o(e,n,a,o){var c=Te();o=o===void 0?null:o;var f=c.memoizedState.inst;Xt!==null&&o!==null&&of(o,Xt.memoizedState.deps)?c.memoizedState=ba(n,f,a,o):(wt.flags|=e,c.memoizedState=ba(1|n,f,a,o))}function ep(e,n){zu(8390656,8,e,n)}function np(e,n){$o(2048,8,e,n)}function ip(e,n){return $o(4,2,e,n)}function rp(e,n){return $o(4,4,e,n)}function sp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ap(e,n,a){a=a!=null?a.concat([e]):null,$o(4,4,sp.bind(null,n,e),a)}function _f(){}function op(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&of(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function lp(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&of(n,o[1]))return o[0];if(o=e(),Vs){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,n],o}function vf(e,n,a){return a===void 0||(Er&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=hy(),wt.lanes|=e,Ir|=e,a)}function up(e,n,a,o){return mn(a,n)?a:Ta.current!==null?(e=vf(e,a,o),mn(e,n)||(xe=!0),e):(Er&42)===0?(xe=!0,e.memoizedState=a):(e=hy(),wt.lanes|=e,Ir|=e,n)}function cp(e,n,a,o,c){var f=et.p;et.p=f!==0&&8>f?f:8;var v=H.T,E={};H.T=E,Af(e,!1,n,a);try{var b=c(),L=H.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=B0(b,o);Zo(e,n,G,vn(e))}else Zo(e,n,o,vn(e))}catch(K){Zo(e,n,{then:function(){},status:"rejected",reason:K},vn())}finally{et.p=f,H.T=v}}function F0(){}function Ef(e,n,a,o){if(e.tag!==5)throw Error(s(476));var c=hp(e).queue;cp(e,c,n,lt,a===null?F0:function(){return fp(e),a(o)})}function hp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:lt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function fp(e){var n=hp(e).next.queue;Zo(e,n,{},vn())}function Tf(){return Xe(gl)}function dp(){return Te().memoizedState}function mp(){return Te().memoizedState}function Q0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=vn();e=_r(a);var o=vr(n,e,a);o!==null&&(En(o,n,a),Fo(o,n,a)),n={cache:$h()},e.payload=n;return}n=n.return}}function K0(e,n,a){var o=vn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(e)?pp(n,a):(a=Bh(e,n,a,o),a!==null&&(En(a,e,o),yp(a,n,o)))}function gp(e,n,a){var o=vn();Zo(e,n,a,o)}function Zo(e,n,a,o){var c={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(e))pp(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(c.hasEagerState=!0,c.eagerState=E,mn(E,v))return Su(e,n,c,0),Wt===null&&Au(),!1}catch{}finally{}if(a=Bh(e,n,c,o),a!==null)return En(a,e,o),yp(a,n,o),!0}return!1}function Af(e,n,a,o){if(o={lane:2,revertLane:td(),action:o,hasEagerState:!1,eagerState:null,next:null},Bu(e)){if(n)throw Error(s(479))}else n=Bh(e,a,o,2),n!==null&&En(n,e,2)}function Bu(e){var n=e.alternate;return e===wt||n!==null&&n===wt}function pp(e,n){Aa=Pu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function yp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,vo(e,a)}}var ju={readContext:Xe,use:ku,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de},_p={readContext:Xe,use:ku,useCallback:function(e,n){return on().memoizedState=[e,n===void 0?null:n],e},useContext:Xe,useEffect:ep,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,zu(4194308,4,sp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return zu(4194308,4,e,n)},useInsertionEffect:function(e,n){zu(4,2,e,n)},useMemo:function(e,n){var a=on();n=n===void 0?null:n;var o=e();if(Vs){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=on();if(a!==void 0){var c=a(n);if(Vs){fn(!0);try{a(n)}finally{fn(!1)}}}else c=n;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=K0.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var n=on();return e={current:e},n.memoizedState=e},useState:function(e){e=pf(e);var n=e.queue,a=gp.bind(null,wt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:_f,useDeferredValue:function(e,n){var a=on();return vf(a,e,n)},useTransition:function(){var e=pf(!1);return e=cp.bind(null,wt,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=wt,c=on();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Wt===null)throw Error(s(349));(Lt&124)!==0||zg(o,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,ep(jg.bind(null,o,f,e),[e]),o.flags|=2048,ba(9,Lu(),Bg.bind(null,o,f,a,n),null),a},useId:function(){var e=on(),n=Wt.identifierPrefix;if(qt){var a=Bi,o=zi;a=(o&~(1<<32-Ye(o)-1)).toString(32)+a,n=""+n+"R"+a,a=xu++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=j0++,n=""+n+"r"+a.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:Tf,useFormState:$g,useActionState:$g,useOptimistic:function(e){var n=on();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Af.bind(null,wt,!0,a),a.dispatch=n,[e,n]},useMemoCache:df,useCacheRefresh:function(){return on().memoizedState=Q0.bind(null,wt)}},vp={readContext:Xe,use:ku,useCallback:op,useContext:Xe,useEffect:np,useImperativeHandle:ap,useInsertionEffect:ip,useLayoutEffect:rp,useMemo:lp,useReducer:Uu,useRef:tp,useState:function(){return Uu(Hi)},useDebugValue:_f,useDeferredValue:function(e,n){var a=Te();return up(a,Xt.memoizedState,e,n)},useTransition:function(){var e=Uu(Hi)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:Xo(e),n]},useSyncExternalStore:Lg,useId:dp,useHostTransitionStatus:Tf,useFormState:Zg,useActionState:Zg,useOptimistic:function(e,n){var a=Te();return Gg(a,Xt,e,n)},useMemoCache:df,useCacheRefresh:mp},Y0={readContext:Xe,use:ku,useCallback:op,useContext:Xe,useEffect:np,useImperativeHandle:ap,useInsertionEffect:ip,useLayoutEffect:rp,useMemo:lp,useReducer:gf,useRef:tp,useState:function(){return gf(Hi)},useDebugValue:_f,useDeferredValue:function(e,n){var a=Te();return Xt===null?vf(a,e,n):up(a,Xt.memoizedState,e,n)},useTransition:function(){var e=gf(Hi)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:Xo(e),n]},useSyncExternalStore:Lg,useId:dp,useHostTransitionStatus:Tf,useFormState:Wg,useActionState:Wg,useOptimistic:function(e,n){var a=Te();return Xt!==null?Gg(a,Xt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:mp},Ra=null,Jo=0;function qu(e){var n=Jo;return Jo+=1,Ra===null&&(Ra=[]),Ng(Ra,e,n)}function Wo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Hu(e,n){throw n.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Ep(e){var n=e._init;return n(e._payload)}function Tp(e){function n(x,D){if(e){var U=x.deletions;U===null?(x.deletions=[D],x.flags|=16):U.push(D)}}function a(x,D){if(!e)return null;for(;D!==null;)n(x,D),D=D.sibling;return null}function o(x){for(var D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function c(x,D){return x=Li(x,D),x.index=0,x.sibling=null,x}function f(x,D,U){return x.index=U,e?(U=x.alternate,U!==null?(U=U.index,U<D?(x.flags|=67108866,D):U):(x.flags|=67108866,D)):(x.flags|=1048576,D)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,D,U,Q){return D===null||D.tag!==6?(D=qh(U,x.mode,Q),D.return=x,D):(D=c(D,U),D.return=x,D)}function b(x,D,U,Q){var at=U.type;return at===Z?G(x,D,U.props.children,Q,U.key):D!==null&&(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&Ep(at)===D.type)?(D=c(D,U.props),Wo(D,U),D.return=x,D):(D=Ru(U.type,U.key,U.props,null,x.mode,Q),Wo(D,U),D.return=x,D)}function L(x,D,U,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Hh(U,x.mode,Q),D.return=x,D):(D=c(D,U.children||[]),D.return=x,D)}function G(x,D,U,Q,at){return D===null||D.tag!==7?(D=bs(U,x.mode,Q,at),D.return=x,D):(D=c(D,U),D.return=x,D)}function K(x,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=qh(""+D,x.mode,U),D.return=x,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return U=Ru(D.type,D.key,D.props,null,x.mode,U),Wo(U,D),U.return=x,U;case F:return D=Hh(D,x.mode,U),D.return=x,D;case S:var Q=D._init;return D=Q(D._payload),K(x,D,U)}if(te(D)||P(D))return D=bs(D,x.mode,U,null),D.return=x,D;if(typeof D.then=="function")return K(x,qu(D),U);if(D.$$typeof===ct)return K(x,Du(x,D),U);Hu(x,D)}return null}function z(x,D,U,Q){var at=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return at!==null?null:E(x,D,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return U.key===at?b(x,D,U,Q):null;case F:return U.key===at?L(x,D,U,Q):null;case S:return at=U._init,U=at(U._payload),z(x,D,U,Q)}if(te(U)||P(U))return at!==null?null:G(x,D,U,Q,null);if(typeof U.then=="function")return z(x,D,qu(U),Q);if(U.$$typeof===ct)return z(x,D,Du(x,U),Q);Hu(x,U)}return null}function B(x,D,U,Q,at){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return x=x.get(U)||null,E(D,x,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return x=x.get(Q.key===null?U:Q.key)||null,b(D,x,Q,at);case F:return x=x.get(Q.key===null?U:Q.key)||null,L(D,x,Q,at);case S:var It=Q._init;return Q=It(Q._payload),B(x,D,U,Q,at)}if(te(Q)||P(Q))return x=x.get(U)||null,G(D,x,Q,at,null);if(typeof Q.then=="function")return B(x,D,U,qu(Q),at);if(Q.$$typeof===ct)return B(x,D,U,Du(D,Q),at);Hu(D,Q)}return null}function vt(x,D,U,Q){for(var at=null,It=null,ut=D,gt=D=0,Ue=null;ut!==null&&gt<U.length;gt++){ut.index>gt?(Ue=ut,ut=null):Ue=ut.sibling;var Bt=z(x,ut,U[gt],Q);if(Bt===null){ut===null&&(ut=Ue);break}e&&ut&&Bt.alternate===null&&n(x,ut),D=f(Bt,D,gt),It===null?at=Bt:It.sibling=Bt,It=Bt,ut=Ue}if(gt===U.length)return a(x,ut),qt&&ws(x,gt),at;if(ut===null){for(;gt<U.length;gt++)ut=K(x,U[gt],Q),ut!==null&&(D=f(ut,D,gt),It===null?at=ut:It.sibling=ut,It=ut);return qt&&ws(x,gt),at}for(ut=o(ut);gt<U.length;gt++)Ue=B(ut,x,gt,U[gt],Q),Ue!==null&&(e&&Ue.alternate!==null&&ut.delete(Ue.key===null?gt:Ue.key),D=f(Ue,D,gt),It===null?at=Ue:It.sibling=Ue,It=Ue);return e&&ut.forEach(function(kr){return n(x,kr)}),qt&&ws(x,gt),at}function mt(x,D,U,Q){if(U==null)throw Error(s(151));for(var at=null,It=null,ut=D,gt=D=0,Ue=null,Bt=U.next();ut!==null&&!Bt.done;gt++,Bt=U.next()){ut.index>gt?(Ue=ut,ut=null):Ue=ut.sibling;var kr=z(x,ut,Bt.value,Q);if(kr===null){ut===null&&(ut=Ue);break}e&&ut&&kr.alternate===null&&n(x,ut),D=f(kr,D,gt),It===null?at=kr:It.sibling=kr,It=kr,ut=Ue}if(Bt.done)return a(x,ut),qt&&ws(x,gt),at;if(ut===null){for(;!Bt.done;gt++,Bt=U.next())Bt=K(x,Bt.value,Q),Bt!==null&&(D=f(Bt,D,gt),It===null?at=Bt:It.sibling=Bt,It=Bt);return qt&&ws(x,gt),at}for(ut=o(ut);!Bt.done;gt++,Bt=U.next())Bt=B(ut,x,gt,Bt.value,Q),Bt!==null&&(e&&Bt.alternate!==null&&ut.delete(Bt.key===null?gt:Bt.key),D=f(Bt,D,gt),It===null?at=Bt:It.sibling=Bt,It=Bt);return e&&ut.forEach(function(XA){return n(x,XA)}),qt&&ws(x,gt),at}function Zt(x,D,U,Q){if(typeof U=="object"&&U!==null&&U.type===Z&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case N:t:{for(var at=U.key;D!==null;){if(D.key===at){if(at=U.type,at===Z){if(D.tag===7){a(x,D.sibling),Q=c(D,U.props.children),Q.return=x,x=Q;break t}}else if(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===S&&Ep(at)===D.type){a(x,D.sibling),Q=c(D,U.props),Wo(Q,U),Q.return=x,x=Q;break t}a(x,D);break}else n(x,D);D=D.sibling}U.type===Z?(Q=bs(U.props.children,x.mode,Q,U.key),Q.return=x,x=Q):(Q=Ru(U.type,U.key,U.props,null,x.mode,Q),Wo(Q,U),Q.return=x,x=Q)}return v(x);case F:t:{for(at=U.key;D!==null;){if(D.key===at)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(x,D.sibling),Q=c(D,U.children||[]),Q.return=x,x=Q;break t}else{a(x,D);break}else n(x,D);D=D.sibling}Q=Hh(U,x.mode,Q),Q.return=x,x=Q}return v(x);case S:return at=U._init,U=at(U._payload),Zt(x,D,U,Q)}if(te(U))return vt(x,D,U,Q);if(P(U)){if(at=P(U),typeof at!="function")throw Error(s(150));return U=at.call(U),mt(x,D,U,Q)}if(typeof U.then=="function")return Zt(x,D,qu(U),Q);if(U.$$typeof===ct)return Zt(x,D,Du(x,U),Q);Hu(x,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(x,D.sibling),Q=c(D,U),Q.return=x,x=Q):(a(x,D),Q=qh(U,x.mode,Q),Q.return=x,x=Q),v(x)):a(x,D)}return function(x,D,U,Q){try{Jo=0;var at=Zt(x,D,U,Q);return Ra=null,at}catch(ut){if(ut===Ho||ut===Ou)throw ut;var It=gn(29,ut,null,x.mode);return It.lanes=Q,It.return=x,It}finally{}}}var wa=Tp(!0),Ap=Tp(!1),Mn=X(null),hi=null;function Tr(e){var n=e.alternate;W(De,De.current&1),W(Mn,e),hi===null&&(n===null||Ta.current!==null||n.memoizedState!==null)&&(hi=e)}function Sp(e){if(e.tag===22){if(W(De,De.current),W(Mn,e),hi===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(hi=e)}}else Ar()}function Ar(){W(De,De.current),W(Mn,Mn.current)}function Gi(e){nt(Mn),hi===e&&(hi=null),nt(De)}var De=X(0);function Gu(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||fd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Sf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var bf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=vn(),c=_r(o);c.payload=n,a!=null&&(c.callback=a),n=vr(e,c,o),n!==null&&(En(n,e,o),Fo(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=vn(),c=_r(o);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=vr(e,c,o),n!==null&&(En(n,e,o),Fo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=vn(),o=_r(a);o.tag=2,n!=null&&(o.callback=n),n=vr(e,o,a),n!==null&&(En(n,e,a),Fo(n,e,a))}};function bp(e,n,a,o,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!xo(a,o)||!xo(c,f):!0}function Rp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&bf.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=A({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Fu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function wp(e){Fu(e)}function Ip(e){console.error(e)}function Cp(e){Fu(e)}function Qu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Dp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Rf(e,n,a){return a=_r(a),a.tag=3,a.payload={element:null},a.callback=function(){Qu(e,n)},a}function Np(e){return e=_r(e),e.tag=3,e}function Op(e,n,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;e.payload=function(){return c(f)},e.callback=function(){Dp(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Dp(n,a,o),typeof c!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function X0(e,n,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Bo(n,a,c,!0),a=Mn.current,a!==null){switch(a.tag){case 13:return hi===null?Xf():a.alternate===null&&he===0&&(he=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===Wh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Zf(e,o,c)),!1;case 22:return a.flags|=65536,o===Wh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Zf(e,o,c)),!1}throw Error(s(435,a.tag))}return Zf(e,o,c),Xf(),!1}if(qt)return n=Mn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==Qh&&(e=Error(s(422),{cause:o}),zo(Dn(e,a)))):(o!==Qh&&(n=Error(s(423),{cause:o}),zo(Dn(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=Dn(o,a),c=Rf(e.stateNode,o,c),nf(e,c),he!==4&&(he=2)),!1;var f=Error(s(520),{cause:o});if(f=Dn(f,a),al===null?al=[f]:al.push(f),he!==4&&(he=2),n===null)return!0;o=Dn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Rf(a.stateNode,o,e),nf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Cr===null||!Cr.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Np(c),Op(c,e,a,o),nf(a,c),!1}a=a.return}while(a!==null);return!1}var Vp=Error(s(461)),xe=!1;function je(e,n,a,o){n.child=e===null?Ap(n,null,a,o):wa(n,e.child,a,o)}function Mp(e,n,a,o,c){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ns(n),o=lf(e,n,a,v,f,c),E=uf(),e!==null&&!xe?(cf(e,n,c),Fi(e,n,c)):(qt&&E&&Gh(n),n.flags|=1,je(e,n,o,c),n.child)}function Pp(e,n,a,o,c){if(e===null){var f=a.type;return typeof f=="function"&&!jh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,xp(e,n,f,o,c)):(e=Ru(a.type,null,o,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Mf(e,c)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:xo,a(v,o)&&e.ref===n.ref)return Fi(e,n,c)}return n.flags|=1,e=Li(f,o),e.ref=n.ref,e.return=n,n.child=e}function xp(e,n,a,o,c){if(e!==null){var f=e.memoizedProps;if(xo(f,o)&&e.ref===n.ref)if(xe=!1,n.pendingProps=o=f,Mf(e,c))(e.flags&131072)!==0&&(xe=!0);else return n.lanes=e.lanes,Fi(e,n,c)}return wf(e,n,a,o,c)}function kp(e,n,a){var o=n.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Up(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Nu(n,f!==null?f.cachePool:null),f!==null?xg(n,f):sf(),Sp(n);else return n.lanes=n.childLanes=536870912,Up(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(Nu(n,f.cachePool),xg(n,f),Ar(),n.memoizedState=null):(e!==null&&Nu(n,null),sf(),Ar());return je(e,n,c,a),n.child}function Up(e,n,a,o){var c=Jh();return c=c===null?null:{parent:Ce._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&Nu(n,null),sf(),Sp(n),e!==null&&Bo(e,n,o,!0),null}function Ku(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function wf(e,n,a,o,c){return Ns(n),a=lf(e,n,a,o,void 0,c),o=uf(),e!==null&&!xe?(cf(e,n,c),Fi(e,n,c)):(qt&&o&&Gh(n),n.flags|=1,je(e,n,a,c),n.child)}function Lp(e,n,a,o,c,f){return Ns(n),n.updateQueue=null,a=Ug(n,o,a,c),kg(e),o=uf(),e!==null&&!xe?(cf(e,n,f),Fi(e,n,f)):(qt&&o&&Gh(n),n.flags|=1,je(e,n,a,f),n.child)}function zp(e,n,a,o,c){if(Ns(n),n.stateNode===null){var f=pa,v=a.contextType;typeof v=="object"&&v!==null&&(f=Xe(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},tf(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?Xe(v):pa,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Sf(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&bf.enqueueReplaceState(f,f.state,null),Ko(n,o,f,c),Qo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,b=Ms(a,E);f.props=b;var L=f.context,G=a.contextType;v=pa,typeof G=="object"&&G!==null&&(v=Xe(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Rp(n,f,o,v),yr=!1;var z=n.memoizedState;f.state=z,Ko(n,o,f,c),Qo(),L=n.memoizedState,E||z!==L||yr?(typeof K=="function"&&(Sf(n,a,K,o),L=n.memoizedState),(b=yr||bp(n,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,ef(e,n),v=n.memoizedProps,G=Ms(a,v),f.props=G,K=n.pendingProps,z=f.context,L=a.contextType,b=pa,typeof L=="object"&&L!==null&&(b=Xe(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Rp(n,f,o,b),yr=!1,z=n.memoizedState,f.state=z,Ko(n,o,f,c),Qo();var B=n.memoizedState;v!==K||z!==B||yr||e!==null&&e.dependencies!==null&&Cu(e.dependencies)?(typeof E=="function"&&(Sf(n,a,E,o),B=n.memoizedState),(G=yr||bp(n,a,G,o,z,B,b)||e!==null&&e.dependencies!==null&&Cu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=B),f.props=o,f.state=B,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Ku(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=wa(n,e.child,null,c),n.child=wa(n,null,a,c)):je(e,n,a,c),n.memoizedState=f.state,e=n.child):e=Fi(e,n,c),e}function Bp(e,n,a,o){return Lo(),n.flags|=256,je(e,n,a,o),n.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(e){return{baseLanes:e,cachePool:Ig()}}function Df(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Pn),e}function jp(e,n,a){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(qt){if(c?Tr(n):Ar(),qt){var E=ce,b;if(b=E){t:{for(b=E,E=ci;b.nodeType!==8;){if(!E){E=null;break t}if(b=Qn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(n.memoizedState={dehydrated:E,treeContext:Rs!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},b=gn(18,null,null,0),b.stateNode=E,b.return=n,n.child=b,an=n,ce=null,b=!0):b=!1}b||Cs(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return fd(E)?n.lanes=32:n.lanes=536870912,null;Gi(n)}return E=o.children,o=o.fallback,c?(Ar(),c=n.mode,E=Yu({mode:"hidden",children:E},c),o=bs(o,c,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=Cf(a),c.childLanes=Df(e,v,a),n.memoizedState=If,o):(Tr(n),Nf(n,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)n.flags&256?(Tr(n),n.flags&=-257,n=Of(e,n,a)):n.memoizedState!==null?(Ar(),n.child=e.child,n.flags|=128,n=null):(Ar(),c=o.fallback,E=n.mode,o=Yu({mode:"visible",children:o.children},E),c=bs(c,E,a,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,wa(n,e.child,null,a),o=n.child,o.memoizedState=Cf(a),o.childLanes=Df(e,v,a),n.memoizedState=If,n=c);else if(Tr(n),fd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,zo({value:o,source:null,stack:null}),n=Of(e,n,a)}else if(xe||Bo(e,n,a,!1),v=(a&e.childLanes)!==0,xe||v){if(v=Wt,v!==null&&(o=a&-a,o=(o&42)!==0?1:ur(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ga(e,o),En(v,e,o),Vp;E.data==="$?"||Xf(),n=Of(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,ce=Qn(E.nextSibling),an=n,qt=!0,Is=null,ci=!1,e!==null&&(On[Vn++]=zi,On[Vn++]=Bi,On[Vn++]=Rs,zi=e.id,Bi=e.overflow,Rs=n),n=Nf(n,o.children),n.flags|=4096);return n}return c?(Ar(),c=o.fallback,E=n.mode,b=e.child,L=b.sibling,o=Li(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?c=Li(L,c):(c=bs(c,E,a,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=e.child.memoizedState,E===null?E=Cf(a):(b=E.cachePool,b!==null?(L=Ce._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Ig(),E={baseLanes:E.baseLanes|a,cachePool:b}),c.memoizedState=E,c.childLanes=Df(e,v,a),n.memoizedState=If,o):(Tr(n),a=e.child,e=a.sibling,a=Li(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Nf(e,n){return n=Yu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Yu(e,n){return e=gn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Of(e,n,a){return wa(n,e.child,null,a),e=Nf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function qp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Yh(e.return,n,a)}function Vf(e,n,a,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=c)}function Hp(e,n,a){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(je(e,n,o.children,a),o=De.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qp(e,a,n);else if(e.tag===19)qp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(De,o),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&Gu(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Vf(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Gu(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Vf(n,!0,a,null,f);break;case"together":Vf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ir|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Bo(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Li(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Li(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Mf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Cu(e)))}function $0(e,n,a){switch(n.tag){case 3:Kt(n,n.stateNode.containerInfo),pr(n,Ce,e.memoizedState.cache),Lo();break;case 27:case 5:Jn(n);break;case 4:Kt(n,n.stateNode.containerInfo);break;case 10:pr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Tr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?jp(e,n,a):(Tr(n),e=Fi(e,n,a),e!==null?e.sibling:null);Tr(n);break;case 19:var c=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Bo(e,n,a,!1),o=(a&n.childLanes)!==0),c){if(o)return Hp(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(De,De.current),o)break;return null;case 22:case 23:return n.lanes=0,kp(e,n,a);case 24:pr(n,Ce,e.memoizedState.cache)}return Fi(e,n,a)}function Gp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)xe=!0;else{if(!Mf(e,a)&&(n.flags&128)===0)return xe=!1,$0(e,n,a);xe=(e.flags&131072)!==0}else xe=!1,qt&&(n.flags&1048576)!==0&&Eg(n,Iu,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")jh(o)?(e=Ms(o,e),n.tag=1,n=zp(null,n,o,e,a)):(n.tag=0,n=wf(null,n,o,e,a));else{if(o!=null){if(c=o.$$typeof,c===Ct){n.tag=11,n=Mp(null,n,o,e,a);break t}else if(c===M){n.tag=14,n=Pp(null,n,o,e,a);break t}}throw n=oe(o)||o,Error(s(306,n,""))}}return n;case 0:return wf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,c=Ms(o,n.pendingProps),zp(e,n,o,c,a);case 3:t:{if(Kt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,ef(e,n),Ko(n,o,null,a);var v=n.memoizedState;if(o=v.cache,pr(n,Ce,o),o!==f.cache&&Xh(n,[Ce],a,!0),Qo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Bp(e,n,o,a);break t}else if(o!==c){c=Dn(Error(s(424)),n),zo(c),n=Bp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ce=Qn(e.firstChild),an=n,qt=!0,Is=null,ci=!0,a=Ap(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===c){n=Fi(e,n,a);break t}je(e,n,o,a)}n=n.child}return n;case 26:return Ku(e,n),e===null?(a=Yy(n.type,null,n.pendingProps,null))?n.memoizedState=a:qt||(a=n.type,e=n.pendingProps,o=lc(_t.current).createElement(a),o[Re]=n,o[_e]=e,He(o,a,e),fe(o),n.stateNode=o):n.memoizedState=Yy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Jn(n),e===null&&qt&&(o=n.stateNode=Fy(n.type,n.pendingProps,_t.current),an=n,ci=!0,c=ce,Or(n.type)?(dd=c,ce=Qn(o.firstChild)):ce=c),je(e,n,n.pendingProps.children,a),Ku(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&qt&&((c=o=ce)&&(o=bA(o,n.type,n.pendingProps,ci),o!==null?(n.stateNode=o,an=n,ce=Qn(o.firstChild),ci=!1,c=!0):c=!1),c||Cs(n)),Jn(n),c=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,ud(c,f)?o=null:v!==null&&ud(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=lf(e,n,q0,null,null,a),gl._currentValue=c),Ku(e,n),je(e,n,o,a),n.child;case 6:return e===null&&qt&&((e=a=ce)&&(a=RA(a,n.pendingProps,ci),a!==null?(n.stateNode=a,an=n,ce=null,e=!0):e=!1),e||Cs(n)),null;case 13:return jp(e,n,a);case 4:return Kt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=wa(n,null,o,a):je(e,n,o,a),n.child;case 11:return Mp(e,n,n.type,n.pendingProps,a);case 7:return je(e,n,n.pendingProps,a),n.child;case 8:return je(e,n,n.pendingProps.children,a),n.child;case 12:return je(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,pr(n,n.type,o.value),je(e,n,o.children,a),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Ns(n),c=Xe(c),o=o(c),n.flags|=1,je(e,n,o,a),n.child;case 14:return Pp(e,n,n.type,n.pendingProps,a);case 15:return xp(e,n,n.type,n.pendingProps,a);case 19:return Hp(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=Yu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Li(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return kp(e,n,a);case 24:return Ns(n),o=Xe(Ce),e===null?(c=Jh(),c===null&&(c=Wt,f=$h(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:o,cache:c},tf(n),pr(n,Ce,c)):((e.lanes&a)!==0&&(ef(e,n),Ko(n,null,null,a),Qo()),c=e.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),pr(n,Ce,o)):(o=f.cache,pr(n,Ce,o),o!==c.cache&&Xh(n,[Ce],a,!0))),je(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Qi(e){e.flags|=4}function Fp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Wy(n)){if(n=Mn.current,n!==null&&((Lt&4194048)===Lt?hi!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||n!==hi))throw Go=Wh,Cg;e.flags|=8192}}function Xu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?yo():536870912,e.lanes|=n,Na|=n)}function tl(e,n){if(!qt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Z0(e,n,a){var o=n.pendingProps;switch(Fh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(n),null;case 1:return le(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),qi(Ce),An(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Uo(n)?Qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Sg())),le(n),null;case 26:return a=n.memoizedState,e===null?(Qi(n),a!==null?(le(n),Fp(n,a)):(le(n),n.flags&=-16777217)):a?a!==e.memoizedState?(Qi(n),le(n),Fp(n,a)):(le(n),n.flags&=-16777217):(e.memoizedProps!==o&&Qi(n),le(n),n.flags&=-16777217),null;case 27:Ln(n),a=_t.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}e=ft.current,Uo(n)?Tg(n):(e=Fy(c,o,a),n.stateNode=e,Qi(n))}return le(n),null;case 5:if(Ln(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}if(e=ft.current,Uo(n))Tg(n);else{switch(c=lc(_t.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?c.createElement(a,{is:o.is}):c.createElement(a)}}e[Re]=n,e[_e]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(He(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qi(n)}}return le(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=_t.current,Uo(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,c=an,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Re]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Ly(e.nodeValue,a)),e||Cs(n)}else e=lc(e).createTextNode(o),e[Re]=n,n.stateNode=e}return le(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Uo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Re]=n}else Lo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;le(n),c=!1}else c=Sg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Gi(n),n):(Gi(n),null)}if(Gi(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),Xu(n,n.updateQueue),le(n),null;case 4:return An(),e===null&&rd(n.stateNode.containerInfo),le(n),null;case 10:return qi(n.type),le(n),null;case 19:if(nt(De),c=n.memoizedState,c===null)return le(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)tl(c,!1);else{if(he!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Gu(e),f!==null){for(n.flags|=128,tl(c,!1),e=f.updateQueue,n.updateQueue=e,Xu(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)vg(a,e),a=a.sibling;return W(De,De.current&1|2),n.child}e=e.sibling}c.tail!==null&&be()>Ju&&(n.flags|=128,o=!0,tl(c,!1),n.lanes=4194304)}else{if(!o)if(e=Gu(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Xu(n,e),tl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!qt)return le(n),null}else 2*be()-c.renderingStartTime>Ju&&a!==536870912&&(n.flags|=128,o=!0,tl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(e=c.last,e!==null?e.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=be(),n.sibling=null,e=De.current,W(De,o?e&1|2:e&1),n):(le(n),null);case 22:case 23:return Gi(n),af(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(le(n),n.subtreeFlags&6&&(n.flags|=8192)):le(n),a=n.updateQueue,a!==null&&Xu(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&nt(Os),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),qi(Ce),le(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function J0(e,n){switch(Fh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qi(Ce),An(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ln(n),null;case 13:if(Gi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Lo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return nt(De),null;case 4:return An(),null;case 10:return qi(n.type),null;case 22:case 23:return Gi(n),af(),e!==null&&nt(Os),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return qi(Ce),null;case 25:return null;default:return null}}function Qp(e,n){switch(Fh(n),n.tag){case 3:qi(Ce),An();break;case 26:case 27:case 5:Ln(n);break;case 4:An();break;case 13:Gi(n);break;case 19:nt(De);break;case 10:qi(n.type);break;case 22:case 23:Gi(n),af(),e!==null&&nt(Os);break;case 24:qi(Ce)}}function el(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){Jt(n,n.return,E)}}function Sr(e,n,a){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=n;var b=a,L=E;try{L()}catch(G){Jt(c,b,G)}}}o=o.next}while(o!==f)}}catch(G){Jt(n,n.return,G)}}function Kp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Pg(n,a)}catch(o){Jt(e,e.return,o)}}}function Yp(e,n,a){a.props=Ms(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Jt(e,n,o)}}function nl(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){Jt(e,n,c)}}function fi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){Jt(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Jt(e,n,c)}else a.current=null}function Xp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){Jt(e,e.return,c)}}function Pf(e,n,a){try{var o=e.stateNode;vA(o,e.type,a,n),o[_e]=n}catch(c){Jt(e,e.return,c)}}function $p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Or(e.type)||e.tag===4}function xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||$p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Or(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=oc));else if(o!==4&&(o===27&&Or(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(kf(e,n,a),e=e.sibling;e!==null;)kf(e,n,a),e=e.sibling}function $u(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Or(e.type)&&(a=e.stateNode),e=e.child,e!==null))for($u(e,n,a),e=e.sibling;e!==null;)$u(e,n,a),e=e.sibling}function Zp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);He(n,o,a),n[Re]=e,n[_e]=a}catch(f){Jt(e,e.return,f)}}var Ki=!1,me=!1,Uf=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,ke=null;function W0(e,n){if(e=e.containerInfo,od=mc,e=ug(e),Ph(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var B;K!==a||c!==0&&K.nodeType!==3||(E=v+c),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===c&&(E=v),z===f&&++G===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(ld={focusedElem:e,selectionRange:a},mc=!1,ke=n;ke!==null;)if(n=ke,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,ke=e;else for(;ke!==null;){switch(n=ke,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var vt=Ms(a.type,c,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(vt,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Jt(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)hd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ke=e;break}ke=n.return}}function Wp(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:br(e,a),o&4&&el(5,a);break;case 1:if(br(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var c=Ms(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}o&64&&Kp(a),o&512&&nl(a,a.return);break;case 3:if(br(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Pg(e,n)}catch(v){Jt(a,a.return,v)}}break;case 27:n===null&&o&4&&Zp(a);case 26:case 5:br(e,a),n===null&&o&4&&Xp(a),o&512&&nl(a,a.return);break;case 12:br(e,a);break;case 13:br(e,a),o&4&&ny(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=lA.bind(null,a),wA(e,a))));break;case 22:if(o=a.memoizedState!==null||Ki,!o){n=n!==null&&n.memoizedState!==null||me,c=Ki;var f=me;Ki=o,(me=n)&&!f?Rr(e,a,(a.subtreeFlags&8772)!==0):br(e,a),Ki=c,me=f}break;case 30:break;default:br(e,a)}}function ty(e){var n=e.alternate;n!==null&&(e.alternate=null,ty(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&fr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,ln=!1;function Yi(e,n,a){for(a=a.child;a!==null;)ey(e,n,a),a=a.sibling}function ey(e,n,a){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(re,a)}catch{}switch(a.tag){case 26:me||fi(a,n),Yi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:me||fi(a,n);var o=ae,c=ln;Or(a.type)&&(ae=a.stateNode,ln=!1),Yi(e,n,a),hl(a.stateNode),ae=o,ln=c;break;case 5:me||fi(a,n);case 6:if(o=ae,c=ln,ae=null,Yi(e,n,a),ae=o,ln=c,ae!==null)if(ln)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(f){Jt(a,n,f)}else try{ae.removeChild(a.stateNode)}catch(f){Jt(a,n,f)}break;case 18:ae!==null&&(ln?(e=ae,Hy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),vl(e)):Hy(ae,a.stateNode));break;case 4:o=ae,c=ln,ae=a.stateNode.containerInfo,ln=!0,Yi(e,n,a),ae=o,ln=c;break;case 0:case 11:case 14:case 15:me||Sr(2,a,n),me||Sr(4,a,n),Yi(e,n,a);break;case 1:me||(fi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Yp(a,n,o)),Yi(e,n,a);break;case 21:Yi(e,n,a);break;case 22:me=(o=me)||a.memoizedState!==null,Yi(e,n,a),me=o;break;default:Yi(e,n,a)}}function ny(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vl(e)}catch(a){Jt(n,n.return,a)}}function tA(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Jp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Jp),n;default:throw Error(s(435,e.tag))}}function Lf(e,n){var a=tA(e);n.forEach(function(o){var c=uA.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}function pn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Or(E.type)){ae=E.stateNode,ln=!1;break t}break;case 5:ae=E.stateNode,ln=!1;break t;case 3:case 4:ae=E.stateNode.containerInfo,ln=!0;break t}E=E.return}if(ae===null)throw Error(s(160));ey(f,v,c),ae=null,ln=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)iy(n,e),n=n.sibling}var Fn=null;function iy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(n,e),yn(e),o&4&&(Sr(3,e,e.return),el(3,e),Sr(5,e,e.return));break;case 1:pn(n,e),yn(e),o&512&&(me||a===null||fi(a,a.return)),o&64&&Ki&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=Fn;if(pn(n,e),yn(e),o&512&&(me||a===null||fi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[ls]||f[Re]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),He(f,o,a),f[Re]=e,fe(f),o=f;break t;case"link":var v=Zy("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=c.createElement(o),He(f,o,a),c.head.appendChild(f);break;case"meta":if(v=Zy("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=c.createElement(o),He(f,o,a),c.head.appendChild(f);break;default:throw Error(s(468,o))}f[Re]=e,fe(f),o=f}e.stateNode=o}else Jy(c,e.type,e.stateNode);else e.stateNode=$y(c,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Jy(c,e.type,e.stateNode):$y(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Pf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(n,e),yn(e),o&512&&(me||a===null||fi(a,a.return)),a!==null&&o&4&&Pf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(n,e),yn(e),o&512&&(me||a===null||fi(a,a.return)),e.flags&32){c=e.stateNode;try{Rn(c,"")}catch(B){Jt(e,e.return,B)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,Pf(e,c,a!==null?a.memoizedProps:c)),o&1024&&(Uf=!0);break;case 6:if(pn(n,e),yn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){Jt(e,e.return,B)}}break;case 3:if(hc=null,c=Fn,Fn=uc(n.containerInfo),pn(n,e),Fn=c,yn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(n.containerInfo)}catch(B){Jt(e,e.return,B)}Uf&&(Uf=!1,ry(e));break;case 4:o=Fn,Fn=uc(e.stateNode.containerInfo),pn(n,e),yn(e),Fn=o;break;case 12:pn(n,e),yn(e);break;case 13:pn(n,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gf=be()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lf(e,o)));break;case 22:c=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Ki,G=me;if(Ki=L||c,me=G||b,pn(n,e),me=G,Ki=L,yn(e),o&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||b||Ki||me||Ps(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(f=b.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Jt(b,b.return,B)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(B){Jt(b,b.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Lf(e,a))));break;case 19:pn(n,e),yn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Lf(e,o)));break;case 30:break;case 21:break;default:pn(n,e),yn(e)}}function yn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if($p(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var c=a.stateNode,f=xf(e);$u(e,f,c);break;case 5:var v=a.stateNode;a.flags&32&&(Rn(v,""),a.flags&=-33);var E=xf(e);$u(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=xf(e);kf(e,L,b);break;default:throw Error(s(161))}}catch(G){Jt(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ry(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;ry(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function br(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Wp(e,n.alternate,n),n=n.sibling}function Ps(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Sr(4,n,n.return),Ps(n);break;case 1:fi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Yp(n,n.return,a),Ps(n);break;case 27:hl(n.stateNode);case 26:case 5:fi(n,n.return),Ps(n);break;case 22:n.memoizedState===null&&Ps(n);break;case 30:Ps(n);break;default:Ps(n)}e=e.sibling}}function Rr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:Rr(c,f,a),el(4,f);break;case 1:if(Rr(c,f,a),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){Jt(o,o.return,L)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)Mg(b[c],E)}catch(L){Jt(o,o.return,L)}}a&&v&64&&Kp(f),nl(f,f.return);break;case 27:Zp(f);case 26:case 5:Rr(c,f,a),a&&o===null&&v&4&&Xp(f),nl(f,f.return);break;case 12:Rr(c,f,a);break;case 13:Rr(c,f,a),a&&v&4&&ny(c,f);break;case 22:f.memoizedState===null&&Rr(c,f,a),nl(f,f.return);break;case 30:break;default:Rr(c,f,a)}n=n.sibling}}function zf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&jo(a))}function Bf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&jo(e))}function di(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sy(e,n,a,o),n=n.sibling}function sy(e,n,a,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:di(e,n,a,o),c&2048&&el(9,n);break;case 1:di(e,n,a,o);break;case 3:di(e,n,a,o),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&jo(e)));break;case 12:if(c&2048){di(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Jt(n,n.return,b)}}else di(e,n,a,o);break;case 13:di(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?di(e,n,a,o):il(e,n):f._visibility&2?di(e,n,a,o):(f._visibility|=2,Ia(e,n,a,o,(n.subtreeFlags&10256)!==0)),c&2048&&zf(v,n);break;case 24:di(e,n,a,o),c&2048&&Bf(n.alternate,n);break;default:di(e,n,a,o)}}function Ia(e,n,a,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(f,v,E,b,c),el(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Ia(f,v,E,b,c):il(f,v):(G._visibility|=2,Ia(f,v,E,b,c)),c&&L&2048&&zf(v.alternate,v);break;case 24:Ia(f,v,E,b,c),c&&L&2048&&Bf(v.alternate,v);break;default:Ia(f,v,E,b,c)}n=n.sibling}}function il(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,c=o.flags;switch(o.tag){case 22:il(a,o),c&2048&&zf(o.alternate,o);break;case 24:il(a,o),c&2048&&Bf(o.alternate,o);break;default:il(a,o)}n=n.sibling}}var rl=8192;function Ca(e){if(e.subtreeFlags&rl)for(e=e.child;e!==null;)ay(e),e=e.sibling}function ay(e){switch(e.tag){case 26:Ca(e),e.flags&rl&&e.memoizedState!==null&&zA(Fn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var n=Fn;Fn=uc(e.stateNode.containerInfo),Ca(e),Fn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=rl,rl=16777216,Ca(e),rl=n):Ca(e));break;default:Ca(e)}}function oy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function sl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ke=o,uy(o,e)}oy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ly(e),e=e.sibling}function ly(e){switch(e.tag){case 0:case 11:case 15:sl(e),e.flags&2048&&Sr(9,e,e.return);break;case 3:sl(e);break;case 12:sl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Zu(e)):sl(e);break;default:sl(e)}}function Zu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ke=o,uy(o,e)}oy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Sr(8,n,n.return),Zu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Zu(n));break;default:Zu(n)}e=e.sibling}}function uy(e,n){for(;ke!==null;){var a=ke;switch(a.tag){case 0:case 11:case 15:Sr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:jo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ke=o;else t:for(a=e;ke!==null;){o=ke;var c=o.sibling,f=o.return;if(ty(o),o===a){ke=null;break t}if(c!==null){c.return=f,ke=c;break t}ke=f}}}var eA={getCacheForType:function(e){var n=Xe(Ce),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},nA=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Wt=null,Dt=null,Lt=0,Qt=0,_n=null,wr=!1,Da=!1,jf=!1,Xi=0,he=0,Ir=0,xs=0,qf=0,Pn=0,Na=0,al=null,un=null,Hf=!1,Gf=0,Ju=1/0,Wu=null,Cr=null,qe=0,Dr=null,Oa=null,Va=0,Ff=0,Qf=null,cy=null,ol=0,Kf=null;function vn(){if((Ft&2)!==0&&Lt!==0)return Lt&-Lt;if(H.T!==null){var e=va;return e!==0?e:td()}return cr()}function hy(){Pn===0&&(Pn=(Lt&536870912)===0||qt?po():536870912);var e=Mn.current;return e!==null&&(e.flags|=32),Pn}function En(e,n,a){(e===Wt&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Ma(e,0),Nr(e,Lt,Pn,!1)),Ii(e,a),((Ft&2)===0||e!==Wt)&&(e===Wt&&((Ft&2)===0&&(xs|=a),he===4&&Nr(e,Lt,Pn,!1)),mi(e))}function fy(e,n,a){if((Ft&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||os(e,n),c=o?sA(e,n):$f(e,n,!0),f=o;do{if(c===0){Da&&!o&&Nr(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!iA(a)){c=$f(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;c=al;var b=E.current.memoizedState.isDehydrated;if(b&&(Ma(E,v).flags|=256),v=$f(E,v,!1),v!==2){if(jf&&!b){E.errorRecoveryDisabledLanes|=f,xs|=f,c=4;break t}f=un,un=c,f!==null&&(un===null?un=f:un.push.apply(un,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){Ma(e,0),Nr(e,n,0,!0);break}t:{switch(o=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Nr(o,n,Pn,!wr);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(c=Gf+300-be(),10<c)){if(Nr(o,n,Pn,!wr),$s(o,0,!0)!==0)break t;o.timeoutHandle=jy(dy.bind(null,o,a,un,Wu,Hf,n,Pn,xs,Na,wr,f,2,-0,0),c);break t}dy(o,a,un,Wu,Hf,n,Pn,xs,Na,wr,f,0,-0,0)}}break}while(!0);mi(e)}function dy(e,n,a,o,c,f,v,E,b,L,G,K,z,B){if(e.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:LA},ay(n),K=BA(),K!==null)){e.cancelPendingCommit=K(Ey.bind(null,e,n,f,a,o,c,v,E,b,G,1,z,B)),Nr(e,f,v,!L);return}Ey(e,n,f,a,o,c,v,E,b)}function iA(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],f=c.getSnapshot;c=c.value;try{if(!mn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Nr(e,n,a,o){n&=~qf,n&=~xs,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var c=n;0<c;){var f=31-Ye(c),v=1<<f;o[f]=-1,c&=~v}a!==0&&Wn(e,a,n)}function tc(){return(Ft&6)===0?(ll(0),!1):!0}function Yf(){if(Dt!==null){if(Qt===0)var e=Dt.return;else e=Dt,ji=Ds=null,hf(e),Ra=null,Jo=0,e=Dt;for(;e!==null;)Qp(e.alternate,e),e=e.return;Dt=null}}function Ma(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,TA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Yf(),Wt=e,Dt=a=Li(e.current,null),Lt=n,Qt=0,_n=null,wr=!1,Da=os(e,n),jf=!1,Na=Pn=qf=xs=Ir=he=0,un=al=null,Hf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var c=31-Ye(o),f=1<<c;n|=e[c],o&=~f}return Xi=n,Au(),a}function my(e,n){wt=null,H.H=ju,n===Ho||n===Ou?(n=Og(),Qt=3):n===Cg?(n=Og(),Qt=4):Qt=n===Vp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,_n=n,Dt===null&&(he=1,Qu(e,Dn(n,e.current)))}function gy(){var e=H.H;return H.H=ju,e===null?ju:e}function py(){var e=H.A;return H.A=eA,e}function Xf(){he=4,wr||(Lt&4194048)!==Lt&&Mn.current!==null||(Da=!0),(Ir&134217727)===0&&(xs&134217727)===0||Wt===null||Nr(Wt,Lt,Pn,!1)}function $f(e,n,a){var o=Ft;Ft|=2;var c=gy(),f=py();(Wt!==e||Lt!==n)&&(Wu=null,Ma(e,n)),n=!1;var v=he;t:do try{if(Qt!==0&&Dt!==null){var E=Dt,b=_n;switch(Qt){case 8:Yf(),v=6;break t;case 3:case 2:case 9:case 6:Mn.current===null&&(n=!0);var L=Qt;if(Qt=0,_n=null,Pa(e,E,b,L),a&&Da){v=0;break t}break;default:L=Qt,Qt=0,_n=null,Pa(e,E,b,L)}}rA(),v=he;break}catch(G){my(e,G)}while(!0);return n&&e.shellSuspendCounter++,ji=Ds=null,Ft=o,H.H=c,H.A=f,Dt===null&&(Wt=null,Lt=0,Au()),v}function rA(){for(;Dt!==null;)yy(Dt)}function sA(e,n){var a=Ft;Ft|=2;var o=gy(),c=py();Wt!==e||Lt!==n?(Wu=null,Ju=be()+500,Ma(e,n)):Da=os(e,n);t:do try{if(Qt!==0&&Dt!==null){n=Dt;var f=_n;e:switch(Qt){case 1:Qt=0,_n=null,Pa(e,n,f,1);break;case 2:case 9:if(Dg(f)){Qt=0,_n=null,_y(n);break}n=function(){Qt!==2&&Qt!==9||Wt!==e||(Qt=7),mi(e)},f.then(n,n);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Dg(f)?(Qt=0,_n=null,_y(n)):(Qt=0,_n=null,Pa(e,n,f,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var E=Dt;if(!v||Wy(v)){Qt=0,_n=null;var b=E.sibling;if(b!==null)Dt=b;else{var L=E.return;L!==null?(Dt=L,ec(L)):Dt=null}break e}}Qt=0,_n=null,Pa(e,n,f,5);break;case 6:Qt=0,_n=null,Pa(e,n,f,6);break;case 8:Yf(),he=6;break t;default:throw Error(s(462))}}aA();break}catch(G){my(e,G)}while(!0);return ji=Ds=null,H.H=o,H.A=c,Ft=a,Dt!==null?0:(Wt=null,Lt=0,Au(),he)}function aA(){for(;Dt!==null&&!en();)yy(Dt)}function yy(e){var n=Gp(e.alternate,e,Xi);e.memoizedProps=e.pendingProps,n===null?ec(e):Dt=n}function _y(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Lp(a,n,n.pendingProps,n.type,void 0,Lt);break;case 11:n=Lp(a,n,n.pendingProps,n.type.render,n.ref,Lt);break;case 5:hf(n);default:Qp(a,n),n=Dt=vg(n,Xi),n=Gp(a,n,Xi)}e.memoizedProps=e.pendingProps,n===null?ec(e):Dt=n}function Pa(e,n,a,o){ji=Ds=null,hf(n),Ra=null,Jo=0;var c=n.return;try{if(X0(e,c,n,a,Lt)){he=1,Qu(e,Dn(a,e.current)),Dt=null;return}}catch(f){if(c!==null)throw Dt=c,f;he=1,Qu(e,Dn(a,e.current)),Dt=null;return}n.flags&32768?(qt||o===1?e=!0:Da||(Lt&536870912)!==0?e=!1:(wr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),vy(n,e)):ec(n)}function ec(e){var n=e;do{if((n.flags&32768)!==0){vy(n,wr);return}e=n.return;var a=Z0(n.alternate,n,Xi);if(a!==null){Dt=a;return}if(n=n.sibling,n!==null){Dt=n;return}Dt=n=e}while(n!==null);he===0&&(he=5)}function vy(e,n){do{var a=J0(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);he=6,Dt=null}function Ey(e,n,a,o,c,f,v,E,b){e.cancelPendingCommit=null;do nc();while(qe!==0);if((Ft&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=zh,_o(e,a,f,v,E,b),e===Wt&&(Dt=Wt=null,Lt=0),Oa=n,Dr=e,Va=a,Ff=f,Qf=c,cy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,cA(Bn,function(){return Ry(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,c=et.p,et.p=2,v=Ft,Ft|=4;try{W0(e,n,a)}finally{Ft=v,et.p=c,H.T=o}}qe=1,Ty(),Ay(),Sy()}}function Ty(){if(qe===1){qe=0;var e=Dr,n=Oa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var c=Ft;Ft|=4;try{iy(n,e);var f=ld,v=ug(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&lg(E.ownerDocument.documentElement,E)){if(b!==null&&Ph(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),vt=E.textContent.length,mt=Math.min(b.start,vt),Zt=b.end===void 0?mt:Math.min(b.end,vt);!B.extend&&mt>Zt&&(v=Zt,Zt=mt,mt=v);var x=og(E,mt),D=og(E,Zt);if(x&&D&&(B.rangeCount!==1||B.anchorNode!==x.node||B.anchorOffset!==x.offset||B.focusNode!==D.node||B.focusOffset!==D.offset)){var U=K.createRange();U.setStart(x.node,x.offset),B.removeAllRanges(),mt>Zt?(B.addRange(U),B.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),B.addRange(U))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Q=K[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}mc=!!od,ld=od=null}finally{Ft=c,et.p=o,H.T=a}}e.current=n,qe=2}}function Ay(){if(qe===2){qe=0;var e=Dr,n=Oa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=et.p;et.p=2;var c=Ft;Ft|=4;try{Wp(e,n.alternate,n)}finally{Ft=c,et.p=o,H.T=a}}qe=3}}function Sy(){if(qe===4||qe===3){qe=0,is();var e=Dr,n=Oa,a=Va,o=cy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?qe=5:(qe=0,Oa=Dr=null,by(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Cr=null),Zs(a),n=n.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(re,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,c=et.p,et.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{H.T=n,et.p=c}}(Va&3)!==0&&nc(),mi(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Kf?ol++:(ol=0,Kf=e):ol=0,ll(0)}}function by(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,jo(n)))}function nc(e){return Ty(),Ay(),Sy(),Ry()}function Ry(){if(qe!==5)return!1;var e=Dr,n=Ff;Ff=0;var a=Zs(Va),o=H.T,c=et.p;try{et.p=32>a?32:a,H.T=null,a=Qf,Qf=null;var f=Dr,v=Va;if(qe=0,Oa=Dr=null,Va=0,(Ft&6)!==0)throw Error(s(331));var E=Ft;if(Ft|=4,ly(f.current),sy(f,f.current,v,a),Ft=E,ll(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(re,f)}catch{}return!0}finally{et.p=c,H.T=o,by(e,n)}}function wy(e,n,a){n=Dn(a,n),n=Rf(e.stateNode,n,2),e=vr(e,n,2),e!==null&&(Ii(e,2),mi(e))}function Jt(e,n,a){if(e.tag===3)wy(e,e,a);else for(;n!==null;){if(n.tag===3){wy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Cr===null||!Cr.has(o))){e=Dn(a,e),a=Np(2),o=vr(n,a,2),o!==null&&(Op(a,o,n,e),Ii(o,2),mi(o));break}}n=n.return}}function Zf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new nA;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(a)||(jf=!0,c.add(a),e=oA.bind(null,e,n,a),n.then(e,e))}function oA(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Wt===e&&(Lt&a)===a&&(he===4||he===3&&(Lt&62914560)===Lt&&300>be()-Gf?(Ft&2)===0&&Ma(e,0):qf|=a,Na===Lt&&(Na=0)),mi(e)}function Iy(e,n){n===0&&(n=yo()),e=ga(e,n),e!==null&&(Ii(e,n),mi(e))}function lA(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Iy(e,a)}function uA(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Iy(e,a)}function cA(e,n){return ee(e,n)}var ic=null,xa=null,Jf=!1,rc=!1,Wf=!1,ks=0;function mi(e){e!==xa&&e.next===null&&(xa===null?ic=xa=e:xa=xa.next=e),rc=!0,Jf||(Jf=!0,fA())}function ll(e,n){if(!Wf&&rc){Wf=!0;do for(var a=!1,o=ic;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Ye(42|e)+1)-1,f&=c&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Oy(o,f))}else f=Lt,f=$s(o,o===Wt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||os(o,f)||(a=!0,Oy(o,f));o=o.next}while(a);Wf=!1}}function hA(){Cy()}function Cy(){rc=Jf=!1;var e=0;ks!==0&&(EA()&&(e=ks),ks=0);for(var n=be(),a=null,o=ic;o!==null;){var c=o.next,f=Dy(o,n);f===0?(o.next=null,a===null?ic=c:a.next=c,c===null&&(xa=a)):(a=o,(e!==0||(f&3)!==0)&&(rc=!0)),o=c}ll(e)}function Dy(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Ye(f),E=1<<v,b=c[v];b===-1?((E&a)===0||(E&o)!==0)&&(c[v]=go(E,n)):b<=n&&(e.expiredLanes|=E),f&=~E}if(n=Wt,a=Lt,a=$s(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&hn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||os(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&hn(o),Zs(a)){case 2:case 8:a=zn;break;case 32:a=Bn;break;case 268435456:a=Ke;break;default:a=Bn}return o=Ny.bind(null,e),a=ee(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&hn(o),e.callbackPriority=2,e.callbackNode=null,2}function Ny(e,n){if(qe!==0&&qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(nc()&&e.callbackNode!==a)return null;var o=Lt;return o=$s(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(fy(e,o,n),Dy(e,be()),e.callbackNode!=null&&e.callbackNode===a?Ny.bind(null,e):null)}function Oy(e,n){if(nc())return null;fy(e,n,!0)}function fA(){AA(function(){(Ft&6)!==0?ee(or,hA):Cy()})}function td(){return ks===0&&(ks=po()),ks}function Vy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function My(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function dA(e,n,a,o,c){if(n==="submit"&&a&&a.stateNode===c){var f=Vy((c[_e]||null).action),v=o.submitter;v&&(n=(n=v[_e]||null)?Vy(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new ra("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var b=v?My(c,v):new FormData(c);Ef(a,{pending:!0,data:b,method:c.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?My(c,v):new FormData(c),Ef(a,{pending:!0,data:b,method:c.method,action:f},f,b))},currentTarget:c}]})}}for(var ed=0;ed<Lh.length;ed++){var nd=Lh[ed],mA=nd.toLowerCase(),gA=nd[0].toUpperCase()+nd.slice(1);Gn(mA,"on"+gA)}Gn(fg,"onAnimationEnd"),Gn(dg,"onAnimationIteration"),Gn(mg,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(V0,"onTransitionRun"),Gn(M0,"onTransitionStart"),Gn(P0,"onTransitionCancel"),Gn(gg,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function Py(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){Fu(G)}c.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){Fu(G)}c.currentTarget=null,f=b}}}}function Nt(e,n){var a=n[Eo];a===void 0&&(a=n[Eo]=new Set);var o=e+"__bubble";a.has(o)||(xy(n,e,2,!1),a.add(o))}function id(e,n,a){var o=0;n&&(o|=4),xy(a,e,o,n)}var sc="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[sc]){e[sc]=!0,To.forEach(function(a){a!=="selectionchange"&&(pA.has(a)||id(a,!1,e),id(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[sc]||(n[sc]=!0,id("selectionchange",!1,n))}}function xy(e,n,a,o){switch(s_(n)){case 2:var c=HA;break;case 8:c=GA;break;default:c=_d}a=c.bind(null,n,a,e),c=void 0,!In||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function sd(e,n,a,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=Ci(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}ou(function(){var L=f,G=wn(a),K=[];t:{var z=pg.get(e);if(z!==void 0){var B=ra,vt=e;switch(e){case"keypress":if(si(a)===0)break t;case"keydown":case"keyup":B=ca;break;case"focusin":vt="focus",B=oa;break;case"focusout":vt="blur",B=oa;break;case"beforeblur":case"afterblur":B=oa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=gu;break;case fg:case dg:case mg:B=la;break;case gg:B=yu;break;case"scroll":case"scrollend":B=lu;break;case"wheel":B=ha;break;case"copy":case"cut":case"paste":B=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Mo;break;case"toggle":case"beforetoggle":B=vu}var mt=(n&4)!==0,Zt=!mt&&(e==="scroll"||e==="scrollend"),x=mt?z!==null?z+"Capture":null:z;mt=[];for(var D=L,U;D!==null;){var Q=D;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||x===null||(Q=gs(D,x),Q!=null&&mt.push(cl(D,Q,U))),Zt)break;D=D.return}0<mt.length&&(z=new B(z,vt,null,a,G),K.push({event:z,listeners:mt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Vi&&(vt=a.relatedTarget||a.fromElement)&&(Ci(vt)||vt[bn]))break t;if((B||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,B?(vt=a.relatedTarget||a.toElement,B=L,vt=vt?Ci(vt):null,vt!==null&&(Zt=h(vt),mt=vt.tag,vt!==Zt||mt!==5&&mt!==27&&mt!==6)&&(vt=null)):(B=null,vt=L),B!==vt)){if(mt=Cn,Q="onMouseLeave",x="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Mo,Q="onPointerLeave",x="onPointerEnter",D="pointer"),Zt=B==null?z:ei(B),U=vt==null?z:ei(vt),z=new mt(Q,D+"leave",B,a,G),z.target=Zt,z.relatedTarget=U,Q=null,Ci(G)===L&&(mt=new mt(x,D+"enter",vt,a,G),mt.target=U,mt.relatedTarget=Zt,Q=mt),Zt=Q,B&&vt)e:{for(mt=B,x=vt,D=0,U=mt;U;U=ka(U))D++;for(U=0,Q=x;Q;Q=ka(Q))U++;for(;0<D-U;)mt=ka(mt),D--;for(;0<U-D;)x=ka(x),U--;for(;D--;){if(mt===x||x!==null&&mt===x.alternate)break e;mt=ka(mt),x=ka(x)}mt=null}else mt=null;B!==null&&ky(K,z,B,mt,!1),vt!==null&&Zt!==null&&ky(K,Zt,vt,mt,!0)}}t:{if(z=L?ei(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var at=eg;else if(Ie(z))if(ng)at=D0;else{at=I0;var It=w0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&wo(L.elementType)&&(at=eg):at=C0;if(at&&(at=at(e,L))){Ui(K,at,a,G);break t}It&&It(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&mr(z,"number",z.value)}switch(It=L?ei(L):window,e){case"focusin":(Ie(It)||It.contentEditable==="true")&&(fa=It,xh=L,ko=null);break;case"focusout":ko=xh=fa=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,cg(K,a,G);break;case"selectionchange":if(O0)break;case"keydown":case"keyup":cg(K,a,G)}var ut;if(li)t:{switch(e){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else kt?j(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(p&&a.locale!=="ko"&&(kt||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&kt&&(ut=Co()):(ri=G,gr="value"in ri?ri.value:ri.textContent,kt=!0)),It=ac(L,gt),0<It.length&&(gt=new Oo(gt,e,null,a,G),K.push({event:gt,listeners:It}),ut?gt.data=ut:(ut=tt(a),ut!==null&&(gt.data=ut)))),(ut=m?we(e,a):Ut(e,a))&&(gt=ac(L,"onBeforeInput"),0<gt.length&&(It=new Oo("onBeforeInput","beforeinput",null,a,G),K.push({event:It,listeners:gt}),It.data=ut)),dA(K,e,L,a,G)}Py(K,n)})}function cl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function ac(e,n){for(var a=n+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=gs(e,a),c!=null&&o.unshift(cl(e,c,f)),c=gs(e,n),c!=null&&o.push(cl(e,c,f))),e.tag===3)return o;e=e.return}return[]}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ky(e,n,a,o,c){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,c?(L=gs(a,f),L!=null&&v.unshift(cl(a,L,b))):c||(L=gs(a,f),L!=null&&v.push(cl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var yA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function Uy(e){return(typeof e=="string"?e:""+e).replace(yA,`
`).replace(_A,"")}function Ly(e,n){return n=Uy(n),Uy(e)===n}function oc(){}function $t(e,n,a,o,c,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Rn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Rn(e,""+o);break;case"className":ni(e,"class",o);break;case"tabIndex":ni(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(e,a,o);break;case"style":Ro(e,o,f);break;case"data":if(n!=="object"){ni(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&$t(e,n,"name",c.name,c,null),$t(e,n,"formEncType",c.formEncType,c,null),$t(e,n,"formMethod",c.formMethod,c,null),$t(e,n,"formTarget",c.formTarget,c,null)):($t(e,n,"encType",c.encType,c,null),$t(e,n,"method",c.method,c,null),$t(e,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=ia(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=oc);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=ia(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),dr(e,"popover",o);break;case"xlinkActuate":ze(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ze(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ze(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ze(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ze(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ze(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ze(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ze(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ze(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":dr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ch.get(a)||a,dr(e,a,o))}}function ad(e,n,a,o,c,f){switch(a){case"style":Ro(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Rn(e,o):(typeof o=="number"||typeof o=="bigint")&&Rn(e,""+o);break;case"onScroll":o!=null&&Nt("scroll",e);break;case"onScrollEnd":o!=null&&Nt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Js.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=e[_e]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,c);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):dr(e,a,o)}}}function He(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var o=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,f,v,a,null)}}c&&$t(e,n,"srcSet",a.srcSet,a,null),o&&$t(e,n,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=f=v=c=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":c=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:$t(e,n,o,G,a,null)}}fs(e,f,E,b,L,v,c,!1),na(e);return;case"select":Nt("invalid",e),o=v=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:$t(e,n,c,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Oi(e,!!o,n,!1):a!=null&&Oi(e,!!o,a,!0);return;case"textarea":Nt("invalid",e),f=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:$t(e,n,v,E,a,null)}ds(e,o,c,f),na(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,n,b,o,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(o=0;o<ul.length;o++)Nt(ul[o],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,L,o,a,null)}return;default:if(wo(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&ad(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&$t(e,n,E,o,a,null))}function vA(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,E=null,b=null,L=null,G=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||$t(e,n,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":c=B;break;case"checked":L=B;break;case"defaultChecked":G=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:B!==K&&$t(e,n,z,B,o,K)}}dn(e,v,E,b,L,G,f,c);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||$t(e,n,f,null,o,b)}for(c in o)if(f=o[c],b=a[c],o.hasOwnProperty(c)&&(f!=null||b!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&$t(e,n,c,f,o,b)}n=E,a=v,o=B,z!=null?Oi(e,!!a,z,!1):!!o!=!!a&&(n!=null?Oi(e,!!a,n,!0):Oi(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$t(e,n,E,null,o,c)}for(v in o)if(c=o[v],f=a[v],o.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":z=c;break;case"defaultValue":B=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&$t(e,n,v,c,o,f)}Yt(e,z,B);return;case"option":for(var vt in a)if(z=a[vt],a.hasOwnProperty(vt)&&z!=null&&!o.hasOwnProperty(vt))switch(vt){case"selected":e.selected=!1;break;default:$t(e,n,vt,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:$t(e,n,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)z=a[mt],a.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt)&&$t(e,n,mt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:$t(e,n,L,z,o,B)}return;default:if(wo(n)){for(var Zt in a)z=a[Zt],a.hasOwnProperty(Zt)&&z!==void 0&&!o.hasOwnProperty(Zt)&&ad(e,n,Zt,void 0,o,z);for(G in o)z=o[G],B=a[G],!o.hasOwnProperty(G)||z===B||z===void 0&&B===void 0||ad(e,n,G,z,o,B);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&$t(e,n,x,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||$t(e,n,K,z,o,B)}var od=null,ld=null;function lc(e){return e.nodeType===9?e:e.ownerDocument}function zy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function By(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ud(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var cd=null;function EA(){var e=window.event;return e&&e.type==="popstate"?e===cd?!1:(cd=e,!0):(cd=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,TA=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,AA=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(e){return qy.resolve(null).then(e).catch(SA)}:jy;function SA(e){setTimeout(function(){throw e})}function Or(e){return e==="head"}function Hy(e,n){var a=n,o=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&hl(v.documentElement),a&2&&hl(v.body),a&4)for(a=v.head,hl(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[ls]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(c===0){e.removeChild(f),vl(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);vl(n)}function hd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hd(a),fr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function bA(e,n,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ls])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Qn(e.nextSibling),e===null)break}return null}function RA(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qn(e.nextSibling),e===null))return null;return e}function fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function wA(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var dd=null;function Gy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Fy(e,n,a){switch(n=lc(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);fr(e)}var xn=new Map,Qy=new Set;function uc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $i=et.d;et.d={f:IA,r:CA,D:DA,C:NA,L:OA,m:VA,X:PA,S:MA,M:xA};function IA(){var e=$i.f(),n=tc();return e||n}function CA(e){var n=ti(e);n!==null&&n.tag===5&&n.type==="form"?fp(n):$i.r(e)}var Ua=typeof document>"u"?null:document;function Ky(e,n,a){var o=Ua;if(o&&typeof n=="string"&&n){var c=ve(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Qy.has(c)||(Qy.add(c),e={rel:e,crossOrigin:a,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),He(n,"link",e),fe(n),o.head.appendChild(n)))}}function DA(e){$i.D(e),Ky("dns-prefetch",e,null)}function NA(e,n){$i.C(e,n),Ky("preconnect",e,n)}function OA(e,n,a){$i.L(e,n,a);var o=Ua;if(o&&e&&n){var c='link[rel="preload"][as="'+ve(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+ve(a.imageSizes)+'"]')):c+='[href="'+ve(e)+'"]';var f=c;switch(n){case"style":f=La(e);break;case"script":f=za(e)}xn.has(f)||(e=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),xn.set(f,e),o.querySelector(c)!==null||n==="style"&&o.querySelector(fl(f))||n==="script"&&o.querySelector(dl(f))||(n=o.createElement("link"),He(n,"link",e),fe(n),o.head.appendChild(n)))}}function VA(e,n){$i.m(e,n);var a=Ua;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+ve(o)+'"][href="'+ve(e)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=za(e)}if(!xn.has(f)&&(e=A({rel:"modulepreload",href:e},n),xn.set(f,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(f)))return}o=a.createElement("link"),He(o,"link",e),fe(o),a.head.appendChild(o)}}}function MA(e,n,a){$i.S(e,n,a);var o=Ua;if(o&&e){var c=nn(o).hoistableStyles,f=La(e);n=n||"default";var v=c.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fl(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},a),(a=xn.get(f))&&md(e,a);var b=v=o.createElement("link");fe(b),He(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(f,v)}}}function PA(e,n){$i.X(e,n);var a=Ua;if(a&&e){var o=nn(a).hoistableScripts,c=za(e),f=o.get(c);f||(f=a.querySelector(dl(c)),f||(e=A({src:e,async:!0},n),(n=xn.get(c))&&gd(e,n),f=a.createElement("script"),fe(f),He(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function xA(e,n){$i.M(e,n);var a=Ua;if(a&&e){var o=nn(a).hoistableScripts,c=za(e),f=o.get(c);f||(f=a.querySelector(dl(c)),f||(e=A({src:e,async:!0,type:"module"},n),(n=xn.get(c))&&gd(e,n),f=a.createElement("script"),fe(f),He(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function Yy(e,n,a,o){var c=(c=_t.current)?uc(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=La(a.href),a=nn(c).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=La(a.href);var f=nn(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(fl(e)))&&!f._p&&(v.instance=f,v.state.loading=5),xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xn.set(e,a),f||kA(c,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=za(a),a=nn(c).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function La(e){return'href="'+ve(e)+'"'}function fl(e){return'link[rel="stylesheet"]['+e+"]"}function Xy(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function kA(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),He(n,"link",a),fe(n),e.head.appendChild(n))}function za(e){return'[src="'+ve(e)+'"]'}function dl(e){return"script[async]"+e}function $y(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ve(a.href)+'"]');if(o)return n.instance=o,fe(o),o;var c=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),fe(o),He(o,"style",c),cc(o,a.precedence,e),n.instance=o;case"stylesheet":c=La(a.href);var f=e.querySelector(fl(c));if(f)return n.state.loading|=4,n.instance=f,fe(f),f;o=Xy(a),(c=xn.get(c))&&md(o,c),f=(e.ownerDocument||e).createElement("link"),fe(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),He(f,"link",o),n.state.loading|=4,cc(f,a.precedence,e),n.instance=f;case"script":return f=za(a.src),(c=e.querySelector(dl(f)))?(n.instance=c,fe(c),c):(o=a,(c=xn.get(f))&&(o=A({},a),gd(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),fe(c),He(c,"link",o),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,cc(o,a.precedence,e));return n.instance}function cc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var hc=null;function Zy(e,n,a){if(hc===null){var o=new Map,c=hc=new Map;c.set(a,o)}else c=hc,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[ls]||f[Re]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function Jy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function UA(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ml=null;function LA(){}function zA(e,n,a){if(ml===null)throw Error(s(475));var o=ml;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=La(a.href),f=e.querySelector(fl(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=fc.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,fe(f);return}f=e.ownerDocument||e,a=Xy(a),(c=xn.get(c))&&md(a,c),f=f.createElement("link"),fe(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),He(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=fc.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function BA(){if(ml===null)throw Error(s(475));var e=ml;return e.stylesheets&&e.count===0&&pd(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&pd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)pd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dc=null;function pd(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dc=new Map,n.forEach(jA,e),dc=null,fc.call(e))}function jA(e,n){if(!(n.state.loading&4)){var a=dc.get(e);if(a)var o=a.get(null);else{a=new Map,dc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,c),a.set(v,c),this.count++,o=fc.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var gl={$$typeof:ct,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function qA(e,n,a,o,c,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function t_(e,n,a,o,c,f,v,E,b,L,G,K){return e=new qA(e,n,a,v,E,b,L,K),n=1,f===!0&&(n|=24),f=gn(3,null,null,n),e.current=f,f.stateNode=e,n=$h(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},tf(f),e}function e_(e){return e?(e=pa,e):pa}function n_(e,n,a,o,c,f){c=e_(c),o.context===null?o.context=c:o.pendingContext=c,o=_r(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=vr(e,o,n),a!==null&&(En(a,e,n),Fo(a,e,n))}function i_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function yd(e,n){i_(e,n),(e=e.alternate)&&i_(e,n)}function r_(e){if(e.tag===13){var n=ga(e,67108864);n!==null&&En(n,e,67108864),yd(e,67108864)}}var mc=!0;function HA(e,n,a,o){var c=H.T;H.T=null;var f=et.p;try{et.p=2,_d(e,n,a,o)}finally{et.p=f,H.T=c}}function GA(e,n,a,o){var c=H.T;H.T=null;var f=et.p;try{et.p=8,_d(e,n,a,o)}finally{et.p=f,H.T=c}}function _d(e,n,a,o){if(mc){var c=vd(o);if(c===null)sd(e,n,o,gc,a),a_(e,o);else if(QA(c,e,n,a,o))o.stopPropagation();else if(a_(e,o),n&4&&-1<FA.indexOf(e)){for(;c!==null;){var f=ti(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=jn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Ye(v);E.entanglements[1]|=b,v&=~b}mi(f),(Ft&6)===0&&(Ju=be()+500,ll(0))}}break;case 13:E=ga(f,2),E!==null&&En(E,f,2),tc(),yd(f,2)}if(f=vd(o),f===null&&sd(e,n,o,gc,a),f===c)break;c=f}c!==null&&o.stopPropagation()}else sd(e,n,o,null,a)}}function vd(e){return e=wn(e),Ed(e)}var gc=null;function Ed(e){if(gc=null,e=Ci(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return gc=e,null}function s_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case or:return 2;case zn:return 8;case Bn:case lr:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var Td=!1,Vr=null,Mr=null,Pr=null,pl=new Map,yl=new Map,xr=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a_(e,n){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":pl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(n.pointerId)}}function _l(e,n,a,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=ti(n),n!==null&&r_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function QA(e,n,a,o,c){switch(n){case"focusin":return Vr=_l(Vr,e,n,a,o,c),!0;case"dragenter":return Mr=_l(Mr,e,n,a,o,c),!0;case"mouseover":return Pr=_l(Pr,e,n,a,o,c),!0;case"pointerover":var f=c.pointerId;return pl.set(f,_l(pl.get(f)||null,e,n,a,o,c)),!0;case"gotpointercapture":return f=c.pointerId,yl.set(f,_l(yl.get(f)||null,e,n,a,o,c)),!0}return!1}function o_(e){var n=Ci(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,tu(e.priority,function(){if(a.tag===13){var o=vn();o=ur(o);var c=ga(a,o);c!==null&&En(c,a,o),yd(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=vd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Vi=o,a.target.dispatchEvent(o),Vi=null}else return n=ti(a),n!==null&&r_(n),e.blockedOn=a,!1;n.shift()}return!0}function l_(e,n,a){pc(e)&&a.delete(n)}function KA(){Td=!1,Vr!==null&&pc(Vr)&&(Vr=null),Mr!==null&&pc(Mr)&&(Mr=null),Pr!==null&&pc(Pr)&&(Pr=null),pl.forEach(l_),yl.forEach(l_)}function yc(e,n){e.blockedOn===n&&(e.blockedOn=null,Td||(Td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,KA)))}var _c=null;function u_(e){_c!==e&&(_c=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===e&&(_c=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],c=e[n+2];if(typeof o!="function"){if(Ed(o||a)===null)continue;break}var f=ti(a);f!==null&&(e.splice(n,3),n-=3,Ef(f,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function vl(e){function n(b){return yc(b,e)}Vr!==null&&yc(Vr,e),Mr!==null&&yc(Mr,e),Pr!==null&&yc(Pr,e),pl.forEach(n),yl.forEach(n);for(var a=0;a<xr.length;a++){var o=xr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)o_(a),a.blockedOn===null&&xr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=c[_e]||null;if(typeof f=="function")v||u_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[_e]||null)E=v.formAction;else if(Ed(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),u_(a)}}}function Ad(e){this._internalRoot=e}vc.prototype.render=Ad.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=vn();n_(a,o,e,n,null,null)},vc.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;n_(e.current,2,null,e,null,null),tc(),n[bn]=null}};function vc(e){this._internalRoot=e}vc.prototype.unstable_scheduleHydration=function(e){if(e){var n=cr();e={blockedOn:null,target:e,priority:n};for(var a=0;a<xr.length&&n!==0&&n<xr[a].priority;a++);xr.splice(a,0,e),a===0&&o_(e)}};var c_=t.version;if(c_!=="19.1.1")throw Error(s(527,c_,"19.1.1"));et.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var YA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{re=Ec.inject(YA),jt=Ec}catch{}}return Tl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",c=wp,f=Ip,v=Cp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=t_(e,1,!1,null,null,a,o,c,f,v,E,null),e[bn]=n.current,rd(e),new Ad(n)},Tl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,c="",f=wp,v=Ip,E=Cp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=t_(e,1,!0,n,a??null,o,c,f,v,E,b,L),n.context=e_(null),a=n.current,o=vn(),o=ur(o),c=_r(o),c.callback=null,vr(a,c,o),a=o,n.current.lanes=a,Ii(n,a),mi(n),e[bn]=n.current,rd(e),new vc(n)},Tl.version="19.1.1",Tl}var E_;function rS(){if(E_)return Rd.exports;E_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Rd.exports=iS(),Rd.exports}var sS=rS();const Dd="/nexsuspay/assets/nexus-pay-logo-BVjYYgse.png",aS=()=>{};var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},oS=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[i++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[i++],d=r[i++],g=r[i++],y=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const h=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},Jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const h=r[l],d=l+1<r.length,g=d?r[l+1]:0,y=l+2<r.length,_=y?r[l+2]:0,A=h>>2,C=(h&3)<<4|g>>4;let N=(g&15)<<2|_>>6,F=_&63;y||(F=64,d||(N=64)),s.push(i[A],i[C],i[N],i[F])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Zv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):oS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const h=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const C=l<r.length?i[r.charAt(l)]:64;if(++l,h==null||g==null||_==null||C==null)throw new lS;const N=h<<2|g>>4;if(s.push(N),_!==64){const F=g<<4&240|_>>2;if(s.push(F),C!==64){const Z=_<<6&192|C;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class lS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uS=function(r){const t=Zv(r);return Jv.encodeByteArray(t,!0)},zc=function(r){return uS(r).replace(/\./g,"")},Wv=function(r){try{return Jv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=()=>cS().__FIREBASE_DEFAULTS__,fS=()=>{if(typeof process>"u"||typeof T_>"u")return;const r=T_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},dS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Wv(r[1]);return t&&JSON.parse(t)},sh=()=>{try{return aS()||hS()||fS()||dS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tE=r=>sh()?.emulatorHosts?.[r],mS=r=>{const t=tE(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},eE=()=>sh()?.config,nE=r=>sh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[zc(JSON.stringify(i)),zc(JSON.stringify(d)),""].join(".")}const Cl={};function yS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Cl))Cl[t]?r.emulator.push(t):r.prod.push(t);return r}function _S(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let A_=!1;function rE(r,t){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||Cl[r]===t||Cl[r]||A_)return;Cl[r]=t;function i(N){return`__firebase__banner__${N}`}const s="__firebase__banner",h=yS().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,F){N.setAttribute("width","24"),N.setAttribute("id",F),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function _(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{A_=!0,d()},N}function A(N,F){N.setAttribute("id",F),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function C(){const N=_S(s),F=i("text"),Z=document.getElementById(F)||document.createElement("span"),rt=i("learnmore"),J=document.getElementById(rt)||document.createElement("a"),Tt=i("preprendIcon"),ht=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ct=N.element;g(ct),A(J,rt);const Ct=_();y(ht,Tt),ct.append(ht,Z,J,Ct),document.body.appendChild(ct)}h?(Z.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function ES(){const r=sh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function SS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bS(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RS(){return!ES()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wS(){try{return typeof indexedDB=="object"}catch{return!1}}function IS(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="FirebaseError";class ar extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=CS,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?DS(h,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new ar(l,g,s)}}function DS(r,t){return r.replace(NS,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const NS=/\{\$([^}]+)}/g;function OS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Bs(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const h=r[l],d=t[l];if(S_(h)&&S_(d)){if(!Bs(h,d))return!1}else if(h!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function S_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Al(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,h]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(h)}}),t}function Sl(r){const t=r.indexOf("?");if(!t)return"";const i=r.indexOf("#",t);return r.substring(t,i>0?i:void 0)}function VS(r,t){const i=new MS(r,t);return i.subscribe.bind(i)}class MS{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");PS(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=Nd),l.error===void 0&&(l.error=Nd),l.complete===void 0&&(l.complete=Nd);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PS(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(r){return r&&r._delegate?r._delegate:r}class js{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new gS;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(US(t))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=Us){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Us){return this.instances.has(t)}getOptions(t=Us){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);s===g&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&t(h,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:kS(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Us){return this.component?this.component.multipleInstances?t:Us:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kS(r){return r===Us?void 0:r}function US(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new xS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const zS={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},BS=Ot.INFO,jS={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},qS=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=jS[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dm{constructor(t){this.name=t,this._logLevel=BS,this._logHandler=qS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const HS=(r,t)=>t.some(i=>r instanceof i);let b_,R_;function GS(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FS(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,qd=new WeakMap,aE=new WeakMap,Od=new WeakMap,mm=new WeakMap;function QS(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(Gr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&sE.set(i,r)}).catch(()=>{}),mm.set(t,r),t}function KS(r){if(qd.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});qd.set(r,t)}let Hd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return qd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||aE.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Gr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function YS(r){Hd=r(Hd)}function XS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(Vd(this),t,...i);return aE.set(s,t.sort?t.sort():[t]),Gr(s)}:FS().includes(r)?function(...t){return r.apply(Vd(this),t),Gr(sE.get(this))}:function(...t){return Gr(r.apply(Vd(this),t))}}function $S(r){return typeof r=="function"?XS(r):(r instanceof IDBTransaction&&KS(r),HS(r,GS())?new Proxy(r,Hd):r)}function Gr(r){if(r instanceof IDBRequest)return QS(r);if(Od.has(r))return Od.get(r);const t=$S(r);return t!==r&&(Od.set(r,t),mm.set(t,r)),t}const Vd=r=>mm.get(r);function ZS(r,t,{blocked:i,upgrade:s,blocking:l,terminated:h}={}){const d=indexedDB.open(r,t),g=Gr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Gr(d.result),y.oldVersion,y.newVersion,Gr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const JS=["get","getKey","getAll","getAllKeys","count"],WS=["put","add","delete","clear"],Md=new Map;function w_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Md.get(t))return Md.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=WS.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||JS.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return Md.set(t,h),h}YS(r=>({...r,get:(t,i,s)=>w_(t,i)||r.get(t,i,s),has:(t,i)=>!!w_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(e1(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function e1(r){return r.getComponent()?.type==="VERSION"}const Gd="@firebase/app",I_="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new dm("@firebase/app"),n1="@firebase/app-compat",i1="@firebase/analytics-compat",r1="@firebase/analytics",s1="@firebase/app-check-compat",a1="@firebase/app-check",o1="@firebase/auth",l1="@firebase/auth-compat",u1="@firebase/database",c1="@firebase/data-connect",h1="@firebase/database-compat",f1="@firebase/functions",d1="@firebase/functions-compat",m1="@firebase/installations",g1="@firebase/installations-compat",p1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",v1="@firebase/performance-compat",E1="@firebase/remote-config",T1="@firebase/remote-config-compat",A1="@firebase/storage",S1="@firebase/storage-compat",b1="@firebase/firestore",R1="@firebase/ai",w1="@firebase/firestore-compat",I1="firebase",C1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="[DEFAULT]",D1={[Gd]:"fire-core",[n1]:"fire-core-compat",[r1]:"fire-analytics",[i1]:"fire-analytics-compat",[a1]:"fire-app-check",[s1]:"fire-app-check-compat",[o1]:"fire-auth",[l1]:"fire-auth-compat",[u1]:"fire-rtdb",[c1]:"fire-data-connect",[h1]:"fire-rtdb-compat",[f1]:"fire-fn",[d1]:"fire-fn-compat",[m1]:"fire-iid",[g1]:"fire-iid-compat",[p1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[v1]:"fire-perf-compat",[E1]:"fire-rc",[T1]:"fire-rc-compat",[A1]:"fire-gcs",[S1]:"fire-gcs-compat",[b1]:"fire-fst",[w1]:"fire-fst-compat",[R1]:"fire-vertex","fire-js":"fire-js",[I1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,N1=new Map,Qd=new Map;function C_(r,t){try{r.container.addComponent(t)}catch(i){er.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Za(r){const t=r.name;if(Qd.has(t))return er.debug(`There were multiple attempts to register component ${t}.`),!1;Qd.set(t,r);for(const i of Bc.values())C_(i,r);for(const i of N1.values())C_(i,r);return!0}function gm(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function Kn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new Hl("app","Firebase",O1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=C1;function oE(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:Fd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Fr.create("bad-app-name",{appName:String(l)});if(i||(i=eE()),!i)throw Fr.create("no-options");const h=Bc.get(l);if(h){if(Bs(i,h.options)&&Bs(s,h.config))return h;throw Fr.create("duplicate-app",{appName:l})}const d=new LS(l);for(const y of Qd.values())d.addComponent(y);const g=new V1(i,s,d);return Bc.set(l,g),g}function lE(r=Fd){const t=Bc.get(r);if(!t&&r===Fd&&eE())return oE();if(!t)throw Fr.create("no-app",{appName:r});return t}function Qr(r,t,i){let s=D1[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),er.warn(d.join(" "));return}Za(new js(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="firebase-heartbeat-database",P1=1,Pl="firebase-heartbeat-store";let Pd=null;function uE(){return Pd||(Pd=ZS(M1,P1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Pl)}catch(i){console.warn(i)}}}}).catch(r=>{throw Fr.create("idb-open",{originalErrorMessage:r.message})})),Pd}async function x1(r){try{const i=(await uE()).transaction(Pl),s=await i.objectStore(Pl).get(cE(r));return await i.done,s}catch(t){if(t instanceof ar)er.warn(t.message);else{const i=Fr.create("idb-get",{originalErrorMessage:t?.message});er.warn(i.message)}}}async function D_(r,t){try{const s=(await uE()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(t,cE(r)),await s.done}catch(i){if(i instanceof ar)er.warn(i.message);else{const s=Fr.create("idb-set",{originalErrorMessage:i?.message});er.warn(s.message)}}}function cE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=1024,U1=30;class L1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new B1(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=N_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>U1){const l=j1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){er.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N_(),{heartbeatsToSend:i,unsentEntries:s}=z1(this._heartbeatsCache.heartbeats),l=zc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return er.warn(t),""}}}function N_(){return new Date().toISOString().substring(0,10)}function z1(r,t=k1){const i=[];let s=r.slice();for(const l of r){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),O_(i)>t){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),O_(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class B1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wS()?IS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await x1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function O_(r){return zc(JSON.stringify({version:2,heartbeats:r})).length}function j1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r){Za(new js("platform-logger",t=>new t1(t),"PRIVATE")),Za(new js("heartbeat",t=>new L1(t),"PRIVATE")),Qr(Gd,I_,r),Qr(Gd,I_,"esm2020"),Qr("fire-js","")}q1("");var H1="firebase",G1="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(H1,G1,"app");function hE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F1=hE,fE=new Hl("auth","Firebase",hE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new dm("@firebase/auth");function Q1(r,...t){jc.logLevel<=Ot.WARN&&jc.warn(`Auth (${ao}): ${r}`,...t)}function Dc(r,...t){jc.logLevel<=Ot.ERROR&&jc.error(`Auth (${ao}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(r,...t){throw pm(r,...t)}function pi(r,...t){return pm(r,...t)}function dE(r,t,i){const s={...F1(),[t]:i};return new Hl("auth","Firebase",s).create(t,{appName:r.name})}function Kr(r){return dE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return fE.create(r,...t)}function pt(r,t,...i){if(!r)throw pm(t,...i)}function Ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Dc(t),new Error(t)}function nr(r,t){r||Ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){return typeof self<"u"&&self.location?.href||""}function K1(){return V_()==="http:"||V_()==="https:"}function V_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K1()||AS()||"connection"in navigator)?navigator.onLine:!0}function X1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,i){this.shortDelay=t,this.longDelay=i,nr(i>t,"Short delay should be less than long delay!"),this.isMobile=vS()||SS()}get(){return Y1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(r,t){nr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J1=new Fl(3e4,6e4);function Fs(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ns(r,t,i,s,l={}){return gE(r,l,async()=>{let h={},d={};s&&(t==="GET"?d=s:h={body:JSON.stringify(s)});const g=Gl({key:r.config.apiKey,...d}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:y,...h};return TS()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&so(r.emulatorConfig.host)&&(_.credentials="include"),mE.fetch()(await pE(r,r.config.apiHost,i,g),_)})}async function gE(r,t,i){r._canInitEmulator=!1;const s={...$1,...t};try{const l=new tb(r),h=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw Tc(r,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const g=h.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Tc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Tc(r,"user-disabled",d);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw dE(r,A,_);Zn(r,A)}}catch(l){if(l instanceof ar)throw l;Zn(r,"network-request-failed",{message:String(l)})}}async function ah(r,t,i,s,l={}){const h=await ns(r,t,i,s,l);return"mfaPendingCredential"in h&&Zn(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function pE(r,t,i,s){const l=`${t}${i}?${s}`,h=r,d=h.config.emulator?ym(r.config,l):`${r.config.apiScheme}://${l}`;return Z1.includes(i)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}function W1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(pi(this.auth,"network-request-failed")),J1.get())})}}function Tc(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=pi(r,t,s);return l.customData._tokenResponse=i,l}function M_(r){return r!==void 0&&r.enterprise!==void 0}class eb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return W1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nb(r,t){return ns(r,"GET","/v2/recaptchaConfig",Fs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(r,t){return ns(r,"POST","/v1/accounts:delete",t)}async function qc(r,t){return ns(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rb(r,t=!1){const i=Tn(r),s=await i.getIdToken(t),l=_m(s);pt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:s,authTime:Dl(xd(l.auth_time)),issuedAtTime:Dl(xd(l.iat)),expirationTime:Dl(xd(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function xd(r){return Number(r)*1e3}function _m(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Wv(i);return l?JSON.parse(l):(Dc("Failed to decode base64 JWT payload"),null)}catch(l){return Dc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function P_(r){const t=_m(r);return pt(t,"internal-error"),pt(typeof t.exp<"u","internal-error"),pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof ar&&sb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function sb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(r){const t=r.auth,i=await r.getIdToken(),s=await xl(r,qc(t,{idToken:i}));pt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?yE(l.providerUserInfo):[],d=lb(r.providerData,h),g=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!d?.length,_=g?y:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Yd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function ob(r){const t=Tn(r);await Hc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lb(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function yE(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(r,t){const i=await gE(r,{},async()=>{const s=Gl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,d=await pE(r,l,"/v1/token",`key=${h}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&so(r.emulatorConfig.host)&&(y.credentials="include"),mE.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function cb(r,t){return ns(r,"POST","/v2/accounts:revokeToken",Fs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pt(t.idToken,"internal-error"),pt(typeof t.idToken<"u","internal-error"),pt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):P_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){pt(t.length!==0,"internal-error");const i=P_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:h}=await ub(t,i);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:h}=i,d=new Qa;return s&&(pt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(pt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(pt(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(r,t){pt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Yn{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new ab(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await xl(this,this.stsTokenManager.getToken(this.auth,t));return pt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return rb(this,t)}reload(){return ob(this)}_assign(t){this!==t&&(pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Yn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await Hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Kr(this.auth));const t=await this.getIdToken();return await xl(this,ib(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,h=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:C,emailVerified:N,isAnonymous:F,providerData:Z,stsTokenManager:rt}=i;pt(C&&rt,t,"internal-error");const J=Qa.fromJSON(this.name,rt);pt(typeof C=="string",t,"internal-error"),Ur(s,t.name),Ur(l,t.name),pt(typeof N=="boolean",t,"internal-error"),pt(typeof F=="boolean",t,"internal-error"),Ur(h,t.name),Ur(d,t.name),Ur(g,t.name),Ur(y,t.name),Ur(_,t.name),Ur(A,t.name);const Tt=new Yn({uid:C,auth:t,email:l,emailVerified:N,displayName:s,isAnonymous:F,photoURL:d,phoneNumber:h,tenantId:g,stsTokenManager:J,createdAt:_,lastLoginAt:A});return Z&&Array.isArray(Z)&&(Tt.providerData=Z.map(ht=>({...ht}))),y&&(Tt._redirectEventId=y),Tt}static async _fromIdTokenResponse(t,i,s=!1){const l=new Qa;l.updateFromServerResponse(i);const h=new Yn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Hc(h),h}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];pt(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?yE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,g=new Qa;g.updateFromIdToken(s);const y=new Yn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Yd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function Wi(r){nr(r instanceof Function,"Expected a class definition");let t=x_.get(r);return t?(nr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,x_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}_E.type="NONE";const k_=_E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(r,t,i){return`firebase:${r}:${t}:${i}`}class Ka{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=Nc(this.userKey,l.apiKey,h),this.fullPersistenceKey=Nc("persistence",l.apiKey,h),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await qc(this.auth,{idToken:t}).catch(()=>{});return i?Yn._fromGetAccountInfoResponse(this.auth,i,t):null}return Yn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new Ka(Wi(k_),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let h=l[0]||Wi(k_);const d=Nc(s,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const A=await _._get(d);if(A){let C;if(typeof A=="string"){const N=await qc(t,{idToken:A}).catch(()=>{});if(!N)break;C=await Yn._fromGetAccountInfoResponse(t,N,A)}else C=Yn._fromJSON(t,A);_!==h&&(g=C),h=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new Ka(h,t,s):(h=y[0],g&&await h._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==h)try{await _._remove(d)}catch{}})),new Ka(h,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(AE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bE(t))return"Blackberry";if(RE(t))return"Webos";if(EE(t))return"Safari";if((t.includes("chrome/")||TE(t))&&!t.includes("edge/"))return"Chrome";if(SE(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function vE(r=tn()){return/firefox\//i.test(r)}function EE(r=tn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function TE(r=tn()){return/crios\//i.test(r)}function AE(r=tn()){return/iemobile/i.test(r)}function SE(r=tn()){return/android/i.test(r)}function bE(r=tn()){return/blackberry/i.test(r)}function RE(r=tn()){return/webos/i.test(r)}function vm(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function hb(r=tn()){return vm(r)&&!!window.navigator?.standalone}function fb(){return bS()&&document.documentMode===10}function wE(r=tn()){return vm(r)||SE(r)||RE(r)||bE(r)||/windows phone/i.test(r)||AE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(r,t=[]){let i;switch(r){case"Browser":i=U_(tn());break;case"Worker":i=`${U_(tn())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=h=>new Promise((d,g)=>{try{const y=t(h);d(y)}catch(y){g(y)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(r,t={}){return ns(r,"GET","/v2/passwordPolicy",Fs(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=6;class pb{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??gb,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new db(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Wi(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ka.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await qc(this,{idToken:t}),s=await Yn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Kn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Hc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=X1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kn(this.app))return Promise.reject(Kr(this));const i=t?Tn(t):null;return i&&pt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kn(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mb(this),i=new pb(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Hl("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await cb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Wi(t)||this._popupRedirectResolver;pt(i,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[Wi(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const h=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(g,this,"internal-error"),g.then(()=>{d||h(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,s,l);return()=>{d=!0,y()}}else{const y=t.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=IE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Q1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function oo(r){return Tn(r)}class L_{constructor(t){this.auth=t,this.observer=null,this.addObserver=VS(i=>this.observer=i)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _b(r){oh=r}function CE(r){return oh.loadJS(r)}function vb(){return oh.recaptchaEnterpriseScript}function Eb(){return oh.gapiScript}function Tb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Ab{constructor(){this.enterprise=new Sb}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class Sb{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const bb="recaptcha-enterprise",DE="NO_RECAPTCHA";class Rb{constructor(t){this.type=bb,this.auth=oo(t)}async verify(t="verify",i=!1){async function s(h){if(!i){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(d,g)=>{nb(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new eb(y);return h.tenantId==null?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,d(_.siteKey)}}).catch(y=>{g(y)})})}function l(h,d,g){const y=window.grecaptcha;M_(y)?y.enterprise.ready(()=>{y.enterprise.execute(h,{action:t}).then(_=>{d(_)}).catch(()=>{d(DE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ab().execute("siteKey",{action:"verify"}):new Promise((h,d)=>{s(this.auth).then(g=>{if(!i&&M_(window.grecaptcha))l(g,h,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=vb();y.length!==0&&(y+=g),CE(y).then(()=>{l(g,h,d)}).catch(_=>{d(_)})}}).catch(g=>{d(g)})})}}async function z_(r,t,i,s=!1,l=!1){const h=new Rb(r);let d;if(l)d=DE;else try{d=await h.verify(i)}catch{d=await h.verify(i,!0)}const g={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function B_(r,t,i,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await z_(r,t,i,i==="getOobCode");return s(r,h)}else return s(r,t).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await z_(r,t,i,i==="getOobCode");return s(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(r,t){const i=gm(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),h=i.getOptions();if(Bs(h,t??{}))return l;Zn(l,"already-initialized")}return i.initialize({options:t})}function Ib(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map(Wi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Cb(r,t,i){const s=oo(r);pt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,h=NE(t),{host:d,port:g}=Db(t),y=g===null?"":`:${g}`,_={url:`${h}//${d}${y}/`},A=Object.freeze({host:d,port:g,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){pt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),pt(Bs(_,s.config.emulator)&&Bs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,so(d)?(iE(`${h}//${d}${y}`),rE("Auth",!0)):Nb()}function NE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Db(r){const t=NE(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:j_(s.substr(h.length+1))}}else{const[h,d]=s.split(":");return{host:h,port:j_(d)}}}function j_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Nb(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Ji("not implemented")}_getIdTokenResponse(t){return Ji("not implemented")}_linkToIdToken(t,i){return Ji("not implemented")}_getReauthenticationResolver(t){return Ji("not implemented")}}async function Ob(r,t){return ns(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(r,t){return ah(r,"POST","/v1/accounts:signInWithPassword",Fs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(r,t){return ah(r,"POST","/v1/accounts:signInWithEmailLink",Fs(r,t))}async function Pb(r,t){return ah(r,"POST","/v1/accounts:signInWithEmailLink",Fs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Em{constructor(t,i,s,l=null){super("password",s),this._email=t,this._password=i,this._tenantId=l}static _fromEmailAndPassword(t,i){return new kl(t,i,"password")}static _fromEmailAndCode(t,i,s=null){return new kl(t,i,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(t,i,"signInWithPassword",Vb);case"emailLink":return Mb(t,{email:this._email,oobCode:this._password});default:Zn(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const s={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(t,s,"signUpPassword",Ob);case"emailLink":return Pb(t,{idToken:i,email:this._email,oobCode:this._password});default:Zn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,t){return ah(r,"POST","/v1/accounts:signInWithIdp",Fs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="http://localhost";class qs extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Zn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...h}=i;if(!s||!l)return null;const d=new qs(s,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ya(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,Ya(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ya(t,i)}buildRequest(){const t={requestUri:xb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Gl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ub(r){const t=Al(Sl(r)).link,i=t?Al(Sl(t)).deep_link_id:null,s=Al(Sl(r)).deep_link_id;return(s?Al(Sl(s)).link:null)||s||i||t||r}class Tm{constructor(t){const i=Al(Sl(t)),s=i.apiKey??null,l=i.oobCode??null,h=kb(i.mode??null);pt(s&&l&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=Ub(t);try{return new Tm(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(t,i){return kl._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const s=Tm.parseLink(i);return pt(s,"argument-error"),kl._fromEmailAndCode(t,s.code,s.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends OE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Ql{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return qs._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return Br.credential(i,s)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ql{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jr.credential(t.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Ql{constructor(){super("twitter.com")}static credential(t,i){return qs._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return qr.credentialFromTaggedObject(t)}static credentialFromError(t){return qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return qr.credential(i,s)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const h=await Yn._fromIdTokenResponse(t,s,l),d=q_(s);return new Ja({user:h,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=q_(s);return new Ja({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function q_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends ar{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new Gc(t,i,s,l)}}function VE(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(r,h,t,s):h})}async function Lb(r,t,i=!1){const s=await xl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return Ja._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(r,t,i=!1){const{auth:s}=r;if(Kn(s.app))return Promise.reject(Kr(s));const l="reauthenticate";try{const h=await xl(r,VE(s,l,t,r),i);pt(h.idToken,s,"internal-error");const d=_m(h.idToken);pt(d,s,"internal-error");const{sub:g}=d;return pt(r.uid===g,s,"user-mismatch"),Ja._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Zn(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(r,t,i=!1){if(Kn(r.app))return Promise.reject(Kr(r));const s="signIn",l=await VE(r,s,t),h=await Ja._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(h.user),h}async function Bb(r,t){return ME(oo(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(r){const t=oo(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function qb(r,t,i){return Kn(r.app)?Promise.reject(Kr(r)):Bb(Tn(r),lo.credential(t,i)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jb(r),s})}function Hb(r,t,i,s){return Tn(r).onIdTokenChanged(t,i,s)}function Gb(r,t,i){return Tn(r).beforeAuthStateChanged(t,i)}function Fb(r){return Tn(r).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1e3,Kb=10;class xE extends PE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},h=this.storage.getItem(s);fb()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Kb):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},Qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}xE.type="LOCAL";const Yb=xE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends PE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}kE.type="SESSION";const UE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new lh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:h}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,h)),y=await Xb(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((g,y)=>{const _=Am("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const N=C;if(N.data.eventId===_)switch(N.data.status){case"ack":clearTimeout(A),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),g(N.data.response);break;default:clearTimeout(A),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function Zb(r){yi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function Jb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wb(){return navigator?.serviceWorker?.controller||null}function tR(){return LE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="firebaseLocalStorageDb",eR=1,Qc="firebaseLocalStorage",BE="fbase_key";class Kl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function uh(r,t){return r.transaction([Qc],t?"readwrite":"readonly").objectStore(Qc)}function nR(){const r=indexedDB.deleteDatabase(zE);return new Kl(r).toPromise()}function Xd(){const r=indexedDB.open(zE,eR);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qc,{keyPath:BE})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qc)?t(s):(s.close(),await nR(),t(await Xd()))})})}async function H_(r,t,i){const s=uh(r,!0).put({[BE]:t,value:i});return new Kl(s).toPromise()}async function iR(r,t){const i=uh(r,!1).get(t),s=await new Kl(i).toPromise();return s===void 0?null:s.value}function G_(r,t){const i=uh(r,!0).delete(t);return new Kl(i).toPromise()}const rR=800,sR=3;class jE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>sR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(tR()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Jb(),!this.activeServiceWorker)return;this.sender=new $b(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Wb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Xd();return await H_(t,Fc,"1"),await G_(t,Fc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>H_(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>iR(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>G_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=uh(l,!1).getAll();return new Kl(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jE.type="LOCAL";const aR=jE;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(r,t){return t?Wi(t):(pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Em{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ya(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ya(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ya(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function lR(r){return ME(r.auth,new Sm(r),r.bypassAuthState)}function uR(r){const{auth:t,user:i}=r;return pt(i,t,"internal-error"),zb(i,new Sm(r),r.bypassAuthState)}async function cR(r){const{auth:t,user:i}=r;return pt(i,t,"internal-error"),Lb(i,new Sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(t,i,s,l,h=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:h,error:d,type:g}=t;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return uR;default:Zn(this.auth,"internal-error")}}resolve(t){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Fl(2e3,1e4);class Fa extends qE{constructor(t,i,s,l,h){super(t,i,l,h),this.provider=s,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pt(t,this.auth,"internal-error"),t}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const t=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hR.get())};t()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="pendingRedirect",Oc=new Map;class dR extends qE{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Oc.get(this.auth._key());if(!t){try{const s=await mR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Oc.set(this.auth._key(),t)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mR(r,t){const i=yR(t),s=pR(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function gR(r,t){Oc.set(r._key(),t)}function pR(r){return Wi(r._redirectPersistence)}function yR(r){return Nc(fR,r.config.apiKey,r.name)}async function _R(r,t,i=!1){if(Kn(r.app))return Promise.reject(Kr(r));const s=oo(r),l=oR(s,t),d=await new dR(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=600*1e3;class ER{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!TR(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!HE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(pi(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=vR&&this.cachedEventUids.clear(),this.cachedEventUids.has(F_(t))}saveEventToCache(t){this.cachedEventUids.add(F_(t)),this.lastProcessedEventTime=Date.now()}}function F_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function HE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function TR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(r,t={}){return ns(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bR=/^https?/;async function RR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await AR(r);for(const i of t)try{if(wR(i))return}catch{}Zn(r,"unauthorized-domain")}function wR(r){const t=Kd(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!bR.test(i))return!1;if(SR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Fl(3e4,6e4);function Q_(){const r=yi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function CR(r){return new Promise((t,i)=>{function s(){Q_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Q_(),i(pi(r,"network-request-failed"))},timeout:IR.get()})}if(yi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(yi().gapi?.load)s();else{const l=Tb("iframefcb");return yi()[l]=()=>{gapi.load?s():i(pi(r,"network-request-failed"))},CE(`${Eb()}?onload=${l}`).catch(h=>i(h))}}).catch(t=>{throw Vc=null,t})}let Vc=null;function DR(r){return Vc=Vc||CR(r),Vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Fl(5e3,15e3),OR="__/auth/iframe",VR="emulator/auth/iframe",MR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xR(r){const t=r.config;pt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?ym(t,VR):`https://${r.config.authDomain}/${OR}`,s={apiKey:t.apiKey,appName:r.name,v:ao},l=PR.get(r.config.apiHost);l&&(s.eid=l);const h=r._getFrameworks();return h.length&&(s.fw=h.join(",")),`${i}?${Gl(s).slice(1)}`}async function kR(r){const t=await DR(r),i=yi().gapi;return pt(i,r,"internal-error"),t.open({where:document.body,url:xR(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MR,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const d=pi(r,"network-request-failed"),g=yi().setTimeout(()=>{h(d)},NR.get());function y(){yi().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{h(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LR=500,zR=600,BR="_blank",jR="http://localhost";class K_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qR(r,t,i,s=LR,l=zR){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...UR,width:s.toString(),height:l.toString(),top:h,left:d},_=tn().toLowerCase();i&&(g=TE(_)?BR:i),vE(_)&&(t=t||jR,y.scrollbars="yes");const A=Object.entries(y).reduce((N,[F,Z])=>`${N}${F}=${Z},`,"");if(hb(_)&&g!=="_self")return HR(t||"",g),new K_(null);const C=window.open(t||"",g,A);pt(C,r,"popup-blocked");try{C.focus()}catch{}return new K_(C)}function HR(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="__/auth/handler",FR="emulator/auth/handler",QR=encodeURIComponent("fac");async function Y_(r,t,i,s,l,h){pt(r.config.authDomain,r,"auth-domain-config-required"),pt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:ao,eventId:l};if(t instanceof OE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",OS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,C]of Object.entries({}))d[A]=C}if(t instanceof Ql){const A=t.getScopes().filter(C=>C!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const y=await r._getAppCheckToken(),_=y?`#${QR}=${encodeURIComponent(y)}`:"";return`${KR(r)}?${Gl(g).slice(1)}${_}`}function KR({config:r}){return r.emulator?ym(r,FR):`https://${r.authDomain}/${GR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class YR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UE,this._completeRedirectFn=_R,this._overrideRedirectResult=gR}async _openPopup(t,i,s,l){nr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await Y_(t,i,s,Kd(),l);return qR(t,h,Am())}async _openRedirect(t,i,s,l){await this._originValidation(t);const h=await Y_(t,i,s,Kd(),l);return Zb(h),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:h}=this.eventManagers[i];return l?Promise.resolve(l):(nr(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await kR(t),s=new ER(t);return i.register("authEvent",l=>(pt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(kd,{type:kd},l=>{const h=l?.[0]?.[kd];h!==void 0&&i(!!h),Zn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=RR(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return wE()||EE()||vm()}}const XR=YR;var X_="@firebase/auth",$_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JR(r){Za(new js("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;pt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IE(r)},_=new yb(s,l,h,y);return Ib(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Za(new js("auth-internal",t=>{const i=oo(t.getProvider("auth").getImmediate());return(s=>new $R(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(X_,$_,ZR(r)),Qr(X_,$_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=300,tw=nE("authIdTokenMaxAge")||WR;let Z_=null;const ew=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>tw)return;const l=i?.token;Z_!==l&&(Z_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function nw(r=lE()){const t=gm(r,"auth");if(t.isInitialized())return t.getImmediate();const i=wb(r,{popupRedirectResolver:XR,persistence:[aR,Yb,UE]}),s=nE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const d=ew(h.toString());Gb(i,d,()=>d(i.currentUser)),Hb(i,g=>d(g))}}const l=tE("auth");return l&&Cb(i,`http://${l}`),i}function iw(){return document.getElementsByTagName("head")?.[0]??document}_b({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const h=pi("internal-error");h.customData=l,i(h)},s.type="text/javascript",s.charset="UTF-8",iw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JR("Browser");var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,GE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,S){function w(){}w.prototype=S.prototype,M.D=S.prototype,M.prototype=new w,M.prototype.constructor=M,M.C=function(O,V,P){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return S.prototype[V].apply(O,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,w){w||(w=0);var O=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)O[V]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(V=0;16>V;++V)O[V]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=M.g[0],w=M.g[1],V=M.g[2];var P=M.g[3],R=S+(P^w&(V^P))+O[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[1]+3905402710&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[2]+606105819&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[3]+3250441966&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[5]+1200080426&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[6]+2821735955&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[7]+4249261313&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[9]+2336552879&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[10]+4294925233&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[11]+2304563134&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[13]+4254626195&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[14]+2792965006&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[15]+1236535329&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(V^P&(w^V))+O[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[6]+3225465664&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[11]+643717713&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[0]+3921069994&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[10]+38016083&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[15]+3634488961&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[4]+3889429448&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[14]+3275163606&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[3]+4107603335&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[8]+1163531501&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[2]+4243563512&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[7]+1735328473&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[12]+2368359562&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(w^V^P)+O[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[8]+2272392833&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[11]+1839030562&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[14]+4259657740&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[4]+1272893353&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[7]+4139469664&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[10]+3200236656&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[0]+3936430074&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[3]+3572445317&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[6]+76029189&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[12]+3873151461&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[15]+530742520&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[2]+3299628645&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(V^(w|~P))+O[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[7]+1126891415&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[14]+2878612391&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[5]+4237533241&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[3]+2399980690&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[10]+4293915773&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[1]+2240044497&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[15]+4264355552&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[6]+2734768916&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[13]+1309151649&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[11]+3174756917&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[2]+718787259&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}s.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var w=S-this.blockSize,O=this.B,V=this.h,P=0;P<S;){if(V==0)for(;P<=w;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<S;)if(O[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<S;)if(O[V++]=M[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=S},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var w=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=w&255,w/=256;for(this.u(M),M=Array(16),S=w=0;4>S;++S)for(var O=0;32>O;O+=8)M[w++]=this.g[S]>>>O&255;return M};function h(M,S){var w=g;return Object.prototype.hasOwnProperty.call(w,M)?w[M]:w[M]=S(M)}function d(M,S){this.h=S;for(var w=[],O=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;O&&P==S||(w[V]=P,O=!1)}this.g=w}var g={};function y(M){return-128<=M&&128>M?h(M,function(S){return new d([S|0],0>S?-1:0)}):new d([M|0],0>M?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return C;if(0>M)return J(_(-M));for(var S=[],w=1,O=0;M>=w;O++)S[O]=M/w|0,w*=4294967296;return new d(S,0)}function A(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return J(A(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(S,8)),O=C,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),R=parseInt(M.substring(V,V+P),S);8>P?(P=_(Math.pow(S,P)),O=O.j(P).add(_(R))):(O=O.j(w),O=O.add(_(R)))}return O}var C=y(0),N=y(1),F=y(16777216);r=d.prototype,r.m=function(){if(rt(this))return-J(this).m();for(var M=0,S=1,w=0;w<this.g.length;w++){var O=this.i(w);M+=(0<=O?O:4294967296+O)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(Z(this))return"0";if(rt(this))return"-"+J(this).toString(M);for(var S=_(Math.pow(M,6)),w=this,O="";;){var V=Ct(w,S).g;w=Tt(w,V.j(S));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(M);if(w=V,Z(w))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function Z(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function rt(M){return M.h==-1}r.l=function(M){return M=Tt(this,M),rt(M)?-1:Z(M)?0:1};function J(M){for(var S=M.g.length,w=[],O=0;O<S;O++)w[O]=~M.g[O];return new d(w,~M.h).add(N)}r.abs=function(){return rt(this)?J(this):this},r.add=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0,V=0;V<=S;V++){var P=O+(this.i(V)&65535)+(M.i(V)&65535),R=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=R>>>16,P&=65535,R&=65535,w[V]=R<<16|P}return new d(w,w[w.length-1]&-2147483648?-1:0)};function Tt(M,S){return M.add(J(S))}r.j=function(M){if(Z(this)||Z(M))return C;if(rt(this))return rt(M)?J(this).j(J(M)):J(J(this).j(M));if(rt(M))return J(this.j(J(M)));if(0>this.l(F)&&0>M.l(F))return _(this.m()*M.m());for(var S=this.g.length+M.g.length,w=[],O=0;O<2*S;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var P=this.i(O)>>>16,R=this.i(O)&65535,oe=M.i(V)>>>16,te=M.i(V)&65535;w[2*O+2*V]+=R*te,ht(w,2*O+2*V),w[2*O+2*V+1]+=P*te,ht(w,2*O+2*V+1),w[2*O+2*V+1]+=R*oe,ht(w,2*O+2*V+1),w[2*O+2*V+2]+=P*oe,ht(w,2*O+2*V+2)}for(O=0;O<S;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=S;O<2*S;O++)w[O]=0;return new d(w,0)};function ht(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ct(M,S){this.g=M,this.h=S}function Ct(M,S){if(Z(S))throw Error("division by zero");if(Z(M))return new ct(C,C);if(rt(M))return S=Ct(J(M),S),new ct(J(S.g),J(S.h));if(rt(S))return S=Ct(M,J(S)),new ct(J(S.g),S.h);if(30<M.g.length){if(rt(M)||rt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=N,O=S;0>=O.l(M);)w=Et(w),O=Et(O);var V=Pt(w,1),P=Pt(O,1);for(O=Pt(O,2),w=Pt(w,2);!Z(O);){var R=P.add(O);0>=R.l(M)&&(V=V.add(w),P=R),O=Pt(O,1),w=Pt(w,1)}return S=Tt(M,V.j(S)),new ct(V,S)}for(V=C;0<=M.l(S);){for(w=Math.max(1,Math.floor(M.m()/S.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=_(w),R=P.j(S);rt(R)||0<R.l(M);)w-=O,P=_(w),R=P.j(S);Z(P)&&(P=N),V=V.add(P),M=Tt(M,R)}return new ct(V,M)}r.A=function(M){return Ct(this,M).h},r.and=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)&M.i(O);return new d(w,this.h&M.h)},r.or=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)|M.i(O);return new d(w,this.h|M.h)},r.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)^M.i(O);return new d(w,this.h^M.h)};function Et(M){for(var S=M.g.length+1,w=[],O=0;O<S;O++)w[O]=M.i(O)<<1|M.i(O-1)>>>31;return new d(w,M.h)}function Pt(M,S){var w=S>>5;S%=32;for(var O=M.g.length-w,V=[],P=0;P<O;P++)V[P]=0<S?M.i(P+w)>>>S|M.i(P+w+1)<<32-S:M.i(P+w);return new d(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,GE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,Yr=d}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,bl,QE,Mc,$d,KE,YE,XE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var p=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var k=u[T];if(!(k in p))break t;p=p[k]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&t(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,k={next:function(){if(!T&&p<u.length){var j=p++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,p){return u.call.apply(u.bind,arguments)}function C(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,T),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function N(u,m,p){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:C,N.apply(null,arguments)}function F(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function Z(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,k,j){for(var tt=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)tt[kt-2]=arguments[kt];return m.prototype[k].apply(T,tt)}}function rt(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function J(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(y(T)){const k=u.length||0,j=T.length||0;u.length=k+j;for(let tt=0;tt<j;tt++)u[k+tt]=T[tt]}else u.push(T)}}class Tt{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ht(u){return/^[\s\xa0]*$/.test(u)}function ct(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Ct(u){return Ct[" "](u),u}Ct[" "]=function(){};var Et=ct().indexOf("Gecko")!=-1&&!(ct().toLowerCase().indexOf("webkit")!=-1&&ct().indexOf("Edge")==-1)&&!(ct().indexOf("Trident")!=-1||ct().indexOf("MSIE")!=-1)&&ct().indexOf("Edge")==-1;function Pt(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function M(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function S(u){const m={};for(const p in u)m[p]=u[p];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let p,T;for(let k=1;k<arguments.length;k++){T=arguments[k];for(p in T)u[p]=T[p];for(let j=0;j<w.length;j++)p=w[j],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function V(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function P(u){g.setTimeout(()=>{throw u},0)}function R(){var u=xt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class oe{constructor(){this.h=this.g=null}add(m,p){const T=te.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var te=new Tt(()=>new H,u=>u.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let et,lt=!1,xt=new oe,I=()=>{const u=g.Promise.resolve(void 0);et=()=>{u.then(X)}};var X=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(p){P(p)}var m=te;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function Rt(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Et){t:{try{Ct(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_t[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rt.aa.h.call(this)}}Z(Rt,W);var _t={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function An(u,m,p,T,k){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=k,this.key=++Kt,this.da=this.fa=!1}function Jn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ln(u){this.src=u,this.g={},this.h=0}Ln.prototype.add=function(u,m,p,T,k){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var tt=ee(u,m,T,k);return-1<tt?(m=u[tt],p||(m.fa=!1)):(m=new An(m,this.src,j,!!T,k),m.fa=p,u.push(m)),m};function it(u,m){var p=m.type;if(p in u.g){var T=u.g[p],k=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=k)&&Array.prototype.splice.call(T,k,1),j&&(Jn(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ee(u,m,p,T){for(var k=0;k<u.length;++k){var j=u[k];if(!j.da&&j.listener==m&&j.capture==!!p&&j.ha==T)return k}return-1}var hn="closure_lm_"+(1e6*Math.random()|0),en={};function is(u,m,p,T,k){if(Array.isArray(m)){for(var j=0;j<m.length;j++)is(u,m[j],p,T,k);return null}return p=Ri(p),u&&u[ye]?u.K(m,p,_(T)?!!T.capture:!1,k):be(u,m,p,!1,T,k)}function be(u,m,p,T,k,j){if(!m)throw Error("Invalid event type");var tt=_(k)?!!k.capture:!!k,kt=Ke(u);if(kt||(u[hn]=kt=new Ln(u)),p=kt.add(m,p,T,tt,j),p.proxy)return p;if(T=Sn(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ft||(k=tt),k===void 0&&(k=!1),u.addEventListener(m.toString(),T,k);else if(u.attachEvent)u.attachEvent(Bn(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Sn(){function u(p){return m.call(u.src,u.listener,p)}const m=lr;return u}function or(u,m,p,T,k){if(Array.isArray(m))for(var j=0;j<m.length;j++)or(u,m[j],p,T,k);else T=_(T)?!!T.capture:!!T,p=Ri(p),u&&u[ye]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],p=ee(j,p,T,k),-1<p&&(Jn(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ke(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ee(m,p,T,k)),(p=-1<u?m[u]:null)&&zn(p))}function zn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ye])it(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(Bn(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=Ke(m))?(it(p,u),p.h==0&&(p.src=null,m[hn]=null)):Jn(u)}}}function Bn(u){return u in en?en[u]:en[u]="on"+u}function lr(u,m){if(u.da)u=!0;else{m=new Rt(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&zn(u),u=p.call(T,m)}return u}function Ke(u){return u=u[hn],u instanceof Ln?u:null}var bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ri(u){return typeof u=="function"?u:(u[bi]||(u[bi]=function(m){return u.handleEvent(m)}),u[bi])}function re(){nt.call(this),this.i=new Ln(this),this.M=this,this.F=null}Z(re,nt),re.prototype[ye]=!0,re.prototype.removeEventListener=function(u,m,p,T){or(this,u,m,p,T)};function jt(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var k=m;m=new W(T,u),O(m,k)}if(k=!0,p)for(var j=p.length-1;0<=j;j--){var tt=m.g=p[j];k=fn(tt,T,!0,m)&&k}if(tt=m.g=u,k=fn(tt,T,!0,m)&&k,k=fn(tt,T,!1,m)&&k,p)for(j=0;j<p.length;j++)tt=m.g=p[j],k=fn(tt,T,!1,m)&&k}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)Jn(p[T]);delete u.g[m],u.h--}}this.F=null},re.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},re.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function fn(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,j=0;j<m.length;++j){var tt=m[j];if(tt&&!tt.da&&tt.capture==p){var kt=tt.listener,we=tt.ha||tt.src;tt.fa&&it(u.i,tt),k=kt.call(we,T)!==!1&&k}}return k&&!T.defaultPrevented}function Ye(u,m,p){if(typeof u=="function")p&&(u=N(u,p));else if(u&&typeof u.handleEvent=="function")u=N(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Wl(u){u.g=Ye(()=>{u.g=null,u.i&&(u.i=!1,Wl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bh extends nt{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(u){nt.call(this),this.h=u,this.g={}}Z(rs,nt);var ss=[];function as(u){Pt(u.g,function(m,p){this.g.hasOwnProperty(p)&&zn(m)},u),u.g={}}rs.prototype.N=function(){rs.aa.N.call(this),as(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=g.JSON.stringify,$s=g.JSON.parse,os=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function go(){}go.prototype.h=null;function po(u){return u.h||(u.h=u.i())}function yo(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){W.call(this,"d")}Z(Ii,W);function _o(){W.call(this,"c")}Z(_o,W);var Wn={},vo=null;function ur(){return vo=vo||new re}Wn.La="serverreachability";function Zs(u){W.call(this,Wn.La,u)}Z(Zs,W);function cr(u){const m=ur();jt(m,new Zs(m))}Wn.STAT_EVENT="statevent";function tu(u,m){W.call(this,Wn.STAT_EVENT,u),this.stat=m}Z(tu,W);function se(u){const m=ur();jt(m,new tu(m,u))}Wn.Ma="timingevent";function Re(u,m){W.call(this,Wn.Ma,u),this.size=m}Z(Re,W);function _e(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function Eo(u,m,p,T,k,j){u.info(function(){if(u.g)if(j)for(var tt="",kt=j.split("&"),we=0;we<kt.length;we++){var Ut=kt[we].split("=");if(1<Ut.length){var Pe=Ut[0];Ut=Ut[1];var Ie=Pe.split("_");tt=2<=Ie.length&&Ie[1]=="type"?tt+(Pe+"="+Ut+"&"):tt+(Pe+"=redacted&")}}else tt=null;else tt=j;return"XMLHTTP REQ ("+T+") [attempt "+k+"]: "+m+`
`+p+`
`+tt})}function Rh(u,m,p,T,k,j,tt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+k+"]: "+m+`
`+p+`
`+j+" "+tt})}function hr(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ls(u,p)+(T?" "+T:"")})}function eu(u,m){u.info(function(){return"TIMEOUT: "+m})}bn.prototype.info=function(){};function ls(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var k=T[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var tt=1;tt<k.length;tt++)k[tt]=""}}}}return jn(p)}catch{return m}}var fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}Z(ei,go),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function nn(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}var To={},Js={};function qn(u,m,p){u.L=1,u.v=ds(dn(m)),u.m=p,u.P=!0,Di(u,null)}function Di(u,m){u.F=Date.now(),us(u),u.A=dn(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Io(p.i,"t",T),u.C=0,p=u.j.J,u.h=new fe,u.g=yu(u.j,p?m:null,!u.m),0<u.O&&(u.M=new bh(N(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(ss[0]=k.toString()),k=ss);for(var j=0;j<k.length;j++){var tt=is(p,k[j],T||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),cr(),Eo(u.i,u.u,u.A,u.l,u.R,u.m)}nn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Cn(u)==3?m.j():this.Y(u)},nn.prototype.Y=function(u){try{if(u==this.g)t:{const Ie=Cn(this.g);var m=this.g.Ba();const Ui=this.g.Z();if(!(3>Ie)&&(Ie!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||Ie!=4||m==7||(m==8||0>=Ui?cr(3):cr(2)),dr(this);var p=this.g.Z();this.X=p;e:if(nu(this)){var T=uu(this.g);u="";var k=T.length,j=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ze(this),ni(this);var tt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==k-1)});T.length=0,this.h.g+=u,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=p==200,Rh(this.i,this.u,this.A,this.l,this.R,Ie,p),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,we=this.g;if((kt=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ht(kt)){var Ut=kt;break e}}Ut=null}if(p=Ut)hr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,p);else{this.o=!1,this.s=3,se(12),ze(this),ni(this);break t}}if(this.P){p=!0;let Be;for(;!this.J&&this.C<tt.length;)if(Be=iu(this,tt),Be==Js){Ie==4&&(this.s=4,se(14),p=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Be==To){this.s=4,se(15),hr(this.i,this.l,tt,"[Invalid Chunk]"),p=!1;break}else hr(this.i,this.l,Be,null),cs(this,Be);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||tt.length!=0||this.h.h||(this.s=1,se(16),p=!1),this.o=this.o&&p,!p)hr(this.i,this.l,tt,"[Invalid Chunked Response]"),ze(this),ni(this);else if(0<tt.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),Ts(Pe),Pe.M=!0,se(11))}}else hr(this.i,this.l,tt,null),cs(this,tt);Ie==4&&ze(this),this.o&&!this.J&&(Ie==4?mu(this.j,this):(this.o=!1,us(this)))}else Nh(this.g),p==400&&0<tt.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),ze(this),ni(this)}}}catch{}finally{}};function nu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function iu(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Js:(p=Number(m.substring(p,T)),isNaN(p)?To:(T+=1,T+p>m.length?Js:(m=m.slice(T,T+p),u.C=T+p,m)))}nn.prototype.cancel=function(){this.J=!0,ze(this)};function us(u){u.S=Date.now()+u.I,ru(u,u.I)}function ru(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_e(N(u.ba,u),m)}function dr(u){u.B&&(g.clearTimeout(u.B),u.B=null)}nn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eu(this.i,this.A),this.L!=2&&(cr(),se(17)),ze(this),this.s=2,ni(this)):ru(this,this.S-u)};function ni(u){u.j.G==0||u.J||mu(u.j,u)}function ze(u){dr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,as(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function cs(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||Ao(p.h,u))){if(!u.K&&Ao(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var k=T;if(k[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ca(p),la(p);else break t;Vo(p),se(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=_e(N(p.Za,p),6e3));if(1>=ta(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ki(p,11)}else if((u.K||p.g==u)&&ca(p),!ht(m))for(k=p.Da.g.parse(m),m=0;m<k.length;m++){let Ut=k[m];if(p.T=Ut[0],Ut=Ut[1],p.G==2)if(Ut[0]=="c"){p.K=Ut[1],p.ia=Ut[2];const Pe=Ut[3];Pe!=null&&(p.la=Pe,p.j.info("VER="+p.la));const Ie=Ut[4];Ie!=null&&(p.Aa=Ie,p.j.info("SVER="+p.Aa));const Ui=Ut[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(T=1.5*Ui,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Be=u.g;if(Be){const ui=Be.g?Be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var j=T.h;j.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ea(j,j.h),j.h=null))}if(T.D){const Po=Be.g?Be.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(T.ya=Po,Yt(T.I,T.D,Po))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var tt=u;if(T.qa=pu(T,T.J?T.ia:null,T.W),tt.K){rn(T.h,tt);var kt=tt,we=T.L;we&&(kt.I=we),kt.B&&(dr(kt),us(kt)),T.g=tt}else fu(T);0<p.i.length&&ua(p)}else Ut[0]!="stop"&&Ut[0]!="close"||ki(p,7);else p.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?ki(p,7):No(p):Ut[0]!="noop"&&p.l&&p.l.ta(Ut),p.v=0)}}cr(4)}catch{}}var su=class{constructor(u,m){this.g=u,this.map=m}};function Ni(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ws(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ta(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ea(u,m){u.g?u.g.add(m):u.h=m}function rn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ni.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function So(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return rt(u.i)}function wh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function bo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=na(u),T=wh(u),k=T.length,j=0;j<k;j++)m.call(void 0,T[j],p&&p[j],u)}var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),k=null;if(0<=T){var j=u[p].substring(0,T);k=u[p].substring(T+1)}else j=u[p];m(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ve(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ve){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,mr(this,u.s),this.l=u.l;var m=u.i,p=new Vi;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),Oi(this,p),this.m=u.m}else u&&(m=String(u).match(hs))?(this.h=!1,fs(this,m[1]||"",!0),this.o=Rn(m[2]||""),this.g=Rn(m[3]||"",!0),mr(this,m[4]),this.l=Rn(m[5]||"",!0),Oi(this,m[6]||"",!0),this.m=Rn(m[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}ve.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ms(m,Ro,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ms(m,Ro,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(ms(p,p.charAt(0)=="/"?Ch:wo,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",ms(p,ia)),u.join("")};function dn(u){return new ve(u)}function fs(u,m,p){u.j=p?Rn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function mr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Oi(u,m,p){m instanceof Vi?(u.i=m,ou(u.i,u.h)):(p||(m=ms(m,Dh)),u.i=new Vi(m,u.h))}function Yt(u,m,p){u.i.set(m,p)}function ds(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Rn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ms(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,au),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function au(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ro=/[#\/\?@]/g,wo=/[#\?:]/g,Ch=/[#\?]/g,Dh=/[#\?@]/g,ia=/#/g;function Vi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ih(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}r=Vi.prototype,r.add=function(u,m){wn(this),this.i=null,u=ii(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function Mi(u,m){wn(u),m=ii(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Pi(u,m){return wn(u),m=ii(u,m),u.g.has(m)}r.forEach=function(u,m){wn(this),this.g.forEach(function(p,T){p.forEach(function(k){u.call(m,k,T,this)},this)},this)},r.na=function(){wn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const k=u[T];for(let j=0;j<k.length;j++)p.push(m[T])}return p},r.V=function(u){wn(this);let m=[];if(typeof u=="string")Pi(this,u)&&(m=m.concat(this.g.get(ii(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},r.set=function(u,m){return wn(this),this.i=null,u=ii(this,u),Pi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Io(u,m,p){Mi(u,m),0<p.length&&(u.i=null,u.g.set(ii(u,m),rt(p)),u.h+=p.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const j=encodeURIComponent(String(T)),tt=this.V(T);for(T=0;T<tt.length;T++){var k=j;tt[T]!==""&&(k+="="+encodeURIComponent(String(tt[T]))),u.push(k)}}return this.i=u.join("&")};function ii(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ou(u,m){m&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(p,T){var k=T.toLowerCase();T!=k&&(Mi(this,T),Io(this,k,p))},u)),u.j=m}function gs(u,m){const p=new bn;if(g.Image){const T=new Image;T.onload=F(In,p,"TestLoadImage: loaded",!0,m,T),T.onerror=F(In,p,"TestLoadImage: error",!1,m,T),T.onabort=F(In,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=F(In,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Hn(u,m){const p=new bn,T=new AbortController,k=setTimeout(()=>{T.abort(),In(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(k),j.ok?In(p,"TestPingServer: ok",!0,m):In(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),In(p,"TestPingServer: error",!1,m)})}function In(u,m,p,T,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),T(p)}catch{}}function ps(){this.g=new os}function ri(u,m,p){const T=p||"";try{bo(u,function(k,j){let tt=k;_(k)&&(tt=jn(k)),m.push(T+j+"="+encodeURIComponent(tt))})}catch(k){throw m.push(T+"type="+encodeURIComponent("_badmap")),k}}function gr(u){this.l=u.Ub||null,this.j=u.eb||!1}Z(gr,go),gr.prototype.g=function(){return new xi(this.l,this.j)},gr.prototype.i=function(u){return function(){return u}}({});function xi(u,m){re.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(xi,re),r=xi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ai(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Co(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Co(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?si(this):ai(this),this.readyState==3&&Co(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,si(this))},r.Qa=function(u){this.g&&(this.response=u,si(this))},r.ga=function(){this.g&&si(this)};function si(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ai(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Do(u){let m="";return Pt(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function Me(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=Do(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Yt(u,m,p))}function Ht(u){re.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(Ht,re);var ra=/^https?$/i,ys=["POST","PUT"];r=Ht.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?po(this.o):po(ti),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){lu(this,j);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var k in T)p.set(k,T[k]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())p.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),k=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ys,m,void 0))||T||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,tt]of p)this.g.setRequestHeader(j,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){lu(this,j)}};function lu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,sa(u),oi(u)}function sa(u){u.A||(u.A=!0,jt(u,"complete"),jt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,jt(this,"complete"),jt(this,"abort"),oi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),Ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},r.bb=function(){aa(this)};function aa(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)Ye(u.Ea,0,u);else if(jt(u,"readystatechange"),Cn(u)==4){u.h=!1;try{const tt=u.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=tt===0){var k=String(u.D).match(hs)[1]||null;!k&&g.self&&g.self.location&&(k=g.self.location.protocol.slice(0,-1)),T=!ra.test(k?k.toLowerCase():"")}p=T}if(p)jt(u,"complete"),jt(u,"success");else{u.m=6;try{var j=2<Cn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",sa(u)}}finally{oi(u)}}}}function oi(u,m){if(u.g){_s(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||jt(u,"ready");try{p.onreadystatechange=T}catch{}}}function _s(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),$s(m)}};function uu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Nh(u){const m={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ht(u[T]))continue;var p=V(u[T]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=m[k]||[];m[k]=j,j.push(p)}M(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function oa(u){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,u),this.cb=vs("retryDelaySeedMs",1e4,u),this.Wa=vs("forwardChannelMaxRetries",2,u),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(u&&u.concurrentRequestLimit),this.Da=new ps,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=oa.prototype,r.la=8,r.G=1,r.connect=function(u,m,p,T){se(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=pu(this,null,this.W),ua(this)};function No(u){if(cu(u),u.G==3){var m=u.U++,p=dn(u.I);if(Yt(p,"SID",u.K),Yt(p,"RID",m),Yt(p,"TYPE","terminate"),Es(u,p),m=new nn(u,u.j,m),m.L=2,m.v=ds(dn(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),us(m)}gu(u)}function la(u){u.g&&(Ts(u),u.g.cancel(),u.g=null)}function cu(u){la(u),u.u&&(g.clearTimeout(u.u),u.u=null),ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function ua(u){if(!Ws(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||I(),lt||(et(),lt=!0),xt.add(m,u),u.B=0}}function Oh(u,m){return ta(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_e(N(u.Ga,u,m),Mo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new nn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),O(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=hu(this,k,m),p=dn(this.I),Yt(p,"RID",u),Yt(p,"CVER",22),this.D&&Yt(p,"X-HTTP-Session-Id",this.D),Es(this,p),j&&(this.O?m="headers="+encodeURIComponent(String(Do(j)))+"&"+m:this.m&&Me(p,this.m,j)),ea(this.h,k),this.Ua&&Yt(p,"TYPE","init"),this.P?(Yt(p,"$req",m),Yt(p,"SID","null"),k.T=!0,qn(k,p,null)):qn(k,p,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||Ws(this.h)||Oo(this))};function Oo(u,m){var p;m?p=m.l:p=u.U++;const T=dn(u.I);Yt(T,"SID",u.K),Yt(T,"RID",p),Yt(T,"AID",u.T),Es(u,T),u.m&&u.o&&Me(T,u.m,u.o),p=new nn(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=hu(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ea(u.h,p),qn(p,T,m)}function Es(u,m){u.H&&Pt(u.H,function(p,T){Yt(m,T,p)}),u.l&&bo({},function(p,T){Yt(m,T,p)})}function hu(u,m,p){p=Math.min(u.i.length,p);var T=u.l?N(u.l.Na,u.l,u):null;t:{var k=u.i;let j=-1;for(;;){const tt=["count="+p];j==-1?0<p?(j=k[0].g,tt.push("ofs="+j)):j=0:tt.push("ofs="+j);let kt=!0;for(let we=0;we<p;we++){let Ut=k[we].g;const Pe=k[we].map;if(Ut-=j,0>Ut)j=Math.max(0,k[we].g-100),kt=!1;else try{ri(Pe,tt,"req"+Ut+"_")}catch{T&&T(Pe)}}if(kt){T=tt.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function fu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||I(),lt||(et(),lt=!0),xt.add(m,u),u.v=0}}function Vo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_e(N(u.Fa,u),Mo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,du(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_e(N(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),la(this),du(this))};function Ts(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function du(u){u.g=new nn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=dn(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),Es(u,m),u.m&&u.o&&Me(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ds(dn(m)),p.m=null,p.P=!0,Di(p,u)}r.Za=function(){this.C!=null&&(this.C=null,la(this),Vo(this),se(19))};function ca(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function mu(u,m){var p=null;if(u.g==m){ca(u),Ts(u),u.g=null;var T=2}else if(Ao(u.h,m))p=m.D,rn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;T=ur(),jt(T,new Re(T,p)),ua(u)}else fu(u);else if(k=m.s,k==3||k==0&&0<m.X||!(T==1&&Oh(u,m)||T==2&&Vo(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),k){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function Mo(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function ki(u,m){if(u.j.info("Error code "+m),m==2){var p=N(u.fb,u),T=u.Xa;const k=!T;T=new ve(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||fs(T,"https"),ds(T),k?gs(T.toString(),p):Hn(T.toString(),p)}else se(2);u.G=0,u.l&&u.l.sa(m),gu(u),cu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function gu(u){if(u.G=0,u.ka=[],u.l){const m=So(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,rt(u.i),u.i.length=0),u.l.ra()}}function pu(u,m,p){var T=p instanceof ve?dn(p):new ve(p);if(T.g!="")m&&(T.g=m+"."+T.g),mr(T,T.s);else{var k=g.location;T=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var j=new ve(null);T&&fs(j,T),m&&(j.g=m),k&&mr(j,k),p&&(j.l=p),T=j}return p=u.D,m=u.ya,p&&m&&Yt(T,p,m),Yt(T,"VER",u.la),Es(u,T),T}function yu(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ht(new gr({eb:p})):new Ht(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ha(){}ha.prototype.g=function(u,m){return new sn(u,m)};function sn(u,m){re.call(this),this.g=new oa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ht(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ht(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new li(this)}Z(sn,re),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){No(this.g)},sn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=jn(u),u=p);m.i.push(new su(m.Ya++,u)),m.G==3&&ua(m)},sn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,sn.aa.N.call(this)};function vu(u){Ii.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Z(vu,Ii);function Eu(){_o.call(this),this.status=1}Z(Eu,_o);function li(u){this.g=u}Z(li,_u),li.prototype.ua=function(){jt(this.g,"a")},li.prototype.ta=function(u){jt(this.g,new vu(u))},li.prototype.sa=function(u){jt(this.g,new Eu)},li.prototype.ra=function(){jt(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,XE=function(){return new ha},YE=function(){return ur()},KE=Wn,$d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fr.NO_ERROR=0,fr.TIMEOUT=8,fr.HTTP_ERROR=6,Mc=fr,Ci.COMPLETE="complete",QE=Ci,yo.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",re.prototype.listen=re.prototype.K,bl=yo,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,FE=Ht}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const W_="@firebase/firestore",tv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new dm("@firebase/firestore");function ja(){return Hs.logLevel}function st(r,...t){if(Hs.logLevel<=Ot.DEBUG){const i=t.map(bm);Hs.debug(`Firestore (${uo}): ${r}`,...i)}}function ir(r,...t){if(Hs.logLevel<=Ot.ERROR){const i=t.map(bm);Hs.error(`Firestore (${uo}): ${r}`,...i)}}function Wa(r,...t){if(Hs.logLevel<=Ot.WARN){const i=t.map(bm);Hs.warn(`Firestore (${uo}): ${r}`,...i)}}function bm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,$E(r,s,i)}function $E(r,t,i){let s=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw ir(s),new Error(s)}function Gt(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||$E(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends ar{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(Je.UNAUTHENTICATED))}shutdown(){}}class sw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class aw{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Gt(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,i(y)):Promise.resolve();let h=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new tr,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const y=h;t.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},g=y=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new tr)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string",31837,{l:s}),new ZE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class ow{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lw{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new ow(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ev{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uw{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Gt(this.o===void 0,3512);const s=h=>{h.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>s(h))};const l=h=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Gt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new ev(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=cw(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<i&&(s+=t.charAt(l[h]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function Zd(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),h=t.charAt(s);if(l!==h)return Ud(l)===Ud(h)?Vt(l,h):Ud(l)?1:-1}return Vt(r.length,t.length)}const hw=55296,fw=57343;function Ud(r){const t=r.charCodeAt(0);return t>=hw&&t<=fw}function to(r,t,i){return r.length===t.length&&r.every((s,l)=>i(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class gi{constructor(t,i,s){i===void 0?i=0:i>t.length&&yt(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&yt(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return gi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof gi?t.forEach(s=>{i.push(s)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const h=gi.compareSegments(t.get(l),i.get(l));if(h!==0)return h}return Vt(t.length,i.length)}static compareSegments(t,i){const s=gi.isNumericId(t),l=gi.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?gi.extractNumericId(t).compare(gi.extractNumericId(i)):Zd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Yr.fromString(t.substring(4,t.length-2))}}class ne extends gi{construct(t,i,s){return new ne(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new ot($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new ne(i)}static emptyPath(){return new ne([])}}const dw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends gi{construct(t,i,s){return new Fe(t,i,s)}static isValidIdentifier(t){return dw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new Fe([nv])}static fromServerFormat(t){const i=[];let s="",l=0;const h=()=>{if(s.length===0)throw new ot($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ot($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ot($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(h(),l++)}if(h(),d)throw new ot($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fe(i)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.path=t}static fromPath(t){return new dt(ne.fromString(t))}static fromName(t){return new dt(ne.fromString(t).popFirst(5))}static empty(){return new dt(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ne.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new dt(new ne(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(r,t,i){if(!i)throw new ot($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function mw(r,t,i,s){if(t===!0&&s===!0)throw new ot($.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function iv(r){if(!dt.isDocumentKey(r))throw new ot($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function rv(r){if(dt.isDocumentKey(r))throw new ot($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function WE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function wm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function rr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=wm(r);throw new ot($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,t){const i={typeString:r};return t&&(i.value=t),i}function Yl(r,t){if(!WE(r))throw new ot($.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,h="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${s}' field to equal '${h.value}'`;break}}if(i)throw new ot($.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=-62135596800,av=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*av);return new ie(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<sv)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Yl(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:Se("string",ie._jsonSchemaVersion),seconds:Se("number"),nanoseconds:Se("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new ie(0,0))}static max(){return new At(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function gw(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new ie(i+1,0):new ie(i,s));return new $r(l,dt.empty(),t)}function pw(r){return new $r(r.readTime,r.key,Ul)}class $r{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new $r(At.min(),dt.empty(),Ul)}static max(){return new $r(At.max(),dt.empty(),Ul)}}function yw(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=dt.comparator(r.documentKey,t.documentKey),i!==0?i:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==_w)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Y((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(s,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Y?i:Y.resolve(i)}catch(i){return Y.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.reject(i)}static resolve(t){return new Y((i,s)=>{i(t)})}static reject(t){return new Y((i,s)=>{s(t)})}static waitFor(t){return new Y((i,s)=>{let l=0,h=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},y=>s(y))}),d=!0,h===l&&i()})}static or(t){let i=Y.resolve(!1);for(const s of t)i=i.next(l=>l?Y.resolve(l):s());return i}static forEach(t,i){const s=[];return t.forEach((l,h)=>{s.push(i.call(this,l,h))}),this.waitFor(s)}static mapArray(t,i){return new Y((s,l)=>{const h=t.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const _=y;i(t[_]).next(A=>{d[_]=A,++g,g===h&&s(d)},A=>l(A))}})}static doWhile(t,i){return new Y((s,l)=>{const h=()=>{t()===!0?i().next(()=>{h()},l):s()};h()})}}function Ew(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ho(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=-1;function hh(r){return r==null}function Kc(r){return r===0&&1/r==-1/0}function Tw(r){return typeof r=="number"&&Number.isInteger(r)&&!Kc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="";function Aw(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=ov(t)),t=Sw(r.get(i),t);return ov(t)}function Sw(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const h=r.charAt(l);switch(h){case"\0":i+="";break;case tT:i+="";break;default:i+=h}}return i}function ov(r){return r+tT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function Qs(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function eT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,i){this.comparator=t,this.root=i||Ge.EMPTY}insert(t,i){return new ue(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,s)=>(t(i,s),!1))}toString(){const t=[];return this.inorderTraversal((i,s)=>(t.push(`${i}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sc(this.root,t,this.comparator,!0)}}class Sc{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=i?s(t.key,i):1,i&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ge{constructor(t,i,s,l,h){this.key=t,this.value=i,this.color=s??Ge.RED,this.left=l??Ge.EMPTY,this.right=h??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,h){return new Ge(t??this.key,i??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,i,s),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Ge.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,i,s,l,h){return this}insert(t,i,s){return new Ge(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,s)=>(t(i),!1))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(t){return new uv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(s=>{i=i.add(s)}),i}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ve(this.comparator);return i.data=t,i}}class uv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this.fields=t,t.sort(Fe.comparator)}static empty(){return new Xn([])}unionWith(t){let i=new Ve(Fe.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new Xn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return to(this.fields,t.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new nT("Invalid base64 string: "+h):h}}(t);return new Qe(i)}static fromUint8Array(t){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(t);return new Qe(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const bw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(r){if(Gt(!!r,39018),typeof r=="string"){let t=0;const i=bw.exec(r);if(Gt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:pe(r.seconds),nanos:pe(r.nanos)}}function pe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Jr(r){return typeof r=="string"?Qe.fromBase64String(r):Qe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="server_timestamp",rT="__type__",sT="__previous_value__",aT="__local_write_time__";function Cm(r){return(r?.mapValue?.fields||{})[rT]?.stringValue===iT}function fh(r){const t=r.mapValue.fields[sT];return Cm(t)?fh(t):t}function Ll(r){const t=Zr(r.mapValue.fields[aT].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,i,s,l,h,d,g,y,_,A){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=A}}const Yc="(default)";class zl{constructor(t,i){this.projectId=t,this.database=i||Yc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(t){return t instanceof zl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",ww="__max__",bc={mapValue:{}},lT="__vector__",Xc="value";function Wr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cm(r)?4:Cw(r)?9007199254740991:Iw(r)?10:11:yt(28295,{value:r})}function Ai(r,t){if(r===t)return!0;const i=Wr(r);if(i!==Wr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ll(r).isEqual(Ll(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Zr(l.timestampValue),g=Zr(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,h){return Jr(l.bytesValue).isEqual(Jr(h.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,h){return pe(l.geoPointValue.latitude)===pe(h.geoPointValue.latitude)&&pe(l.geoPointValue.longitude)===pe(h.geoPointValue.longitude)}(r,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return pe(l.integerValue)===pe(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=pe(l.doubleValue),g=pe(h.doubleValue);return d===g?Kc(d)===Kc(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return to(r.arrayValue.values||[],t.arrayValue.values||[],Ai);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(lv(d)!==lv(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!Ai(d[y],g[y])))return!1;return!0}(r,t);default:return yt(52216,{left:r})}}function Bl(r,t){return(r.values||[]).find(i=>Ai(i,t))!==void 0}function eo(r,t){if(r===t)return 0;const i=Wr(r),s=Wr(t);if(i!==s)return Vt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return function(h,d){const g=pe(h.integerValue||h.doubleValue),y=pe(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(r,t);case 3:return cv(r.timestampValue,t.timestampValue);case 4:return cv(Ll(r),Ll(t));case 5:return Zd(r.stringValue,t.stringValue);case 6:return function(h,d){const g=Jr(h),y=Jr(d);return g.compareTo(y)}(r.bytesValue,t.bytesValue);case 7:return function(h,d){const g=h.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const A=Vt(g[_],y[_]);if(A!==0)return A}return Vt(g.length,y.length)}(r.referenceValue,t.referenceValue);case 8:return function(h,d){const g=Vt(pe(h.latitude),pe(d.latitude));return g!==0?g:Vt(pe(h.longitude),pe(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return hv(r.arrayValue,t.arrayValue);case 10:return function(h,d){const g=h.fields||{},y=d.fields||{},_=g[Xc]?.arrayValue,A=y[Xc]?.arrayValue,C=Vt(_?.values?.length||0,A?.values?.length||0);return C!==0?C:hv(_,A)}(r.mapValue,t.mapValue);case 11:return function(h,d){if(h===bc.mapValue&&d===bc.mapValue)return 0;if(h===bc.mapValue)return 1;if(d===bc.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),_=d.fields||{},A=Object.keys(_);y.sort(),A.sort();for(let C=0;C<y.length&&C<A.length;++C){const N=Zd(y[C],A[C]);if(N!==0)return N;const F=eo(g[y[C]],_[A[C]]);if(F!==0)return F}return Vt(y.length,A.length)}(r.mapValue,t.mapValue);default:throw yt(23264,{he:i})}}function cv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const i=Zr(r),s=Zr(t),l=Vt(i.seconds,s.seconds);return l!==0?l:Vt(i.nanos,s.nanos)}function hv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const h=eo(i[l],s[l]);if(h)return h}return Vt(i.length,s.length)}function no(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=Zr(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Jr(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return dt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",l=!0;for(const h of i.values||[])l?l=!1:s+=",",s+=Jd(h);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of s)h?h=!1:l+=",",l+=`${d}:${Jd(i.fields[d])}`;return l+"}"}(r.mapValue):yt(61005,{value:r})}function Pc(r){switch(Wr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fh(r);return t?16+Pc(t):16;case 5:return 2*r.stringValue.length;case 6:return Jr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+Pc(h),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return Qs(s.fields,(h,d)=>{l+=h.length+Pc(d)}),l}(r.mapValue);default:throw yt(13486,{value:r})}}function Wd(r){return!!r&&"integerValue"in r}function Dm(r){return!!r&&"arrayValue"in r}function fv(r){return!!r&&"nullValue"in r}function dv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function xc(r){return!!r&&"mapValue"in r}function Iw(r){return(r?.mapValue?.fields||{})[oT]?.stringValue===lT}function Nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Qs(r.mapValue.fields,(i,s)=>t.mapValue.fields[i]=Nl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Nl(r.arrayValue.values[i]);return t}return{...r}}function Cw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ww}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.value=t}static empty(){return new kn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!xc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nl(i)}setAll(t){let i=Fe.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=Nl(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,s,l)}delete(t){const i=this.field(t.popLast());xc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ai(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];xc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){Qs(i,(l,h)=>t[l]=h);for(const l of s)delete t[l]}clone(){return new kn(Nl(this.value))}}function uT(r){const t=[];return Qs(r.fields,(i,s)=>{const l=new Fe([i]);if(xc(s)){const h=uT(s.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)}),new Xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t,i,s,l,h,d,g){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(t){return new We(t,0,At.min(),At.min(),At.min(),kn.empty(),0)}static newFoundDocument(t,i,s,l){return new We(t,1,i,At.min(),s,l,0)}static newNoDocument(t,i){return new We(t,2,i,At.min(),At.min(),kn.empty(),0)}static newUnknownDocument(t,i){return new We(t,3,i,At.min(),At.min(),kn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof We&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,i){this.position=t,this.inclusive=i}}function mv(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const h=t[l],d=r.position[l];if(h.field.isKeyField()?s=dt.comparator(dt.fromName(d.referenceValue),i.key):s=eo(d,i.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function gv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ai(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,i="asc"){this.field=t,this.dir=i}}function Dw(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class Ne extends cT{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new Ow(t,i,s):i==="array-contains"?new Pw(t,s):i==="in"?new xw(t,s):i==="not-in"?new kw(t,s):i==="array-contains-any"?new Uw(t,s):new Ne(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new Vw(t,s):new Mw(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(eo(i,this.value)):i!==null&&Wr(this.value)===Wr(i)&&this.matchesComparison(eo(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends cT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Si(t,i)}matches(t){return hT(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hT(r){return r.op==="and"}function fT(r){return Nw(r)&&hT(r)}function Nw(r){for(const t of r.filters)if(t instanceof Si)return!1;return!0}function tm(r){if(r instanceof Ne)return r.field.canonicalString()+r.op.toString()+no(r.value);if(fT(r))return r.filters.map(t=>tm(t)).join(",");{const t=r.filters.map(i=>tm(i)).join(",");return`${r.op}(${t})`}}function dT(r,t){return r instanceof Ne?function(s,l){return l instanceof Ne&&s.op===l.op&&s.field.isEqual(l.field)&&Ai(s.value,l.value)}(r,t):r instanceof Si?function(s,l){return l instanceof Si&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,d,g)=>h&&dT(d,l.filters[g]),!0):!1}(r,t):void yt(19439)}function mT(r){return r instanceof Ne?function(i){return`${i.field.canonicalString()} ${i.op} ${no(i.value)}`}(r):r instanceof Si?function(i){return i.op.toString()+" {"+i.getFilters().map(mT).join(" ,")+"}"}(r):"Filter"}class Ow extends Ne{constructor(t,i,s){super(t,i,s),this.key=dt.fromName(s.referenceValue)}matches(t){const i=dt.comparator(t.key,this.key);return this.matchesComparison(i)}}class Vw extends Ne{constructor(t,i){super(t,"in",i),this.keys=gT("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class Mw extends Ne{constructor(t,i){super(t,"not-in",i),this.keys=gT("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function gT(r,t){return(t.arrayValue?.values||[]).map(i=>dt.fromName(i.referenceValue))}class Pw extends Ne{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Dm(i)&&Bl(i.arrayValue,this.value)}}class xw extends Ne{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Bl(this.value.arrayValue,i)}}class kw extends Ne{constructor(t,i){super(t,"not-in",i)}matches(t){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Bl(this.value.arrayValue,i)}}class Uw extends Ne{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Dm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Bl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t,i=null,s=[],l=[],h=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function pv(r,t=null,i=[],s=[],l=null,h=null,d=null){return new Lw(r,t,i,s,l,h,d)}function Nm(r){const t=St(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(s=>tm(s)).join(","),i+="|ob:",i+=t.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),hh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>no(s)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>no(s)).join(",")),t.Te=i}return t.Te}function Om(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Dw(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!dT(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!gv(r.startAt,t.startAt)&&gv(r.endAt,t.endAt)}function em(r){return dt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(t,i=null,s=[],l=[],h=null,d="F",g=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zw(r,t,i,s,l,h,d,g){return new dh(r,t,i,s,l,h,d,g)}function Vm(r){return new dh(r)}function yv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Bw(r){return r.collectionGroup!==null}function Ol(r){const t=St(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),i.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ve(Fe.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Zc(h,s))}),i.has(Fe.keyField().canonicalString())||t.Ie.push(new Zc(Fe.keyField(),s))}return t.Ie}function _i(r){const t=St(r);return t.Ee||(t.Ee=jw(t,Ol(r))),t.Ee}function jw(r,t){if(r.limitType==="F")return pv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new Zc(l.field,h)});const i=r.endAt?new $c(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new $c(r.startAt.position,r.startAt.inclusive):null;return pv(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function nm(r,t,i){return new dh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function mh(r,t){return Om(_i(r),_i(t))&&r.limitType===t.limitType}function pT(r){return`${Nm(_i(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>mT(l)).join(", ")}]`),hh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>no(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>no(l)).join(",")),`Target(${s})`}(_i(r))}; limitType=${r.limitType})`}function gh(r,t){return t.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):dt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(r,t)&&function(s,l){for(const h of Ol(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,y){const _=mv(d,g,y);return d.inclusive?_<=0:_<0}(s.startAt,Ol(s),l)||s.endAt&&!function(d,g,y){const _=mv(d,g,y);return d.inclusive?_>=0:_>0}(s.endAt,Ol(s),l))}(r,t)}function qw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yT(r){return(t,i)=>{let s=!1;for(const l of Ol(r)){const h=Hw(l,t,i);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function Hw(r,t,i){const s=r.field.isKeyField()?dt.comparator(t.key,i.key):function(h,d,g){const y=d.data.field(h),_=g.data.field(h);return y!==null&&_!==null?eo(y,_):yt(42886)}(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Qs(this.inner,(i,s)=>{for(const[l,h]of s)t(l,h)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new ue(dt.comparator);function sr(){return Gw}const _T=new ue(dt.comparator);function Rl(...r){let t=_T;for(const i of r)t=t.insert(i.key,i);return t}function vT(r){let t=_T;return r.forEach((i,s)=>t=t.insert(i,s.overlayedDocument)),t}function Ls(){return Vl()}function ET(){return Vl()}function Vl(){return new Ks(r=>r.toString(),(r,t)=>r.isEqual(t))}const Fw=new ue(dt.comparator),Qw=new Ve(dt.comparator);function Mt(...r){let t=Qw;for(const i of r)t=t.add(i);return t}const Kw=new Ve(Vt);function Yw(){return Kw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(t)?"-0":t}}function TT(r){return{integerValue:""+r}}function Xw(r,t){return Tw(t)?TT(t):Mm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this._=void 0}}function $w(r,t,i){return r instanceof Jc?function(l,h){const d={fields:{[rT]:{stringValue:iT},[aT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Cm(h)&&(h=fh(h)),h&&(d.fields[sT]=h),{mapValue:d}}(i,t):r instanceof jl?ST(r,t):r instanceof ql?bT(r,t):function(l,h){const d=AT(l,h),g=_v(d)+_v(l.Ae);return Wd(d)&&Wd(l.Ae)?TT(g):Mm(l.serializer,g)}(r,t)}function Zw(r,t,i){return r instanceof jl?ST(r,t):r instanceof ql?bT(r,t):i}function AT(r,t){return r instanceof Wc?function(s){return Wd(s)||function(h){return!!h&&"doubleValue"in h}(s)}(t)?t:{integerValue:0}:null}class Jc extends ph{}class jl extends ph{constructor(t){super(),this.elements=t}}function ST(r,t){const i=RT(t);for(const s of r.elements)i.some(l=>Ai(l,s))||i.push(s);return{arrayValue:{values:i}}}class ql extends ph{constructor(t){super(),this.elements=t}}function bT(r,t){let i=RT(t);for(const s of r.elements)i=i.filter(l=>!Ai(l,s));return{arrayValue:{values:i}}}class Wc extends ph{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function _v(r){return pe(r.integerValue||r.doubleValue)}function RT(r){return Dm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Jw(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof jl&&l instanceof jl||s instanceof ql&&l instanceof ql?to(s.elements,l.elements,Ai):s instanceof Wc&&l instanceof Wc?Ai(s.Ae,l.Ae):s instanceof Jc&&l instanceof Jc}(r.transform,t.transform)}class Ww{constructor(t,i){this.version=t,this.transformResults=i}}class $n{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new $n}static exists(t){return new $n(void 0,t)}static updateTime(t){return new $n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class yh{}function wT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Pm(r.key,$n.none()):new Xl(r.key,r.data,$n.none());{const i=r.data,s=kn.empty();let l=new Ve(Fe.comparator);for(let h of t.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?s.delete(h):s.set(h,d),l=l.add(h)}return new Ys(r.key,s,new Xn(l.toArray()),$n.none())}}function tI(r,t,i){r instanceof Xl?function(l,h,d){const g=l.value.clone(),y=Ev(l.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,i):r instanceof Ys?function(l,h,d){if(!kc(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=Ev(l.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(IT(l)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,t,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Ml(r,t,i,s){return r instanceof Xl?function(h,d,g,y){if(!kc(h.precondition,d))return g;const _=h.value.clone(),A=Tv(h.fieldTransforms,y,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(r,t,i,s):r instanceof Ys?function(h,d,g,y){if(!kc(h.precondition,d))return g;const _=Tv(h.fieldTransforms,y,d),A=d.data;return A.setAll(IT(h)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(C=>C.field))}(r,t,i,s):function(h,d,g){return kc(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,i)}function eI(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),h=AT(s.transform,l||null);h!=null&&(i===null&&(i=kn.empty()),i.set(s.field,h))}return i||null}function vv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&to(s,l,(h,d)=>Jw(h,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xl extends yh{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ys extends yh{constructor(t,i,s,l,h=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function IT(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}}),t}function Ev(r,t,i){const s=new Map;Gt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const h=r[l],d=h.transform,g=t.data.field(h.field);s.set(h.field,Zw(d,g,i[l]))}return s}function Tv(r,t,i){const s=new Map;for(const l of r){const h=l.transform,d=i.data.field(l.field);s.set(l.field,$w(h,d,t))}return s}class Pm extends yh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends yh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&tI(h,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=Ml(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=Ml(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=ET();return this.mutations.forEach(l=>{const h=t.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const y=wT(d,g);y!==null&&s.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(At.min())}),s}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Mt())}isEqual(t){return this.batchId===t.batchId&&to(this.mutations,t.mutations,(i,s)=>vv(i,s))&&to(this.baseMutations,t.baseMutations,(i,s)=>vv(i,s))}}class xm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){Gt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=function(){return Fw}();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,s[d].version);return new xm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,zt;function aI(r){switch(r){case $.OK:return yt(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function CT(r){if(r===void 0)return ir("GRPC error has no .code"),$.UNKNOWN;switch(r){case Ae.OK:return $.OK;case Ae.CANCELLED:return $.CANCELLED;case Ae.UNKNOWN:return $.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return $.INTERNAL;case Ae.UNAVAILABLE:return $.UNAVAILABLE;case Ae.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ae.NOT_FOUND:return $.NOT_FOUND;case Ae.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ae.ABORTED:return $.ABORTED;case Ae.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ae.DATA_LOSS:return $.DATA_LOSS;default:return yt(39323,{code:r})}}(zt=Ae||(Ae={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Yr([4294967295,4294967295],0);function Av(r){const t=oI().encode(r),i=new GE;return i.update(t),new Uint8Array(i.digest())}function Sv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new Yr([i,s],0),new Yr([l,h],0)]}class km{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new wl(`Invalid padding: ${i}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new wl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Yr.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(Yr.fromNumber(s)));return l.compare(lI)===1&&(l=new Yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Av(t),[s,l]=Sv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new km(h,l,i);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=Av(t),[s,l]=Sv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,i,s,l,h){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,$l.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new _h(At.min(),l,new ue(Vt),sr(),Mt())}}class $l{constructor(t,i,s,l,h){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new $l(s,i,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class DT{constructor(t,i){this.targetId=t,this.Ce=i}}class NT{constructor(t,i,s=Qe.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class bv{constructor(){this.ve=0,this.Fe=Rv(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),i=Mt(),s=Mt();return this.Fe.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:yt(38017,{changeType:h})}}),new $l(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=Rv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uI{constructor(t){this.Ge=t,this.ze=new Map,this.je=sr(),this.Je=Rc(),this.He=Rc(),this.Ye=new ue(Vt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((s,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const h=l.target;if(em(h))if(s===0){const d=new dt(h.path);this.et(i,d,We.newNoDocument(d,At.min()))}else Gt(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const g=this.ut(t),y=g?this.ct(g,t,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Jr(s).toUint8Array()}catch(y){if(y instanceof nT)return Wa("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new km(d,l,h)}catch(y){return Wa(y instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach(h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(g)||(this.et(i,h,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((h,d)=>{const g=this.ot(d);if(g){if(h.current&&em(g.target)){const y=new dt(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,We.newNoDocument(y,t))}h.Be&&(i.set(d,h.ke()),h.qe())}});let s=Mt();this.He.forEach((h,d)=>{let g=!0;d.forEachWhile(y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(h))}),this.je.forEach((h,d)=>d.setReadTime(t));const l=new _h(t,i,this.Ye,this.je,s);return this.je=sr(),this.Je=Rc(),this.He=Rc(),this.Ye=new ue(Vt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new bv,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Ve(Vt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Ve(Vt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||st("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new bv),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Rc(){return new ue(dt.comparator)}function Rv(){return new ue(dt.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class dI{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function im(r,t){return r.useProto3Json||hh(t)?t:{value:t}}function th(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function OT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function mI(r,t){return th(r,t.toTimestamp())}function vi(r){return Gt(!!r,49232),At.fromTimestamp(function(i){const s=Zr(i);return new ie(s.seconds,s.nanos)}(r))}function Um(r,t){return rm(r,t).canonicalString()}function rm(r,t){const i=function(l){return new ne(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function VT(r){const t=ne.fromString(r);return Gt(UT(t),10190,{key:t.toString()}),t}function sm(r,t){return Um(r.databaseId,t.path)}function Ld(r,t){const i=VT(t);if(i.get(1)!==r.databaseId.projectId)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new dt(PT(i))}function MT(r,t){return Um(r.databaseId,t)}function gI(r){const t=VT(r);return t.length===4?ne.emptyPath():PT(t)}function am(r){return new ne(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function PT(r){return Gt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function wv(r,t,i){return{name:sm(r,t),fields:i.value.mapValue.fields}}function pI(r,t){let i;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(_,A){return _.useProto3Json?(Gt(A===void 0||typeof A=="string",58123),Qe.fromBase64String(A||"")):(Gt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Qe.fromUint8Array(A||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(_){const A=_.code===void 0?$.UNKNOWN:CT(_.code);return new ot(A,_.message||"")}(d);i=new NT(s,l,h,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Ld(r,s.document.name),h=vi(s.document.updateTime),d=s.document.createTime?vi(s.document.createTime):At.min(),g=new kn({mapValue:{fields:s.document.fields}}),y=We.newFoundDocument(l,h,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];i=new Uc(_,A,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Ld(r,s.document),h=s.readTime?vi(s.readTime):At.min(),d=We.newNoDocument(l,h),g=s.removedTargetIds||[];i=new Uc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Ld(r,s.document),h=s.removedTargetIds||[];i=new Uc([],h,l,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,d=new sI(l,h),g=s.targetId;i=new DT(g,d)}}return i}function yI(r,t){let i;if(t instanceof Xl)i={update:wv(r,t.key,t.value)};else if(t instanceof Pm)i={delete:sm(r,t.key)};else if(t instanceof Ys)i={update:wv(r,t.key,t.data),updateMask:wI(t.fieldMask)};else{if(!(t instanceof nI))return yt(16599,{Vt:t.type});i={verify:sm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(s=>function(h,d){const g=d.transform;if(g instanceof Jc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof jl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ql)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Wc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw yt(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:mI(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:yt(27497)}(r,t.precondition)),i}function _I(r,t){return r&&r.length>0?(Gt(t!==void 0,14353),r.map(i=>function(l,h){let d=l.updateTime?vi(l.updateTime):vi(h);return d.isEqual(At.min())&&(d=vi(h)),new Ww(d,l.transformResults||[])}(i,t))):[]}function vI(r,t){return{documents:[MT(r,t.path)]}}function EI(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=MT(r,l);const h=function(_){if(_.length!==0)return kT(Si.create(_,"and"))}(t.filters);h&&(i.structuredQuery.where=h);const d=function(_){if(_.length!==0)return _.map(A=>function(N){return{field:Ha(N.field),direction:SI(N.dir)}}(A))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=im(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function TI(r){let t=gI(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Gt(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let h=[];i.where&&(h=function(C){const N=xT(C);return N instanceof Si&&fT(N)?N.getFilters():[N]}(i.where));let d=[];i.orderBy&&(d=function(C){return C.map(N=>function(Z){return new Zc(Ga(Z.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Z.direction))}(N))}(i.orderBy));let g=null;i.limit&&(g=function(C){let N;return N=typeof C=="object"?C.value:C,hh(N)?null:N}(i.limit));let y=null;i.startAt&&(y=function(C){const N=!!C.before,F=C.values||[];return new $c(F,N)}(i.startAt));let _=null;return i.endAt&&(_=function(C){const N=!C.before,F=C.values||[];return new $c(F,N)}(i.endAt)),zw(t,l,d,h,g,"F",y,_)}function AI(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function xT(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Ga(i.unaryFilter.field);return Ne.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ga(i.unaryFilter.field);return Ne.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Ga(i.unaryFilter.field);return Ne.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ga(i.unaryFilter.field);return Ne.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(r):r.fieldFilter!==void 0?function(i){return Ne.create(Ga(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Si.create(i.compositeFilter.filters.map(s=>xT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(i.compositeFilter.op))}(r):yt(30097,{filter:r})}function SI(r){return cI[r]}function bI(r){return hI[r]}function RI(r){return fI[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Ga(r){return Fe.fromServerFormat(r.fieldPath)}function kT(r){return r instanceof Ne?function(i){if(i.op==="=="){if(dv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NAN"}};if(fv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(dv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NAN"}};if(fv(i.value))return{unaryFilter:{field:Ha(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(i.field),op:bI(i.op),value:i.value}}}(r):r instanceof Si?function(i){const s=i.getFilters().map(l=>kT(l));return s.length===1?s[0]:{compositeFilter:{op:RI(i.op),filters:s}}}(r):yt(54877,{filter:r})}function wI(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function UT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,i,s,l,h=At.min(),d=At.min(),g=Qe.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new Hr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.yt=t}}function CI(r){const t=TI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Cn=new NI}addToCollectionParentIndex(t,i){return this.Cn.add(i),Y.resolve()}getCollectionParents(t,i){return Y.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Y.resolve()}deleteFieldIndex(t,i){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,i){return Y.resolve()}getDocumentsMatchingTarget(t,i){return Y.resolve(null)}getIndexType(t,i){return Y.resolve(0)}getFieldIndexes(t,i){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,i){return Y.resolve($r.min())}getMinOffsetFromCollectionGroup(t,i){return Y.resolve($r.min())}updateCollectionGroup(t,i,s){return Y.resolve()}updateIndexEntries(t,i){return Y.resolve()}}class NI{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new Ve(ne.comparator),h=!l.has(s);return this.index[i]=l.add(s),h}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ve(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LT=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(LT,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new io(0)}static cr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",OI=1048576;function Dv([r,t],[i,s]){const l=Vt(r,i);return l===0?Vt(t,s):l}class VI{constructor(t){this.Ir=t,this.buffer=new Ve(Dv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Dv(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class MI{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){st(Cv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ho(i)?st(Cv,"Ignoring IndexedDB error during garbage collection: ",i):await co(i)}await this.Vr(3e5)})}}class PI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(s=>Math.floor(i/100*s))}nthSequenceNumber(t,i){if(i===0)return Y.resolve(ch.ce);const s=new VI(i);return this.mr.forEachTarget(t,l=>s.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>s.Ar(l))).next(()=>s.maxValue)}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Iv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,h,d,g,y,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l))).next(C=>(s=C,g=Date.now(),this.removeTargets(t,s,i))).next(C=>(h=C,y=Date.now(),this.removeOrphanedDocuments(t,s))).next(C=>(_=Date.now(),ja()<=Ot.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${C} documents in `+(_-y)+`ms
Total Duration: ${_-A}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:C})))}}function xI(r,t){return new PI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.changes=new Ks(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,We.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?Y.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(s!==null&&Ml(s.mutation,l,Xn.empty(),ie.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.getLocalViewOfDocuments(t,s,Mt()).next(()=>s))}getLocalViewOfDocuments(t,i,s=Mt()){const l=Ls();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,s).next(h=>{let d=Rl();return h.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const s=Ls();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,Mt()))}populateOverlays(t,i,s){const l=[];return s.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,s,l){let h=sr();const d=Vl(),g=function(){return Vl()}();return i.forEach((y,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof Ys)?h=h.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Ml(A.mutation,_,A.mutation.getFieldMask(),ie.now())):d.set(_.key,Xn.empty())}),this.recalculateAndSaveOverlays(t,h).next(y=>(y.forEach((_,A)=>d.set(_,A)),i.forEach((_,A)=>g.set(_,new UI(A,d.get(_)??null))),g))}recalculateAndSaveOverlays(t,i){const s=Vl();let l=new ue((d,g)=>d-g),h=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(y=>{const _=i.get(y);if(_===null)return;let A=s.get(y)||Xn.empty();A=g.applyToLocalView(_,A),s.set(y,A);const C=(l.get(g.batchId)||Mt()).add(y);l=l.insert(g.batchId,C)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,A=y.value,C=ET();A.forEach(N=>{if(!h.has(N)){const F=wT(i.get(N),s.get(N));F!==null&&C.set(N,F),h=h.add(N)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,C))}return Y.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,i,s,l){return function(d){return dt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Bw(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-h.size):Y.resolve(Ls());let g=Ul,y=h;return d.next(_=>Y.forEach(_,(A,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),h.get(A)?Y.resolve():this.remoteDocumentCache.getEntry(t,A).next(N=>{y=y.insert(A,N)}))).next(()=>this.populateOverlays(t,_,h)).next(()=>this.computeViews(t,y,_,Mt())).next(A=>({batchId:g,changes:vT(A)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new dt(i)).next(s=>{let l=Rl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const h=i.collectionGroup;let d=Rl();return this.indexManager.getCollectionParents(t,h).next(g=>Y.forEach(g,y=>{const _=function(C,N){return new dh(N,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(A=>{A.forEach((C,N)=>{d=d.insert(C,N)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,h,l))).next(d=>{h.forEach((y,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,We.newInvalidDocument(A)))});let g=Rl();return d.forEach((y,_)=>{const A=h.get(y);A!==void 0&&Ml(A.mutation,_,Xn.empty(),ie.now()),gh(i,_)&&(g=g.insert(y,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Y.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:vi(l.createTime)}}(i)),Y.resolve()}getNamedQuery(t,i){return Y.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:CI(l.bundledQuery),readTime:vi(l.readTime)}}(i)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.overlays=new ue(dt.comparator),this.qr=new Map}getOverlay(t,i){return Y.resolve(this.overlays.get(i))}getOverlays(t,i){const s=Ls();return Y.forEach(i,l=>this.getOverlay(t,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(t,i,s){return s.forEach((l,h)=>{this.St(t,i,h)}),Y.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(t,i,s){const l=Ls(),h=i.length+1,d=new dt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&y.largestBatchId>s&&l.set(y.getKey(),y)}return Y.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let h=new ue((_,A)=>_-A);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let A=h.get(_.largestBatchId);A===null&&(A=Ls(),h=h.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=Ls(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,A)=>g.set(_,A)),!(g.size()>=l)););return Y.resolve(g)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new rI(i,s));let h=this.qr.get(i);h===void 0&&(h=Mt(),this.qr.set(i,h)),this.qr.set(i,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.Qr=new Ve(Le.$r),this.Ur=new Ve(Le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new Le(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach(s=>this.addReference(s,i))}removeReference(t,i){this.Gr(new Le(t,i))}zr(t,i){t.forEach(s=>this.removeReference(s,i))}jr(t){const i=new dt(new ne([])),s=new Le(i,t),l=new Le(i,t+1),h=[];return this.Ur.forEachInRange([s,l],d=>{this.Gr(d),h.push(d.key)}),h}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new dt(new ne([])),s=new Le(i,t),l=new Le(i,t+1);let h=Mt();return this.Ur.forEachInRange([s,l],d=>{h=h.add(d.key)}),h}containsKey(t){const i=new Le(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class Le{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return dt.comparator(t.key,i.key)||Vt(t.Yr,i.Yr)}static Kr(t,i){return Vt(t.Yr,i.Yr)||dt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(Le.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iI(h,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Le(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(t,i){return Y.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),h=l<0?0:l;return Y.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Im:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new Le(i,0),l=new Le(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,l],d=>{const g=this.Xr(d.Yr);h.push(g)}),Y.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new Ve(Vt);return i.forEach(l=>{const h=new Le(l,0),d=new Le(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],g=>{s=s.add(g.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let h=s;dt.isDocumentKey(h)||(h=h.child(""));const d=new Le(new dt(h),0);let g=new Ve(Vt);return this.Zr.forEachWhile(y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)},d),Y.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(s=>{const l=this.Xr(s);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Gt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(i.mutations,l=>{const h=new Le(l.key,i.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,i){const s=new Le(i,0),l=this.Zr.firstAfterOrEqual(s);return Y.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.ri=t,this.docs=function(){return new ue(dt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),h=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return Y.resolve(s?s.document.mutableCopy():We.newInvalidDocument(i))}getEntries(t,i){let s=sr();return i.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():We.newInvalidDocument(l))}),Y.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let h=sr();const d=i.path,g=new dt(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:A}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||yw(pw(A),s)<=0||(l.has(A.key)||gh(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return Y.resolve(h)}getAllFromCollectionGroup(t,i,s,l){yt(9500)}ii(t,i){return Y.forEach(this.docs,s=>i(s))}newChangeBuffer(t){return new GI(this)}getSize(t){return Y.resolve(this.size)}}class GI extends kI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)}),Y.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.persistence=t,this.si=new Ks(i=>Nm(i),Om),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new Lm,this.targetCount=0,this.ai=io.ur()}forEachTarget(t,i){return this.si.forEach((s,l)=>i(l)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),Y.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new io(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Y.resolve()}updateTargetData(t,i){return this.Pr(i),Y.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,i,s){let l=0;const h=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),Y.waitFor(h).next(()=>l)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return Y.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),Y.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(t,d))}),Y.waitFor(h)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Y.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return Y.resolve(s)}containsKey(t,i){return Y.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,i){this.ui={},this.overlays={},this.ci=new ch(0),this.li=!1,this.li=!0,this.hi=new jI,this.referenceDelegate=t(this),this.Pi=new FI(this),this.indexManager=new DI,this.remoteDocumentCache=function(l){return new HI(l)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new II(i),this.Ii=new zI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new BI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new qI(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){st("MemoryPersistence","Starting transaction:",t);const l=new QI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ai(t,i){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,i)))}}class QI extends vw{constructor(t){super(),this.currentSequenceNumber=t}}class zm{constructor(t){this.persistence=t,this.Ri=new Lm,this.Vi=null}static mi(t){return new zm(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),Y.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Y.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(h=>this.fi.add(h.toString()))}).next(()=>s.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const l=dt.fromPath(s);return this.gi(t,l).next(h=>{h||i.removeEntry(l,At.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return Y.or([()=>Y.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class eh{constructor(t,i){this.persistence=t,this.pi=new Ks(s=>Aw(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=xI(this,i)}static mi(t,i){return new eh(t,i)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>i.next(l=>s+l))}wr(t){let i=0;return this.pr(t,s=>{i++}).next(()=>i)}pr(t,i){return Y.forEach(this.pi,(s,l)=>this.br(t,s,l).next(h=>h?Y.resolve():i(l)))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(s++,h.removeEntry(d,At.min()))})).next(()=>h.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Pc(t.data.value)),i}br(t,i,s){return Y.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return Y.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=Mt(),l=Mt();for(const h of i.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new Bm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RS()?8:Ew(tn())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const h={result:null};return this.ys(t,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ws(t,i,l,s).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new KI;return this.Ss(t,i,d).next(g=>{if(h.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>h.result)}bs(t,i,s,l){return s.documentReadCount<this.fs?(ja()<=Ot.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",qa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(ja()<=Ot.DEBUG&&st("QueryEngine","Query:",qa(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(ja()<=Ot.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",qa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_i(i))):Y.resolve())}ys(t,i){if(yv(i))return Y.resolve(null);let s=_i(i);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=nm(i,null,"F"),s=_i(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next(h=>{const d=Mt(...h);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(t,nm(i,null,"F")):this.vs(t,_,i,y)}))})))}ws(t,i,s,l){return yv(i)||l.isEqual(At.min())?Y.resolve(null):this.ps.getDocuments(t,s).next(h=>{const d=this.Ds(i,h);return this.Cs(i,d,s,l)?Y.resolve(null):(ja()<=Ot.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(i)),this.vs(t,d,i,gw(l,Ul)).next(g=>g))})}Ds(t,i){let s=new Ve(yT(t));return i.forEach((l,h)=>{gh(t,h)&&(s=s.add(h))}),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const h=t.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,i,s){return ja()<=Ot.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",qa(i)),this.ps.getDocumentsMatchingQuery(t,i,$r.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",XI=3e8;class $I{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new ue(Vt),this.xs=new Ks(h=>Nm(h),Om),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function ZI(r,t,i,s){return new $I(r,t,i,s)}async function BT(r,t){const i=St(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,i.Bs(t),i.mutationQueue.getAllMutationBatches(s))).next(h=>{const d=[],g=[];let y=Mt();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}for(const _ of h){g.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}return i.localDocuments.getDocuments(s,y).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:g}))})})}function JI(r,t){const i=St(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,y,_,A){const C=_.batch,N=C.keys();let F=Y.resolve();return N.forEach(Z=>{F=F.next(()=>A.getEntry(y,Z)).next(rt=>{const J=_.docVersions.get(Z);Gt(J!==null,48541),rt.version.compareTo(J)<0&&(C.applyToRemoteDocument(rt,_),rt.isValidDocument()&&(rt.setReadTime(_.commitVersion),A.addEntry(rt)))})}),F.next(()=>g.mutationQueue.removeMutationBatch(y,C))}(i,s,t,h).next(()=>h.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=Mt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y}(t))).next(()=>i.localDocuments.getDocuments(s,l))})}function jT(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function WI(r,t){const i=St(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((A,C)=>{const N=l.get(C);if(!N)return;g.push(i.Pi.removeMatchingKeys(h,A.removedDocuments,C).next(()=>i.Pi.addMatchingKeys(h,A.addedDocuments,C)));let F=N.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(C)!==null?F=F.withResumeToken(Qe.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):A.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(A.resumeToken,s)),l=l.insert(C,F),function(rt,J,Tt){return rt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-rt.snapshotVersion.toMicroseconds()>=XI?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0}(N,F,A)&&g.push(i.Pi.updateTargetData(h,F))});let y=sr(),_=Mt();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))}),g.push(tC(h,d,t.documentUpdates).next(A=>{y=A.ks,_=A.qs})),!s.isEqual(At.min())){const A=i.Pi.getLastRemoteSnapshotVersion(h).next(C=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s));g.push(A)}return Y.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,y,_)).next(()=>y)}).then(h=>(i.Ms=l,h))}function tC(r,t,i){let s=Mt(),l=Mt();return i.forEach(h=>s=s.add(h)),t.getEntries(r,s).next(h=>{let d=sr();return i.forEach((g,y)=>{const _=h.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(At.min())?(t.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),d=d.insert(g,y)):st(jm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)}),{ks:d,qs:l}})}function eC(r,t){const i=St(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Im),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function nC(r,t){const i=St(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.Pi.getTargetData(s,t).next(h=>h?(l=h,Y.resolve(l)):i.Pi.allocateTargetId(s).next(d=>(l=new Hr(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s})}async function om(r,t,i){const s=St(r),l=s.Ms.get(t),h=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",h,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!ho(d))throw d;st(jm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Nv(r,t,i){const s=St(r);let l=At.min(),h=Mt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,_,A){const C=St(y),N=C.xs.get(A);return N!==void 0?Y.resolve(C.Ms.get(N)):C.Pi.getTargetData(_,A)}(s,d,_i(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next(y=>{h=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:At.min(),i?h:Mt())).next(g=>(iC(s,qw(t),g),{documents:g,Qs:h})))}function iC(r,t,i){let s=r.Os.get(t)||At.min();i.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),r.Os.set(t,s)}class Ov{constructor(){this.activeTargetIds=Yw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rC{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Mv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){st(Vv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){st(Vv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function lm(){return wc===null?wc=function(){return 268435456+Math.round(2147483648*Math.random())}():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="RestConnection",aC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Yc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,h){const d=lm(),g=this.zo(t,i.toUriEncodedString());st(zd,`Sending RPC '${t}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,h);const{host:_}=new URL(g),A=so(_);return this.Jo(t,g,y,s,A).then(C=>(st(zd,`Received RPC '${t}' ${d}: `,C),C),C=>{throw Wa(zd,`RPC '${t}' ${d} failed with error: `,C,"url: ",g,"request:",s),C})}Ho(t,i,s,l,h,d){return this.Go(t,i,s,l,h)}jo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),s&&s.headers.forEach((l,h)=>t[h]=l)}zo(t,i){const s=aC[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class uC extends oC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,h){const d=lm();return new Promise((g,y)=>{const _=new FE;_.setWithCredentials(!0),_.listenOnce(QE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Mc.NO_ERROR:const C=_.getResponseJson();st(Ze,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(C)),g(C);break;case Mc.TIMEOUT:st(Ze,`RPC '${t}' ${d} timed out`),y(new ot($.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const N=_.getStatus();if(st(Ze,`RPC '${t}' ${d} failed with status:`,N,"response text:",_.getResponseText()),N>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const Z=F?.error;if(Z&&Z.status&&Z.message){const rt=function(Tt){const ht=Tt.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ht)>=0?ht:$.UNKNOWN}(Z.status);y(new ot(rt,Z.message))}else y(new ot($.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new ot($.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{st(Ze,`RPC '${t}' ${d} completed.`)}});const A=JSON.stringify(l);st(Ze,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",A,s,15)})}T_(t,i,s){const l=lm(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=XE(),g=YE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,s),y.encodeInitMessageHeaders=!0;const A=h.join("");st(Ze,`Creating RPC '${t}' stream ${l}: ${A}`,y);const C=d.createWebChannel(A,y);this.I_(C);let N=!1,F=!1;const Z=new lC({Yo:J=>{F?st(Ze,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(N||(st(Ze,`Opening RPC '${t}' stream ${l} transport.`),C.open(),N=!0),st(Ze,`RPC '${t}' stream ${l} sending:`,J),C.send(J))},Zo:()=>C.close()}),rt=(J,Tt,ht)=>{J.listen(Tt,ct=>{try{ht(ct)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return rt(C,bl.EventType.OPEN,()=>{F||(st(Ze,`RPC '${t}' stream ${l} transport opened.`),Z.o_())}),rt(C,bl.EventType.CLOSE,()=>{F||(F=!0,st(Ze,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(C))}),rt(C,bl.EventType.ERROR,J=>{F||(F=!0,Wa(Ze,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),Z.a_(new ot($.UNAVAILABLE,"The operation could not be completed")))}),rt(C,bl.EventType.MESSAGE,J=>{if(!F){const Tt=J.data[0];Gt(!!Tt,16349);const ht=Tt,ct=ht?.error||ht[0]?.error;if(ct){st(Ze,`RPC '${t}' stream ${l} received error:`,ct);const Ct=ct.status;let Et=function(S){const w=Ae[S];if(w!==void 0)return CT(w)}(Ct),Pt=ct.message;Et===void 0&&(Et=$.INTERNAL,Pt="Unknown error status: "+Ct+" with message "+ct.message),F=!0,Z.a_(new ot(Et,Pt)),C.close()}else st(Ze,`RPC '${t}' stream ${l} received:`,Tt),Z.u_(Tt)}}),rt(g,KE.STAT_EVENT,J=>{J.stat===$d.PROXY?st(Ze,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===$d.NOPROXY&&st(Ze,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{Z.__()},0),Z}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(r){return new dI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t,i,s=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class HT{constructor(t,i,s,l,h,d,g,y){this.Mi=t,this.S_=s,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===$.RESOURCE_EXHAUSTED?(ir(i.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.D_===i&&this.G_(s,l)},s=>{t(()=>{const l=new ot($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)})})}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{s(()=>this.z_(l))}),this.stream.onMessage(l=>{s(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return st(Pv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(st(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cC extends HT{constructor(t,i,s,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=pI(this.serializer,t),s=function(h){if(!("targetChange"in h))return At.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?At.min():d.readTime?vi(d.readTime):At.min()}(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=am(this.serializer),i.addTarget=function(h,d){let g;const y=d.target;if(g=em(y)?{documents:vI(h,y)}:{query:EI(h,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=OT(h,d.resumeToken);const _=im(h,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(At.min())>0){g.readTime=th(h,d.snapshotVersion.toTimestamp());const _=im(h,d.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const s=AI(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=am(this.serializer),i.removeTarget=t,this.q_(i)}}class hC extends HT{constructor(t,i,s,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=_I(t.writeResults,t.commitTime),s=vi(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=am(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(s=>yI(this.serializer,s))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{}class dC extends fC{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Go(t,rm(i,s),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ot($.UNKNOWN,h.toString())})}Ho(t,i,s,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,rm(i,s),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ot($.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mC{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(i),this.aa=!1):st("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class gC{constructor(t,i,s,l,h){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo(d=>{s.enqueueAndForget(async()=>{Xs(this)&&(st(Gs,"Restarting streams for network reachability change."),await async function(y){const _=St(y);_.Ea.add(4),await Zl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Eh(_)}(this))})}),this.Ra=new mC(s,l)}}async function Eh(r){if(Xs(r))for(const t of r.da)await t(!0)}async function Zl(r){for(const t of r.da)await t(!1)}function GT(r,t){const i=St(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Fm(i)?Gm(i):fo(i).O_()&&Hm(i,t))}function qm(r,t){const i=St(r),s=fo(i);i.Ia.delete(t),s.O_()&&FT(i,t),i.Ia.size===0&&(s.O_()?s.L_():Xs(i)&&i.Ra.set("Unknown"))}function Hm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}fo(r).Y_(t)}function FT(r,t){r.Va.Ue(t),fo(r).Z_(t)}function Gm(r){r.Va=new uI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),fo(r).start(),r.Ra.ua()}function Fm(r){return Xs(r)&&!fo(r).x_()&&r.Ia.size>0}function Xs(r){return St(r).Ea.size===0}function QT(r){r.Va=void 0}async function pC(r){r.Ra.set("Online")}async function yC(r){r.Ia.forEach((t,i)=>{Hm(r,t)})}async function _C(r,t){QT(r),Fm(r)?(r.Ra.ha(t),Gm(r)):r.Ra.set("Unknown")}async function vC(r,t,i){if(r.Ra.set("Online"),t instanceof NT&&t.state===2&&t.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(r,t)}catch(s){st(Gs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await nh(r,s)}else if(t instanceof Uc?r.Va.Ze(t):t instanceof DT?r.Va.st(t):r.Va.tt(t),!i.isEqual(At.min()))try{const s=await jT(r.localStore);i.compareTo(s)>=0&&await function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const A=h.Ia.get(_);A&&h.Ia.set(_,A.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,_)=>{const A=h.Ia.get(y);if(!A)return;h.Ia.set(y,A.withResumeToken(Qe.EMPTY_BYTE_STRING,A.snapshotVersion)),FT(h,y);const C=new Hr(A.target,y,_,A.sequenceNumber);Hm(h,C)}),h.remoteSyncer.applyRemoteEvent(g)}(r,i)}catch(s){st(Gs,"Failed to raise snapshot:",s),await nh(r,s)}}async function nh(r,t,i){if(!ho(t))throw t;r.Ea.add(1),await Zl(r),r.Ra.set("Offline"),i||(i=()=>jT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{st(Gs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Eh(r)})}function KT(r,t){return t().catch(i=>nh(r,i,t))}async function Th(r){const t=St(r),i=ts(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Im;for(;EC(t);)try{const l=await eC(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,TC(t,l)}catch(l){await nh(t,l)}YT(t)&&XT(t)}function EC(r){return Xs(r)&&r.Ta.length<10}function TC(r,t){r.Ta.push(t);const i=ts(r);i.O_()&&i.X_&&i.ea(t.mutations)}function YT(r){return Xs(r)&&!ts(r).x_()&&r.Ta.length>0}function XT(r){ts(r).start()}async function AC(r){ts(r).ra()}async function SC(r){const t=ts(r);for(const i of r.Ta)t.ea(i.mutations)}async function bC(r,t,i){const s=r.Ta.shift(),l=xm.from(s,t,i);await KT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await Th(r)}async function RC(r,t){t&&ts(r).X_&&await async function(s,l){if(function(d){return aI(d)&&d!==$.ABORTED}(l.code)){const h=s.Ta.shift();ts(s).B_(),await KT(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await Th(s)}}(r,t),YT(r)&&XT(r)}async function xv(r,t){const i=St(r);i.asyncQueue.verifyOperationInProgress(),st(Gs,"RemoteStore received new credentials");const s=Xs(i);i.Ea.add(3),await Zl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await Eh(i)}async function wC(r,t){const i=St(r);t?(i.Ea.delete(2),await Eh(i)):t||(i.Ea.add(2),await Zl(i),i.Ra.set("Unknown"))}function fo(r){return r.ma||(r.ma=function(i,s,l){const h=St(i);return h.sa(),new cC(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:pC.bind(null,r),t_:yC.bind(null,r),r_:_C.bind(null,r),H_:vC.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),Fm(r)?Gm(r):r.Ra.set("Unknown")):(await r.ma.stop(),QT(r))})),r.ma}function ts(r){return r.fa||(r.fa=function(i,s,l){const h=St(i);return h.sa(),new hC(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:AC.bind(null,r),r_:RC.bind(null,r),ta:SC.bind(null,r),na:bC.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await Th(r)):(await r.fa.stop(),r.Ta.length>0&&(st(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,i,s,l,h){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,h){const d=Date.now()+s,g=new Qm(t,i,d,l,h);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(r,t){if(ir("AsyncQueue",`${t}: ${r}`),ho(r))return new ot($.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(t){return new Xa(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||dt.comparator(i.key,s.key):(i,s)=>dt.comparator(i.key,s.key),this.keyedMap=Rl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,s)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Xa)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Xa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.ga=new ue(dt.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,s)=>{t.push(s)}),t}}class ro{constructor(t,i,s,l,h,d,g,y,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new ro(t,i,Xa.emptySet(i),d,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class CC{constructor(){this.queries=Uv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=St(i),h=l.queries;l.queries=Uv(),h.forEach((d,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new ot($.ABORTED,"Firestore shutting down"))}}function Uv(){return new Ks(r=>pT(r),mh)}async function $T(r,t){const i=St(r);let s=3;const l=t.query;let h=i.queries.get(l);h?!h.ba()&&t.Da()&&(s=2):(h=new IC,s=t.Da()?0:1);try{switch(s){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Km(d,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,h),h.Sa.push(t),t.va(i.onlineState),h.wa&&t.Fa(h.wa)&&Ym(i)}async function ZT(r,t){const i=St(r),s=t.query;let l=3;const h=i.queries.get(s);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function DC(r,t){const i=St(r);let s=!1;for(const l of t){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&Ym(i)}function NC(r,t,i){const s=St(r),l=s.queries.get(t);if(l)for(const h of l.Sa)h.onError(i);s.queries.delete(t)}function Ym(r){r.Ca.forEach(t=>{t.next()})}var um,Lv;(Lv=um||(um={})).Ma="default",Lv.Cache="cache";class JT{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new ro(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=ro.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t){this.key=t}}class t0{constructor(t){this.key=t}}class OC{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=yT(t),this.tu=new Xa(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new kv,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,C)=>{const N=l.get(A),F=gh(this.query,C)?C:null,Z=!!N&&this.mutatedKeys.has(N.key),rt=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let J=!1;N&&F?N.data.isEqual(F.data)?Z!==rt&&(s.track({type:3,doc:F}),J=!0):this.su(N,F)||(s.track({type:2,doc:F}),J=!0,(y&&this.eu(F,y)>0||_&&this.eu(F,_)<0)&&(g=!0)):!N&&F?(s.track({type:0,doc:F}),J=!0):N&&!F&&(s.track({type:1,doc:N}),J=!0,(y||_)&&(g=!0)),J&&(F?(d=d.add(F),h=rt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:h}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((A,C)=>function(F,Z){const rt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:J})}};return rt(F)-rt(Z)}(A.type,C.type)||this.eu(A.doc,C.doc)),this.ou(s),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new ro(this.query,t.tu,h,d,t.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const i=[];return t.forEach(s=>{this.Xa.has(s)||i.push(new t0(s))}),this.Xa.forEach(s=>{t.has(s)||i.push(new WT(s))}),i}cu(t){this.Ya=t.Qs,this.Xa=Mt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xm="SyncEngine";class VC{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class MC{constructor(t){this.key=t,this.hu=!1}}class PC{constructor(t,i,s,l,h,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ks(g=>pT(g),mh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(dt.comparator),this.Au=new Map,this.Ru=new Lm,this.Vu={},this.mu=new Map,this.fu=io.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xC(r,t,i=!0){const s=a0(r);let l;const h=s.Tu.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await e0(s,t,i,!0),l}async function kC(r,t){const i=a0(r);await e0(i,t,!0,!1)}async function e0(r,t,i,s){const l=await nC(r.localStore,_i(t)),h=l.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return s&&(g=await UC(r,t,h,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&GT(r.remoteStore,l),g}async function UC(r,t,i,s,l){r.pu=(C,N,F)=>async function(rt,J,Tt,ht){let ct=J.view.ru(Tt);ct.Cs&&(ct=await Nv(rt.localStore,J.query,!1).then(({documents:M})=>J.view.ru(M,ct)));const Ct=ht&&ht.targetChanges.get(J.targetId),Et=ht&&ht.targetMismatches.get(J.targetId)!=null,Pt=J.view.applyChanges(ct,rt.isPrimaryClient,Ct,Et);return Bv(rt,J.targetId,Pt.au),Pt.snapshot}(r,C,N,F);const h=await Nv(r.localStore,t,!0),d=new OC(t,h.Qs),g=d.ru(h.documents),y=$l.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,y);Bv(r,i,_.au);const A=new VC(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function LC(r,t,i){const s=St(r),l=s.Tu.get(t),h=s.Iu.get(l.targetId);if(h.length>1)return s.Iu.set(l.targetId,h.filter(d=>!mh(d,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await om(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&qm(s.remoteStore,l.targetId),cm(s,l.targetId)}).catch(co)):(cm(s,l.targetId),await om(s.localStore,l.targetId,!0))}async function zC(r,t){const i=St(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),qm(i.remoteStore,s.targetId))}async function BC(r,t,i){const s=KC(r);try{const l=await function(d,g){const y=St(d),_=ie.now(),A=g.reduce((F,Z)=>F.add(Z.key),Mt());let C,N;return y.persistence.runTransaction("Locally write mutations","readwrite",F=>{let Z=sr(),rt=Mt();return y.Ns.getEntries(F,A).next(J=>{Z=J,Z.forEach((Tt,ht)=>{ht.isValidDocument()||(rt=rt.add(Tt))})}).next(()=>y.localDocuments.getOverlayedDocuments(F,Z)).next(J=>{C=J;const Tt=[];for(const ht of g){const ct=eI(ht,C.get(ht.key).overlayedDocument);ct!=null&&Tt.push(new Ys(ht.key,ct,uT(ct.value.mapValue),$n.exists(!0)))}return y.mutationQueue.addMutationBatch(F,_,Tt,g)}).next(J=>{N=J;const Tt=J.applyToLocalDocumentSet(C,rt);return y.documentOverlayCache.saveOverlays(F,J.batchId,Tt)})}).then(()=>({batchId:N.batchId,changes:vT(C)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new ue(Vt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_}(s,l.batchId,i),await Jl(s,l.changes),await Th(s.remoteStore)}catch(l){const h=Km(l,"Failed to persist write");i.reject(h)}}async function n0(r,t){const i=St(r);try{const s=await WI(i.localStore,t);t.targetChanges.forEach((l,h)=>{const d=i.Au.get(h);d&&(Gt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Gt(d.hu,14607):l.removedDocuments.size>0&&(Gt(d.hu,42227),d.hu=!1))}),await Jl(i,s,t)}catch(s){await co(s)}}function zv(r,t,i){const s=St(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach((h,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const y=St(d);y.onlineState=g;let _=!1;y.queries.forEach((A,C)=>{for(const N of C.Sa)N.va(g)&&(_=!0)}),_&&Ym(y)}(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function jC(r,t,i){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),h=l&&l.key;if(h){let d=new ue(dt.comparator);d=d.insert(h,We.newNoDocument(h,At.min()));const g=Mt().add(h),y=new _h(At.min(),new Map,new ue(Vt),d,g);await n0(s,y),s.du=s.du.remove(h),s.Au.delete(t),$m(s)}else await om(s.localStore,t,!1).then(()=>cm(s,t,i)).catch(co)}async function qC(r,t){const i=St(r),s=t.batch.batchId;try{const l=await JI(i.localStore,t);r0(i,s,null),i0(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Jl(i,l)}catch(l){await co(l)}}async function HC(r,t,i){const s=St(r);try{const l=await function(d,g){const y=St(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let A;return y.mutationQueue.lookupMutationBatch(_,g).next(C=>(Gt(C!==null,37113),A=C.keys(),y.mutationQueue.removeMutationBatch(_,C))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,A,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A)).next(()=>y.localDocuments.getDocuments(_,A))})}(s.localStore,t);r0(s,t,i),i0(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Jl(s,l)}catch(l){await co(l)}}function i0(r,t){(r.mu.get(t)||[]).forEach(i=>{i.resolve()}),r.mu.delete(t)}function r0(r,t,i){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(i?h.reject(i):h.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function cm(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||s0(r,s)})}function s0(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(qm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),$m(r))}function Bv(r,t,i){for(const s of i)s instanceof WT?(r.Ru.addReference(s.key,t),GC(r,s)):s instanceof t0?(st(Xm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||s0(r,s.key)):yt(19791,{wu:s})}function GC(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(st(Xm,"New document in limbo: "+i),r.Eu.add(s),$m(r))}function $m(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new dt(ne.fromString(t)),s=r.fu.next();r.Au.set(s,new MC(i)),r.du=r.du.insert(i,s),GT(r.remoteStore,new Hr(_i(Vm(i.path)),s,"TargetPurposeLimboResolution",ch.ce))}}async function Jl(r,t,i){const s=St(r),l=[],h=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach((g,y)=>{d.push(s.pu(y,t,i).then(_=>{if((_||i)&&s.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(_){l.push(_);const A=Bm.As(y.targetId,_);h.push(A)}}))}),await Promise.all(d),s.Pu.H_(l),await async function(y,_){const A=St(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>Y.forEach(_,N=>Y.forEach(N.Es,F=>A.persistence.referenceDelegate.addReference(C,N.targetId,F)).next(()=>Y.forEach(N.ds,F=>A.persistence.referenceDelegate.removeReference(C,N.targetId,F)))))}catch(C){if(!ho(C))throw C;st(jm,"Failed to update sequence numbers: "+C)}for(const C of _){const N=C.targetId;if(!C.fromCache){const F=A.Ms.get(N),Z=F.snapshotVersion,rt=F.withLastLimboFreeSnapshotVersion(Z);A.Ms=A.Ms.insert(N,rt)}}}(s.localStore,h))}async function FC(r,t){const i=St(r);if(!i.currentUser.isEqual(t)){st(Xm,"User change. New user:",t.toKey());const s=await BT(i.localStore,t);i.currentUser=t,function(h,d){h.mu.forEach(g=>{g.forEach(y=>{y.reject(new ot($.CANCELLED,d))})}),h.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Jl(i,s.Ls)}}function QC(r,t){const i=St(r),s=i.Au.get(t);if(s&&s.hu)return Mt().add(s.key);{let l=Mt();const h=i.Iu.get(t);if(!h)return l;for(const d of h){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function a0(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=n0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jC.bind(null,t),t.Pu.H_=DC.bind(null,t.eventManager),t.Pu.yu=NC.bind(null,t.eventManager),t}function KC(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,t),t}class ih{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=vh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return ZI(this.persistence,new YI,t.initialUser,this.serializer)}Cu(t){return new zT(zm.mi,this.serializer)}Du(t){return new rC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ih.provider={build:()=>new ih};class YC extends ih{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Gt(this.persistence.referenceDelegate instanceof eh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new MI(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new zT(s=>eh.mi(s,i),this.serializer)}}class hm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=FC.bind(null,this.syncEngine),await wC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new CC}()}createDatastore(t){const i=vh(t.databaseInfo.databaseId),s=function(h){return new uC(h)}(t.databaseInfo);return function(h,d,g,y){return new dC(h,d,g,y)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,l,h,d,g){return new gC(s,l,h,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>zv(this.syncEngine,i,0),function(){return Mv.v()?new Mv:new sC}())}createSyncEngine(t,i){return function(l,h,d,g,y,_,A){const C=new PC(l,h,d,g,y,_);return A&&(C.gu=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const s=St(i);st(Gs,"RemoteStore shutting down."),s.Ea.add(5),await Zl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ir("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class XC{constructor(t,i,s,l,h){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=Je.UNAUTHENTICATED,this.clientId=Rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async d=>{st(es,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(st(es,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=Km(i,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function jd(r,t){r.asyncQueue.verifyOperationInProgress(),st(es,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await BT(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function jv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await $C(r);st(es,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(s=>xv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>xv(t.remoteStore,l)),r._onlineComponents=t}async function $C(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st(es,"Using user provided OfflineComponentProvider");try{await jd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Wa("Error using user provided cache. Falling back to memory cache: "+i),await jd(r,new ih)}}else st(es,"Using default OfflineComponentProvider"),await jd(r,new YC(void 0));return r._offlineComponents}async function l0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st(es,"Using user provided OnlineComponentProvider"),await jv(r,r._uninitializedComponentsProvider._online)):(st(es,"Using default OnlineComponentProvider"),await jv(r,new hm))),r._onlineComponents}function ZC(r){return l0(r).then(t=>t.syncEngine)}async function u0(r){const t=await l0(r),i=t.eventManager;return i.onListen=xC.bind(null,t.syncEngine),i.onUnlisten=LC.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=kC.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=zC.bind(null,t.syncEngine),i}function JC(r,t,i={}){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>function(h,d,g,y,_){const A=new o0({next:N=>{A.Nu(),d.enqueueAndForget(()=>ZT(h,C));const F=N.docs.has(g);!F&&N.fromCache?_.reject(new ot($.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&N.fromCache&&y&&y.source==="server"?_.reject(new ot($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),C=new JT(Vm(g.path),A,{includeMetadataChanges:!0,qa:!0});return $T(h,C)}(await u0(r),r.asyncQueue,t,i,s)),s.promise}function WC(r,t,i={}){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>function(h,d,g,y,_){const A=new o0({next:N=>{A.Nu(),d.enqueueAndForget(()=>ZT(h,C)),N.fromCache&&y.source==="server"?_.reject(new ot($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),C=new JT(g,A,{includeMetadataChanges:!0,qa:!0});return $T(h,C)}(await u0(r),r.asyncQueue,t,i,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firestore.googleapis.com",Hv=!0;class Gv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h0,this.ssl=Hv}else this.host=t.host,this.ssl=t.ssl??Hv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=LT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<OI)throw new ot($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c0(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ah{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new rw;switch(s.type){case"firstParty":return new lw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ot($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=qv.get(i);s&&(st("ComponentProvider","Removing Datastore"),qv.delete(i),s.terminate())}(this),Promise.resolve()}}function t2(r,t,i,s={}){r=rr(r,Ah);const l=so(t),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(iE(`https://${g}`),rE("Firestore",!0)),h.host!==h0&&h.host!==g&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:g,ssl:l,emulatorOptions:s};if(!Bs(y,d)&&(r._setSettings(y),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=Je.MOCK_USER;else{_=pS(s.mockUserToken,r._app?.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ot($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Je(C)}r._authCredentials=new sw(new ZE(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Sh(this.firestore,t,this._query)}}class Oe{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Oe(this.firestore,t,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Yl(i,Oe._jsonSchema))return new Oe(t,s||null,new dt(ne.fromString(i.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:Se("string",Oe._jsonSchemaVersion),referencePath:Se("string")};class Xr extends Sh{constructor(t,i,s){super(t,i,Vm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Oe(this.firestore,null,new dt(t))}withConverter(t){return new Xr(this.firestore,t,this._path)}}function Ba(r,t,...i){if(r=Tn(r),JE("collection","path",t),r instanceof Ah){const s=ne.fromString(t,...i);return rv(s),new Xr(r,null,s)}{if(!(r instanceof Oe||r instanceof Xr))throw new ot($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...i));return rv(s),new Xr(r.firestore,null,s)}}function Lr(r,t,...i){if(r=Tn(r),arguments.length===1&&(t=Rm.newId()),JE("doc","path",t),r instanceof Ah){const s=ne.fromString(t,...i);return iv(s),new Oe(r,null,new dt(s))}{if(!(r instanceof Oe||r instanceof Xr))throw new ot($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...i));return iv(s),new Oe(r.firestore,r instanceof Xr?r.converter:null,new dt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="AsyncQueue";class Qv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const s=Bd();s&&st(Fv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=Bd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Bd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ho(t))throw t;st(Fv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",Kv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Qm.createAndSchedule(this,t,i,s,h=>this.hc(h));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:Kv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Kv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class mo extends Ah{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new Qv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Qv(t),this._firestoreClient=void 0,await t}}}function e2(r,t){const i=typeof r=="object"?r:lE(),s=typeof r=="string"?r:Yc,l=gm(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=mS("firestore");h&&t2(l,...h)}return l}function Zm(r){if(r._terminated)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||n2(r),r._firestoreClient}function n2(r){const t=r._freezeSettings(),i=function(l,h,d,g){return new Rw(l,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,c0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new XC(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Un(Qe.fromBase64String(t))}catch(i){throw new ot($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Un(Qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Yl(t,Un._jsonSchema))return Un.fromBase64String(t.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:Se("string",Un._jsonSchemaVersion),bytes:Se("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new ot($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new ot($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new ot($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(t){if(Yl(t,Ei._jsonSchema))return new Ei(t.latitude,t.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:Se("string",Ei._jsonSchemaVersion),latitude:Se("number"),longitude:Se("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Yl(t,Ti._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new Ti(t.vectorValues);throw new ot($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:Se("string",Ti._jsonSchemaVersion),vectorValues:Se("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=/^__.*__$/;class r2{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,i,this.fieldTransforms):new Xl(t,this.data,i,this.fieldTransforms)}}function d0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:r})}}class Wm{constructor(t,i,s,l,h,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Wm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return rh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(d0(this.Ac)&&i2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class s2{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||vh(t)}Cc(t,i,s,l=!1){return new Wm({Ac:t,methodName:i,Dc:s,path:Fe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m0(r){const t=r._freezeSettings(),i=vh(r._databaseId);return new s2(r._databaseId,!!t.ignoreUndefinedProperties,i)}function g0(r,t,i,s,l,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,t,i,l);v0("Data must be an object, but it was:",d,s);const g=y0(s,d);let y,_;if(h.merge)y=new Xn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const C of h.mergeFields){const N=a2(t,C,i);if(!d.contains(N))throw new ot($.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);l2(A,N)||A.push(N)}y=new Xn(A),_=d.fieldTransforms.filter(C=>y.covers(C.field))}else y=null,_=d.fieldTransforms;return new r2(new kn(g),y,_)}function p0(r,t){if(_0(r=Tn(r)))return v0("Unsupported field value:",t,r),y0(r,t);if(r instanceof f0)return function(s,l){if(!d0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,l){const h=[];let d=0;for(const g of s){let y=p0(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}}(r,t)}return function(s,l){if((s=Tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Xw(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=ie.fromDate(s);return{timestampValue:th(l.serializer,h)}}if(s instanceof ie){const h=new ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:th(l.serializer,h)}}if(s instanceof Ei)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Un)return{bytesValue:OT(l.serializer,s._byteString)};if(s instanceof Oe){const h=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Um(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ti)return function(d,g){return{mapValue:{fields:{[oT]:{stringValue:lT},[Xc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Mm(g.serializer,_)})}}}}}}(s,l);throw l.Sc(`Unsupported field value: ${wm(s)}`)}(r,t)}function y0(r,t){const i={};return eT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(r,(s,l)=>{const h=p0(l,t.mc(s));h!=null&&(i[s]=h)}),{mapValue:{fields:i}}}function _0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ie||r instanceof Ei||r instanceof Un||r instanceof Oe||r instanceof f0||r instanceof Ti)}function v0(r,t,i){if(!_0(i)||!WE(i)){const s=wm(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function a2(r,t,i){if((t=Tn(t))instanceof Jm)return t._internalPath;if(typeof t=="string")return E0(r,t);throw rh("Field path arguments must be of type string or ",r,!1,void 0,i)}const o2=new RegExp("[~\\*/\\[\\]]");function E0(r,t,i){if(t.search(o2)>=0)throw rh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Jm(...t.split("."))._internalPath}catch{throw rh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function rh(r,t,i,s,l){const h=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${s}`),d&&(y+=` in document ${l}`),y+=")"),new ot($.INVALID_ARGUMENT,g+r+y)}function l2(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,i,s,l,h){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new u2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(A0("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class u2 extends T0{data(){return super.data()}}function A0(r,t){return typeof t=="string"?E0(r,t):t instanceof Jm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ot($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h2{convertValue(t,i="none"){switch(Wr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Jr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return Qs(t,(l,h)=>{s[l]=this.convertValue(h,i)}),s}convertVectorValue(t){const i=t.fields?.[Xc].arrayValue?.values?.map(s=>pe(s.doubleValue));return new Ti(i)}convertGeoPoint(t){return new Ei(pe(t.latitude),pe(t.longitude))}convertArray(t,i){return(t.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(t,i){switch(i){case"previous":const s=fh(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Ll(t));default:return null}}convertTimestamp(t){const i=Zr(t);return new ie(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=ne.fromString(t);Gt(UT(s),9688,{name:t});const l=new zl(s.get(1),s.get(3)),h=new dt(s.popFirst(5));return l.isEqual(i)||ir(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(r,t,i){let s;return s=r?i&&(i.merge||i.mergeFields)?r.toFirestore(t,i):r.toFirestore(t):t,s}class Il{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zs extends T0{constructor(t,i,s,l,h,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(A0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=zs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:Se("string",zs._jsonSchemaVersion),bundleSource:Se("string","DocumentSnapshot"),bundleName:Se("string"),bundle:Se("string")};class Lc extends zs{data(t={}){return super.data(t)}}class $a{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(s=>{t.call(i,new Lc(this._firestore,this._userDataWriter,s.key,s,new Il(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ot($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const y=new Lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const y=new Lc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Il(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:f2(g.type),doc:y,oldIndex:_,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$a._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Rm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function f2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){r=rr(r,Oe);const t=rr(r.firestore,mo);return JC(Zm(t),r._key).then(i=>m2(t,r,i))}$a._jsonSchemaVersion="firestore/querySnapshot/1.0",$a._jsonSchema={type:Se("string",$a._jsonSchemaVersion),bundleSource:Se("string","QuerySnapshot"),bundleName:Se("string"),bundle:Se("string")};class b0 extends h2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Un(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Oe(this.firestore,null,i)}}function Ic(r){r=rr(r,Sh);const t=rr(r.firestore,mo),i=Zm(t),s=new b0(t);return c2(r._query),WC(i,r._query).then(l=>new $a(t,s,r,l))}function Cc(r,t,i){r=rr(r,Oe);const s=rr(r.firestore,mo),l=S0(r.converter,t,i);return tg(s,[g0(m0(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,$n.none())])}function d2(r){return tg(rr(r.firestore,mo),[new Pm(r._key,$n.none())])}function Xv(r,t){const i=rr(r.firestore,mo),s=Lr(r),l=S0(r.converter,t);return tg(i,[g0(m0(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,$n.exists(!1))]).then(()=>s)}function tg(r,t){return function(s,l){const h=new tr;return s.asyncQueue.enqueueAndForget(async()=>BC(await ZC(s),l,h)),h.promise}(Zm(r),t)}function m2(r,t,i){const s=i.docs.get(t._key),l=new b0(r);return new zs(r,l,t._key,s,new Il(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){uo=l})(ao),Za(new js("firestore",(s,{instanceIdentifier:l,options:h})=>{const d=s.getProvider("app").getImmediate(),g=new mo(new aw(s.getProvider("auth-internal")),new uw(d,s.getProvider("app-check-internal")),function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ot($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(_.options.projectId,A)}(d,l),d);return h={useFetchStreams:i,...h},g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),Qr(W_,tv,t),Qr(W_,tv,"esm2020")})();const g2=`{
  "apiKey": "AIzaSyBXs2rOY-6mI9SPE_fZddhP8U_hgYO-R2s",
  "authDomain": "ezpay1599.firebaseapp.com",
  "projectId": "ezpay1599",
  "storageBucket": "ezpay1599.firebasestorage.app",
  "messagingSenderId": "825319046759",
  "appId": "1:825319046759:web:85c9f44c416fdf2fc61ec2"
}`,p2=JSON.parse(g2),R0=oE(p2),$v=nw(R0),Zi=e2(R0);function y2(){const[r,t]=ge.useState("login"),[i,s]=ge.useState("home"),[l,h]=ge.useState(""),[d,g]=ge.useState(""),[y,_]=ge.useState(""),[A,C]=ge.useState(""),[N,F]=ge.useState(""),[Z,rt]=ge.useState(0),[J,Tt]=ge.useState(""),[ht,ct]=ge.useState([]),[Ct,Et]=ge.useState(""),[Pt,M]=ge.useState(""),[S,w]=ge.useState([]),[O,V]=ge.useState([]),[P,R]=ge.useState({acc:"",name:"",amount:""}),[oe,te]=ge.useState(""),[H,et]=ge.useState(""),[lt,xt]=ge.useState(""),[I,X]=ge.useState(!1),[nt,W]=ge.useState(!1),ft=async()=>{try{const ee=(await qb($v,l,d)).user.uid;Tt(ee);const hn=Lr(Zi,"users",ee),en=await Yv(hn),be=(await Ic(Ba(Zi,"users"))).docs.map(Sn=>Sn.data().accno).filter(Boolean);if(w(be),!en.exists()||!en.data().pin)t("info");else{const Sn=en.data();_(Sn.name),C(Sn.phone),F(Sn.accno),rt(Sn.balance||0);const zn=(await Ic(Ba(hn,"beneficiaries"))).docs.map(Ke=>({acc:Ke.id,name:Ke.data().name||""}));ct(zn);const lr=(await Ic(Ba(hn,"transactions"))).docs.map(Ke=>Ke.data());V(lr.sort((Ke,bi)=>new Date(bi.time)-new Date(Ke.time))),t("dashboard")}}catch(it){alert("Login Error: "+it.message)}},Rt=async()=>{if(!y||!A||!oe||!H)return alert("Please fill in all fields.");if(oe.length!==6)return alert("PIN must be exactly 6 digits.");if(oe!==H)return alert("PINs do not match. Please try again.");try{const it=Math.floor(1e9+Math.random()*9e9).toString();F(it);const ee=Lr(Zi,"users",J);await Cc(ee,{name:y,phone:A,accno:it,balance:1e3,pin:oe}),rt(1e3),t("dashboard"),alert("Profile created successfully!")}catch(it){alert("Profile creation failed: "+it.message)}},_t=it=>{R({acc:it.acc,name:it.name,amount:""})},ye=()=>{const it=parseFloat(P.amount);if(isNaN(it)||it<=0)return alert("Please enter a valid amount.");if(it>Z)return alert("Insufficient balance.");document.getElementById("closePaymentModalBtn").click(),X(!0)},Kt=async()=>{if(lt.length!==6)return alert("Please enter your 6-digit PIN.");try{const it=Lr(Zi,"users",J),hn=(await Yv(it)).data().pin;if(lt!==hn)return alert("Invalid PIN. Please try again.");const en=parseFloat(P.amount),is=await Ic(Ba(Zi,"users"));let be=null;if(is.forEach(Ri=>{Ri.data().accno===P.acc&&(be=Ri)}),!be)return alert("Receiver not found!");const Sn=be.id,or=be.data(),zn=Lr(Zi,"users",J),Bn=Lr(Zi,"users",Sn);await Cc(zn,{balance:Z-en},{merge:!0}),await Cc(Bn,{balance:(or.balance||0)+en},{merge:!0});const lr=new Date().toISOString(),Ke={type:"debit",amount:en,name:P.name,time:lr,acc:P.acc},bi={type:"credit",amount:en,name:y,time:lr,acc:N};await Xv(Ba(zn,"transactions"),Ke),await Xv(Ba(Bn,"transactions"),bi),rt(Z-en),V(Ri=>[Ke,...Ri].sort((re,jt)=>new Date(jt.time)-new Date(re.time))),X(!1),xt(""),W(!0),setTimeout(()=>W(!1),3e3)}catch(it){alert("Payment failed: "+it.message)}},An=async()=>{if(!Pt||!Ct)return alert("Please fill both fields.");if(Ct===N)return alert("Can't add yourself as beneficiary.");if(!S.includes(Ct))return alert("Account number does not exist.");if(ht.find(it=>it.acc===Ct))return alert("Beneficiary already exists.");try{const it=Lr(Zi,"users",J,"beneficiaries",Ct);await Cc(it,{name:Pt,addedAt:new Date().toISOString()}),ct([...ht,{acc:Ct,name:Pt}]),Et(""),M("")}catch(it){alert("Error adding beneficiary: "+it.message)}},Jn=async it=>{if(window.confirm(`Are you sure you want to delete beneficiary ${it}?`))try{await d2(Lr(Zi,"users",J,"beneficiaries",it)),ct(ht.filter(ee=>ee.acc!==it))}catch(ee){alert("Failed to delete: "+ee.message)}},Ln=async()=>{await Fb($v),t("login"),h(""),g(""),_(""),C(""),F(""),rt(0),Tt(""),ct([]),Et(""),M(""),V([]),te(""),et("")};return q.jsxs("div",{className:"App",children:[r==="login"&&q.jsx("div",{className:"auth-container",children:q.jsxs("div",{className:"auth-card",children:[q.jsx("img",{src:Dd,alt:"Nexus Pay Logo",className:"auth-logo"}),q.jsx("input",{placeholder:"Email",value:l,onChange:it=>h(it.target.value)}),q.jsx("input",{placeholder:"Password",type:"password",value:d,onChange:it=>g(it.target.value)}),q.jsx("button",{onClick:ft,children:"Login"})]})}),r==="info"&&q.jsx("div",{className:"auth-container",children:q.jsxs("div",{className:"auth-card",children:[q.jsx("img",{src:Dd,alt:"Nexus Pay Logo",className:"auth-logo"}),q.jsx("h3",{className:"auth-subtitle",children:"Complete Profile"}),q.jsx("input",{placeholder:"Full Name",value:y,onChange:it=>_(it.target.value)}),q.jsx("input",{placeholder:"Phone Number",value:A,onChange:it=>C(it.target.value)}),q.jsx("input",{type:"password",maxLength:"6",placeholder:"Create 6-Digit PIN",value:oe,onChange:it=>te(it.target.value.replace(/\D/g,""))}),q.jsx("input",{type:"password",maxLength:"6",placeholder:"Confirm 6-Digit PIN",value:H,onChange:it=>et(it.target.value.replace(/\D/g,""))}),q.jsx("button",{onClick:Rt,children:"Create Profile"})]})}),r==="dashboard"&&q.jsxs(q.Fragment,{children:[q.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark",children:q.jsxs("div",{className:"container-fluid",children:[q.jsx("a",{className:"navbar-brand",href:"#",children:q.jsx("img",{src:Dd,alt:"Nexus Pay Logo",className:"nav-logo"})}),q.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:q.jsx("span",{className:"navbar-toggler-icon"})}),q.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:q.jsxs("ul",{className:"navbar-nav ms-auto align-items-center",children:[q.jsx("li",{className:"nav-item",children:q.jsx("button",{className:`nav-link btn btn-link ${i==="home"?"active":""}`,onClick:()=>s("home"),children:"Home"})}),q.jsx("li",{className:"nav-item",children:q.jsx("button",{className:`nav-link btn btn-link ${i==="transactions"?"active":""}`,onClick:()=>s("transactions"),children:"Transactions"})}),q.jsx("li",{className:"nav-item",children:q.jsx("button",{className:`nav-link btn btn-link ${i==="beneficiaries"?"active":""}`,onClick:()=>s("beneficiaries"),children:"Beneficiaries"})}),q.jsx("li",{className:"nav-item",children:q.jsx("button",{className:`nav-link btn btn-link ${i==="payment"?"active":""}`,onClick:()=>s("payment"),children:"Payment"})}),q.jsx("li",{className:"nav-item",children:q.jsx("button",{className:"nav-link btn logout-nav-btn",onClick:Ln,children:"Logout"})})]})})]})}),q.jsxs("div",{className:"dashboard",children:[i==="home"&&q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"card",children:[q.jsxs("h2",{children:["Welcome, ",y]}),q.jsxs("p",{children:[" Phone: ",A]}),q.jsxs("p",{children:[" Account No: ",N]}),q.jsxs("p",{children:[" Balance: ",Z]})]}),q.jsxs("div",{className:"card",children:[q.jsx("h3",{children:"Recent Transactions"}),q.jsxs("table",{className:"tx-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Name"}),q.jsx("th",{children:"Amount"}),q.jsx("th",{children:"Type"}),q.jsx("th",{children:"Date & Time"})]})}),q.jsx("tbody",{children:O.slice(0,5).map((it,ee)=>q.jsxs("tr",{children:[q.jsx("td",{children:it.name||"N/A"}),q.jsxs("td",{children:["",it.amount]}),q.jsx("td",{className:it.type==="debit"?"text-danger":"text-success",children:it.type}),q.jsx("td",{children:new Date(it.time).toLocaleString()})]},ee))})]}),O.length>5&&q.jsx("button",{className:"view-more-btn",onClick:()=>s("transactions"),children:"Click to view more"})]})]}),i==="transactions"&&q.jsxs("div",{className:"card",children:[q.jsx("h2",{children:"Your Transactions"}),q.jsxs("table",{className:"tx-table",children:[q.jsx("thead",{children:q.jsxs("tr",{children:[q.jsx("th",{children:"Name"}),q.jsx("th",{children:"Account No"}),q.jsx("th",{children:"Amount"}),q.jsx("th",{children:"Type"}),q.jsx("th",{children:"Date & Time"})]})}),q.jsx("tbody",{children:O.map((it,ee)=>q.jsxs("tr",{children:[q.jsx("td",{children:it.name||"N/A"}),q.jsx("td",{children:it.acc||"N/A"}),q.jsxs("td",{children:["",it.amount]}),q.jsx("td",{className:it.type==="debit"?"text-danger":"text-success",children:it.type}),q.jsx("td",{children:new Date(it.time).toLocaleString()})]},ee))})]})]}),i==="beneficiaries"&&q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"card",children:[q.jsx("h3",{children:"Add Beneficiary"}),q.jsx("input",{placeholder:"Beneficiary Name",value:Pt,onChange:it=>M(it.target.value)}),q.jsx("input",{placeholder:"Beneficiary Account Number",value:Ct,onChange:it=>Et(it.target.value)}),q.jsx("button",{onClick:An,children:"Add Beneficiary"})]}),q.jsxs("div",{className:"card",children:[q.jsx("h3",{children:"Your Beneficiaries"}),ht.length===0?q.jsx("p",{children:"No beneficiaries added."}):q.jsx("ul",{className:"beneficiary-list",children:ht.map((it,ee)=>q.jsxs("li",{className:"beneficiary-item",children:[q.jsxs("span",{children:[" ",it.name," - ",it.acc]}),q.jsx("button",{onClick:()=>Jn(it.acc),children:""})]},ee))})]})]}),i==="payment"&&q.jsxs("div",{className:"card",children:[q.jsx("h2",{children:"Make Payment"}),ht.length===0?q.jsx("p",{children:"Please add a beneficiary first."}):q.jsx("div",{className:"row justify-content-center",children:ht.map((it,ee)=>q.jsx("div",{className:"col-md-auto mb-3",children:q.jsxs("div",{className:"card p-3",children:[q.jsx("h5",{children:it.name}),q.jsx("p",{children:it.acc}),q.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#paymentModal",onClick:()=>_t(it),children:"Pay Now"})]})},ee))})]})]})]}),q.jsx("div",{className:"modal fade",id:"paymentModal",tabIndex:"-1","aria-hidden":"true",children:q.jsx("div",{className:"modal-dialog modal-dialog-centered",children:q.jsxs("div",{className:"modal-content",children:[q.jsxs("div",{className:"modal-header",children:[q.jsx("h5",{className:"modal-title",children:"Make Payment"}),q.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),q.jsxs("div",{className:"modal-body",children:[q.jsxs("div",{className:"mb-3",children:[q.jsx("label",{className:"col-form-label",children:"Name:"}),q.jsx("input",{type:"text",className:"form-control",value:P.name,disabled:!0})]}),q.jsxs("div",{className:"mb-3",children:[q.jsx("label",{className:"col-form-label",children:"Account Number:"}),q.jsx("input",{type:"text",className:"form-control",value:P.acc,disabled:!0})]}),q.jsxs("div",{className:"mb-3",children:[q.jsx("label",{className:"col-form-label",children:"Amount:"}),q.jsx("input",{type:"number",className:"form-control",value:P.amount,onChange:it=>R({...P,amount:it.target.value}),autoFocus:!0})]})]}),q.jsxs("div",{className:"modal-footer",children:[q.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",id:"closePaymentModalBtn",children:"Close"}),q.jsx("button",{type:"button",className:"btn btn-primary",onClick:ye,children:"Confirm Payment"})]})]})})}),I&&q.jsx("div",{className:"modal-backdrop",children:q.jsxs("div",{className:"otp-modal",children:[q.jsx("h4",{children:"Confirm Payment"}),q.jsxs("p",{children:["Paying ",P.amount," to ",P.name]}),q.jsx("input",{type:"password",maxLength:"6",placeholder:"Enter Your 6-Digit PIN",value:lt,onChange:it=>xt(it.target.value.replace(/\D/g,"")),className:"otp-input",autoFocus:!0}),q.jsx("button",{onClick:Kt,children:"Make Payment"}),q.jsx("button",{className:"btn-secondary",onClick:()=>X(!1),children:"Cancel"})]})}),nt&&q.jsx("div",{className:"modal-backdrop",children:q.jsxs("div",{className:"otp-modal",children:[q.jsx("h2",{children:""}),q.jsx("h4",{children:"Payment Successful!"})]})})]})}sS.createRoot(document.getElementById("root")).render(q.jsx(ge.StrictMode,{children:q.jsx(y2,{})}));
